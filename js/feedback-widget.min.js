const FeedbackWidget={isOpen:!1,hasSubmitted:!1,init(){sessionStorage.getItem("feedback_submitted")||setTimeout(()=>{this.render()},3e4)},render(){const e=document.createElement("div");e.id="feedback-widget",e.innerHTML=this.getHTML(),document.body.appendChild(e),this.attachEventListeners()},getHTML:()=>`\n            \x3c!-- Feedback Button (collapsed state) --\x3e\n            <button id="feedback-button" class="feedback-button" aria-label="Send Feedback" title="Send Feedback">\n                <i class="fas fa-comment-alt"></i>\n                <span class="feedback-button-text">Feedback</span>\n            </button>\n\n            \x3c!-- Feedback Panel (expanded state) --\x3e\n            <div id="feedback-panel" class="feedback-panel" style="display: none;">\n                <div class="feedback-header">\n                    <h3 class="feedback-title">\n                        <i class="fas fa-fire"></i>\n                        Send Feedback\n                    </h3>\n                    <button id="feedback-close" class="feedback-close" aria-label="Close feedback">\n                        <i class="fas fa-times"></i>\n                    </button>\n                </div>\n\n                <div class="feedback-content">\n                    \x3c!-- Rating --\x3e\n                    <div class="feedback-section">\n                        <label class="feedback-label">How satisfied are you with Blaze Sports Intel?</label>\n                        <div class="feedback-rating">\n                            ${[1,2,3,4,5].map(e=>`\n                                <button\n                                    class="rating-star"\n                                    data-rating="${e}"\n                                    aria-label="${e} star${1!==e?"s":""}"\n                                >\n                                    <i class="fas fa-star"></i>\n                                </button>\n                            `).join("")}\n                        </div>\n                    </div>\n\n                    \x3c!-- Category --\x3e\n                    <div class="feedback-section">\n                        <label class="feedback-label" for="feedback-category">Feedback Type</label>\n                        <select id="feedback-category" class="feedback-select">\n                            <option value="">Select a category...</option>\n                            <option value="bug">üêõ Bug Report</option>\n                            <option value="feature">üí° Feature Request</option>\n                            <option value="data">üìä Data Issue</option>\n                            <option value="performance">‚ö° Performance Issue</option>\n                            <option value="ui">üé® UI/UX Feedback</option>\n                            <option value="general">üí¨ General Feedback</option>\n                        </select>\n                    </div>\n\n                    \x3c!-- Message --\x3e\n                    <div class="feedback-section">\n                        <label class="feedback-label" for="feedback-message">Your Feedback</label>\n                        <textarea\n                            id="feedback-message"\n                            class="feedback-textarea"\n                            placeholder="Tell us what you think... (optional)"\n                            rows="4"\n                        ></textarea>\n                    </div>\n\n                    \x3c!-- Email (optional) --\x3e\n                    <div class="feedback-section">\n                        <label class="feedback-label" for="feedback-email">\n                            Email (optional)\n                            <span class="feedback-label-hint">For follow-up if needed</span>\n                        </label>\n                        <input\n                            id="feedback-email"\n                            type="email"\n                            class="feedback-input"\n                            placeholder="your@email.com"\n                        />\n                    </div>\n\n                    \x3c!-- Submit Button --\x3e\n                    <button id="feedback-submit" class="feedback-submit">\n                        <i class="fas fa-paper-plane"></i>\n                        Send Feedback\n                    </button>\n                </div>\n\n                \x3c!-- Success State --\x3e\n                <div id="feedback-success" class="feedback-success" style="display: none;">\n                    <div class="feedback-success-icon">\n                        <i class="fas fa-check-circle"></i>\n                    </div>\n                    <h3 class="feedback-success-title">Thank You!</h3>\n                    <p class="feedback-success-message">\n                        Your feedback helps us improve Blaze Sports Intel. We appreciate you taking the time to share your thoughts.\n                    </p>\n                </div>\n            </div>\n\n            <style>\n                /* Feedback Button */\n                .feedback-button {\n                    position: fixed;\n                    bottom: 2rem;\n                    right: 2rem;\n                    background: linear-gradient(135deg, #BF5700, #FF8C00);\n                    color: white;\n                    border: none;\n                    border-radius: 50px;\n                    padding: 1rem 1.5rem;\n                    font-size: 1rem;\n                    font-weight: 600;\n                    cursor: pointer;\n                    box-shadow: 0 4px 16px rgba(191, 87, 0, 0.4);\n                    display: flex;\n                    align-items: center;\n                    gap: 0.5rem;\n                    z-index: 9998;\n                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n                }\n\n                .feedback-button:hover {\n                    transform: translateY(-2px);\n                    box-shadow: 0 6px 24px rgba(191, 87, 0, 0.5);\n                }\n\n                .feedback-button:active {\n                    transform: translateY(0);\n                }\n\n                .feedback-button-text {\n                    font-size: 0.9rem;\n                }\n\n                /* Feedback Panel */\n                .feedback-panel {\n                    position: fixed;\n                    bottom: 2rem;\n                    right: 2rem;\n                    width: 420px;\n                    max-width: calc(100vw - 4rem);\n                    max-height: calc(100vh - 4rem);\n                    background: rgba(26, 26, 26, 0.95);\n                    backdrop-filter: blur(20px);\n                    border: 1px solid rgba(255, 255, 255, 0.1);\n                    border-radius: 16px;\n                    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);\n                    z-index: 9999;\n                    overflow: hidden;\n                    animation: slideUp 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n                }\n\n                @keyframes slideUp {\n                    from {\n                        opacity: 0;\n                        transform: translateY(20px);\n                    }\n                    to {\n                        opacity: 1;\n                        transform: translateY(0);\n                    }\n                }\n\n                .feedback-header {\n                    display: flex;\n                    align-items: center;\n                    justify-content: space-between;\n                    padding: 1.5rem;\n                    border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n                }\n\n                .feedback-title {\n                    font-size: 1.125rem;\n                    font-weight: 700;\n                    color: rgba(255, 255, 255, 0.95);\n                    margin: 0;\n                    display: flex;\n                    align-items: center;\n                    gap: 0.5rem;\n                }\n\n                .feedback-title i {\n                    color: #BF5700;\n                }\n\n                .feedback-close {\n                    background: none;\n                    border: none;\n                    color: rgba(255, 255, 255, 0.6);\n                    font-size: 1.25rem;\n                    cursor: pointer;\n                    padding: 0.5rem;\n                    border-radius: 6px;\n                    transition: all 0.2s ease;\n                }\n\n                .feedback-close:hover {\n                    background: rgba(255, 255, 255, 0.1);\n                    color: rgba(255, 255, 255, 0.9);\n                }\n\n                .feedback-content {\n                    padding: 1.5rem;\n                    max-height: calc(100vh - 10rem);\n                    overflow-y: auto;\n                }\n\n                .feedback-section {\n                    margin-bottom: 1.5rem;\n                }\n\n                .feedback-label {\n                    display: block;\n                    font-size: 0.875rem;\n                    font-weight: 600;\n                    color: rgba(255, 255, 255, 0.8);\n                    margin-bottom: 0.5rem;\n                }\n\n                .feedback-label-hint {\n                    font-size: 0.75rem;\n                    font-weight: 400;\n                    color: rgba(255, 255, 255, 0.5);\n                    margin-left: 0.25rem;\n                }\n\n                /* Rating Stars */\n                .feedback-rating {\n                    display: flex;\n                    gap: 0.5rem;\n                }\n\n                .rating-star {\n                    background: none;\n                    border: none;\n                    color: rgba(255, 255, 255, 0.3);\n                    font-size: 1.75rem;\n                    cursor: pointer;\n                    padding: 0.25rem;\n                    transition: all 0.2s ease;\n                }\n\n                .rating-star:hover,\n                .rating-star.active {\n                    color: #FFD700;\n                    transform: scale(1.15);\n                }\n\n                /* Form Inputs */\n                .feedback-select,\n                .feedback-input,\n                .feedback-textarea {\n                    width: 100%;\n                    background: rgba(255, 255, 255, 0.05);\n                    border: 1px solid rgba(255, 255, 255, 0.1);\n                    border-radius: 8px;\n                    padding: 0.75rem;\n                    color: rgba(255, 255, 255, 0.9);\n                    font-size: 0.875rem;\n                    font-family: inherit;\n                    transition: all 0.2s ease;\n                }\n\n                .feedback-select:focus,\n                .feedback-input:focus,\n                .feedback-textarea:focus {\n                    outline: none;\n                    border-color: #BF5700;\n                    background: rgba(255, 255, 255, 0.08);\n                }\n\n                .feedback-textarea {\n                    resize: vertical;\n                    min-height: 100px;\n                }\n\n                /* Submit Button */\n                .feedback-submit {\n                    width: 100%;\n                    background: linear-gradient(135deg, #BF5700, #FF8C00);\n                    border: none;\n                    border-radius: 8px;\n                    padding: 0.875rem;\n                    color: white;\n                    font-size: 0.9375rem;\n                    font-weight: 600;\n                    cursor: pointer;\n                    transition: all 0.2s ease;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    gap: 0.5rem;\n                }\n\n                .feedback-submit:hover {\n                    transform: translateY(-1px);\n                    box-shadow: 0 4px 12px rgba(191, 87, 0, 0.4);\n                }\n\n                .feedback-submit:active {\n                    transform: translateY(0);\n                }\n\n                .feedback-submit:disabled {\n                    opacity: 0.6;\n                    cursor: not-allowed;\n                }\n\n                /* Success State */\n                .feedback-success {\n                    padding: 3rem 2rem;\n                    text-align: center;\n                }\n\n                .feedback-success-icon {\n                    font-size: 4rem;\n                    color: #10b981;\n                    margin-bottom: 1rem;\n                }\n\n                .feedback-success-title {\n                    font-size: 1.5rem;\n                    font-weight: 700;\n                    color: rgba(255, 255, 255, 0.95);\n                    margin: 0 0 0.5rem 0;\n                }\n\n                .feedback-success-message {\n                    font-size: 0.9375rem;\n                    color: rgba(255, 255, 255, 0.7);\n                    line-height: 1.6;\n                    margin: 0;\n                }\n\n                /* Mobile Responsive */\n                @media (max-width: 640px) {\n                    .feedback-button {\n                        bottom: 1rem;\n                        right: 1rem;\n                        padding: 0.875rem 1.25rem;\n                    }\n\n                    .feedback-button-text {\n                        display: none;\n                    }\n\n                    .feedback-panel {\n                        bottom: 1rem;\n                        right: 1rem;\n                        width: calc(100vw - 2rem);\n                    }\n                }\n\n                /* Accessibility */\n                @media (prefers-reduced-motion: reduce) {\n                    .feedback-button,\n                    .feedback-panel,\n                    .rating-star {\n                        animation: none !important;\n                        transition: none !important;\n                    }\n                }\n            </style>\n        `,attachEventListeners(){const e=document.getElementById("feedback-button"),n=document.getElementById("feedback-panel"),a=document.getElementById("feedback-close"),t=document.getElementById("feedback-submit"),o=document.querySelectorAll(".rating-star");e?.addEventListener("click",()=>{this.isOpen=!0,e.style.display="none",n.style.display="block"}),a?.addEventListener("click",()=>{this.close()}),o.forEach((e,n)=>{e.addEventListener("click",()=>{o.forEach((e,a)=>{a<=n?e.classList.add("active"):e.classList.remove("active")})}),e.addEventListener("mouseenter",()=>{o.forEach((e,a)=>{e.style.color=a<=n?"#FFD700":"rgba(255, 255, 255, 0.3)"})}),e.addEventListener("mouseleave",()=>{o.forEach(e=>{e.classList.contains("active")||(e.style.color="rgba(255, 255, 255, 0.3)")})})}),t?.addEventListener("click",()=>{this.submit()})},async submit(){const e=document.querySelectorAll(".rating-star.active").length,n=document.getElementById("feedback-category")?.value||"",a=document.getElementById("feedback-message")?.value||"",t=(document.getElementById("feedback-email"),document.getElementById("feedback-submit"));if(0===e&&!n&&!a)return void alert("Please provide at least a rating, category, or message.");t&&(t.disabled=!0,t.innerHTML='<i class="fas fa-spinner fa-spin"></i> Sending...');const o={rating:e||3,category:{bug:"bug",feature:"feature",data:"data-quality",performance:"performance",ui:"other",general:"other"}[n]||"other",comment:a||"No comment provided",page:window.location.pathname,userAgent:navigator.userAgent,screenSize:`${window.innerWidth}x${window.innerHeight}`};try{const e=await fetch("/api/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.error||"Failed to submit feedback")}this.showSuccess(),sessionStorage.setItem("feedback_submitted","true")}catch(e){t&&(t.disabled=!1,t.innerHTML='<i class="fas fa-paper-plane"></i> Send Feedback'),alert("Failed to send feedback. Please try again or contact austin@blazesportsintel.com")}},showSuccess(){const e=document.querySelector(".feedback-content"),n=document.getElementById("feedback-success");e&&n&&(e.style.display="none",n.style.display="block",setTimeout(()=>{this.close()},3e3))},close(){const e=document.getElementById("feedback-button"),n=document.getElementById("feedback-panel");e&&n&&(this.isOpen=!1,n.style.display="none",e.style.display="flex")}};"undefined"!=typeof window&&(window.FeedbackWidget=FeedbackWidget,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>FeedbackWidget.init()):FeedbackWidget.init());
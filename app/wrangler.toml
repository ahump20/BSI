name = "blaze-data-layer"
main = "worker-implementation.ts"
compatibility_date = "2024-08-23"

[env.production]
name = "blaze-data-layer-prod"

# KV Namespaces for caching
[[kv_namespaces]]
binding = "KV"
id = "b666864ae6fe4576a7cb94277d6ef4f2"
preview_id = "314e25f60fbd436e8ba3af4d34b8351c"

# D1 Database for lead storage
[[d1_databases]]
binding = "DB"
database_name = "blaze-leads"
database_id = "335816a4-7a0d-4ec8-8587-efc70b82afeb"

# Durable Objects for real-time state
[[durable_objects.bindings]]
name = "CACHE"
class_name = "CacheObject"
script_name = "blaze-data-layer"

# Environment variables (add your actual values)
[vars]
ENVIRONMENT = "production"
API_VERSION = "1.0.0"

# Secrets (use wrangler secret put to add these)
# NOTION_TOKEN = "your-notion-token"
# NOTION_DATABASE_ID = "your-database-id"

# Routes - using subdomain to avoid conflicts
# [[routes]]
# pattern = "data.blaze-intelligence.com/*"
# zone_name = "blaze-intelligence.com"

# Development settings
[dev]
port = 8787
local_protocol = "http"

# Build configuration handled automatically by wrangler
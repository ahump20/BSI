---
description: Cloudflare Worker configuration rules
globs:
  - "**/wrangler.toml"
  - workers/**/*.ts
  - workers/**/*.js
---

# Cloudflare Workers Config (BSI)

## wrangler.toml conventions
- `name` must follow `bsi-{domain}-{function}` pattern
- `compatibility_date` should be recent (2025+)
- Group bindings by type (KV, D1, R2, etc.)

## Bindings
| Type | Naming | Example |
|------|--------|---------|
| KV | `BSI_{DOMAIN}_{PURPOSE}` | `BSI_BASEBALL_CACHE` |
| D1 | `bsi-{domain}-db` | `bsi-baseball-db` |
| R2 | `bsi-{domain}-{asset}` | `bsi-media-videos` |

## Environment variables
- Never commit secrets â€” use `wrangler secret put`
- Document required env vars in comments
- Use `.dev.vars` for local development (gitignored)

## Before creating a new worker
1. Check if similar functionality exists in another worker
2. Consider adding to existing worker vs. creating new
3. If new: follow naming convention, add to workers/ directory

## Deployment
```bash
wrangler deploy --config workers/{name}/wrangler.toml
```

import{P as t}from"./phaser-CIjcVCQt.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)}).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();class e extends t.Scene{constructor(){super({key:"BootScene"})}preload(){const t=this.add.text(this.cameras.main.width/2,this.cameras.main.height/2,"Loading...",{fontSize:"32px",color:"#ffffff"});t.setOrigin(.5);const e=this.add.graphics(),s=this.add.graphics();s.fillStyle(2236962,.8),s.fillRect(this.cameras.main.width/2-160,this.cameras.main.height/2+50,320,50),this.load.on("progress",t=>{e.clear(),e.fillStyle(16777215,1),e.fillRect(this.cameras.main.width/2-150,this.cameras.main.height/2+60,300*t,30)}),this.load.on("complete",()=>{e.destroy(),s.destroy(),t.destroy()})}create(){this.scene.start("MenuScene")}}class s extends t.Scene{constructor(){super({key:"MenuScene"})}create(){const{width:t,height:e}=this.cameras.main;this.add.rectangle(t/2,0,t,e/3,1728378),this.add.rectangle(t/2,e/3,t,e/3,2985128),this.add.rectangle(t/2,2*e/3,t,e/3,5093585);const s=this.add.text(t/2,e/3,"Baseball Game",{fontSize:"64px",color:"#ffffff",fontStyle:"bold",stroke:"#000000",strokeThickness:6});s.setOrigin(.5);this.add.text(t/2,e/3+70,"Original â€¢ Mobile-Friendly",{fontSize:"24px",color:"#ffcc00",fontStyle:"italic"}).setOrigin(.5),this.createButton(t/2,e/2+50,"PLAY GAME",()=>this.scene.start("GameScene"));this.add.text(t/2,e-40,"Â© Blaze Sports Intel â€¢ All characters and assets are original",{fontSize:"14px",color:"#cccccc"}).setOrigin(.5),this.tweens.add({targets:s,y:s.y-10,duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})}createButton(t,e,s,i){const n=this.add.container(t,e),a=this.add.rectangle(0,0,250,70,43520);a.setStrokeStyle(4,16777215),a.setInteractive({useHandCursor:!0});const r=this.add.text(0,0,s,{fontSize:"28px",color:"#ffffff",fontStyle:"bold"});return r.setOrigin(.5),a.on("pointerover",()=>{a.setFillStyle(52224),this.tweens.add({targets:n,scaleX:1.05,scaleY:1.05,duration:100})}),a.on("pointerout",()=>{a.setFillStyle(43520),this.tweens.add({targets:n,scaleX:1,scaleY:1,duration:100})}),a.on("pointerdown",i),n.add([a,r]),n}}const i={width:800,height:600,physics:{default:"arcade",arcade:{gravity:{y:980},debug:!1}},backgroundColor:"#87CEEB",pixelArt:!0,innings:3,outsPerInning:3,strikesPerOut:3,ballsPerWalk:4,batting:{perfectTimingMs:50,goodTimingMs:150,earlyLateMs:200},pitches:{fastball:{speed:600,name:"Fastball",color:16711680},changeup:{speed:400,name:"Changeup",color:255},curveball:{speed:500,name:"Curveball",color:65280}}};class n{constructor(){this.inning=1,this.isTopOfInning=!0,this.balls=0,this.strikes=0,this.outs=0,this.player={score:0,hits:0,outs:0},this.cpu={score:0,hits:0,outs:0},this.isGameOver=!1,this.winner=null,this.reset()}reset(){this.inning=1,this.isTopOfInning=!0,this.balls=0,this.strikes=0,this.outs=0,this.player={score:0,hits:0,outs:0},this.cpu={score:0,hits:0,outs:0},this.isGameOver=!1,this.winner=null}addStrike(){return this.strikes++,this.strikes>=i.strikesPerOut&&(this.addOut(),!0)}addBall(){return this.balls++,this.balls>=i.ballsPerWalk&&(this.resetCount(),!0)}addOut(){this.outs++,this.resetCount(),this.outs>=i.outsPerInning&&this.nextHalfInning()}resetCount(){this.balls=0,this.strikes=0}recordHit(t){switch(this.player.hits++,t){case"single":Math.random()<.3&&this.player.score++;break;case"double":Math.random()<.5&&this.player.score++;break;case"triple":Math.random()<.75&&this.player.score++;break;case"homerun":this.player.score++}this.resetCount()}nextHalfInning(){this.outs=0,this.resetCount(),this.isTopOfInning?(this.isTopOfInning=!1,this.simulateCPUInning()):(this.inning++,this.isTopOfInning=!0,this.inning>i.innings&&this.endGame())}simulateCPUInning(){const t=Math.floor(4*Math.random());this.cpu.score+=t,this.cpu.hits+=Math.floor(3*Math.random())}endGame(){this.isGameOver=!0,this.player.score>this.cpu.score?this.winner="player":this.cpu.score>this.player.score?this.winner="cpu":this.winner="tie"}getAtBatSummary(){return`Inning ${this.inning} ${this.isTopOfInning?"â–²":"â–¼"} | ${this.balls}-${this.strikes} | ${this.outs} out${1!==this.outs?"s":""}`}getScoreSummary(){return`Player: ${this.player.score} | CPU: ${this.cpu.score}`}}class a{static calculateHit(t,e){const s=Math.abs(t);if(s<=i.batting.perfectTimingMs){return{type:"homerun",distance:700+100*Math.random(),angle:this.calculateAngle(t,25,35)}}if(s<=i.batting.goodTimingMs){const e=400+200*Math.random();return{type:e>500?"triple":"double",distance:e,angle:this.calculateAngle(t,20,40)}}if(s<=i.batting.earlyLateMs){return{type:"single",distance:200+150*Math.random(),angle:this.calculateAngle(t,15,45)}}const n=Math.random()>.5;return{type:n?"foul":"out",distance:100+100*Math.random(),angle:n?this.calculateAngle(t,-20,70):10}}static calculateAngle(t,e,s){return e+(s-e)*(1-Math.max(-1,Math.min(1,t/200)))/2}static calculateTrajectory(t,e,s,i,n=30){const a=[],r=i*Math.PI/180;for(let o=0;o<=n;o++){const i=o/n,h=t+s*i*Math.cos(r),l=e-4*i*(1-i)*s*Math.sin(r)*.5;a.push({x:h,y:l})}return a}static isInStrikeZone(t,e,s){return Phaser.Geom.Rectangle.Contains(s,t,e)}}class r{constructor(t){this.isEnabled=!0,this.scene=t,this.setupInput()}setupInput(){this.scene.input.on("pointerdown",()=>{this.isEnabled&&this.swingCallback&&this.swingCallback()}),this.scene.input.keyboard&&this.scene.input.keyboard.on("keydown-SPACE",()=>{this.isEnabled&&this.swingCallback&&this.swingCallback()})}onSwing(t){this.swingCallback=t}setEnabled(t){this.isEnabled=t}clear(){this.swingCallback=void 0}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static getDevicePixelRatio(){return window.devicePixelRatio||1}}class o{constructor(t){this.sounds=new Map,this.isMuted=!1,this.scene=t}init(){this.sounds.set("swing",null),this.sounds.set("hit",null),this.sounds.set("strike",null),this.sounds.set("out",null),this.sounds.set("cheer",null)}play(t){if(this.isMuted)return;const e=this.sounds.get(t);e&&e.play?e.play():console.log(`[Audio] ${t}`)}toggleMute(){return this.isMuted=!this.isMuted,this.isMuted}setVolume(t){this.scene.sound.volume=Math.max(0,Math.min(1,t))}stopAll(){this.scene.sound.stopAll()}destroy(){this.stopAll(),this.sounds.clear()}}class h{constructor(t,e,s){this.scene=t,this.container=t.add.container(e,s);const i=t.add.rectangle(0,0,380,120,0,.7);i.setStrokeStyle(2,16777215),this.container.add(i),this.scoreText=t.add.text(-170,-40,"Score:",{fontSize:"20px",color:"#ffffff",fontStyle:"bold"}),this.container.add(this.scoreText),this.inningText=t.add.text(-170,-10,"Inning:",{fontSize:"18px",color:"#ffcc00"}),this.container.add(this.inningText),this.countText=t.add.text(-170,15,"Count:",{fontSize:"18px",color:"#00ff00"}),this.container.add(this.countText),this.outsText=t.add.text(-170,40,"Outs:",{fontSize:"18px",color:"#ff6666"}),this.container.add(this.outsText)}update(t){this.scoreText.setText(`Score: Player ${t.player.score} - CPU ${t.cpu.score}`),this.inningText.setText(`Inning: ${t.inning} ${t.isTopOfInning?"â–²":"â–¼"}`),this.countText.setText(`Count: ${t.balls}-${t.strikes}`),this.outsText.setText(`Outs: ${t.outs}`)}setVisible(t){this.container.setVisible(t)}destroy(){this.container.destroy()}}class l{constructor(t){this.scene=t,this.container=t.add.container(t.cameras.main.width/2,t.cameras.main.height/2),this.createTutorial()}createTutorial(){const t=this.scene.add.rectangle(0,0,600,400,0,.9);t.setStrokeStyle(3,16763904),this.container.add(t);const e=this.scene.add.text(0,-150,"How to Play",{fontSize:"32px",color:"#ffcc00",fontStyle:"bold"});e.setOrigin(.5),this.container.add(e);const s=["âš¾ Hit the ball when it crosses the plate!","",r.isTouchDevice()?"ðŸ“± TAP anywhere to swing":"âŒ¨ï¸  Press SPACE to swing","","ðŸŽ¯ Perfect timing = Home run!","âœ… Good timing = Hit!","âŒ Poor timing = Out or foul","","ðŸŽ® Try to score more runs than the CPU","ðŸ“Š Game is 3 innings"],i=this.scene.add.text(0,-50,s.join("\n"),{fontSize:"18px",color:"#ffffff",align:"center",lineSpacing:8});i.setOrigin(.5),this.container.add(i);const n=this.scene.add.rectangle(0,150,200,60,43520);n.setStrokeStyle(2,16777215),n.setInteractive({useHandCursor:!0});const a=this.scene.add.text(0,150,"START GAME",{fontSize:"24px",color:"#ffffff",fontStyle:"bold"});a.setOrigin(.5),n.on("pointerdown",()=>this.close()),n.on("pointerover",()=>n.setFillStyle(52224)),n.on("pointerout",()=>n.setFillStyle(43520)),this.container.add([n,a]),this.container.setDepth(1e3)}onCompleteTutorial(t){this.onComplete=t}close(){this.container.destroy(),this.onComplete&&this.onComplete()}show(){this.container.setVisible(!0)}hide(){this.container.setVisible(!1)}}class c extends t.Scene{constructor(){super({key:"GameScene"}),this.isPitching=!1,this.pitchStartTime=0,this.canSwing=!1}create(){this.gameState=new n,this.inputSystem=new r(this),this.audioSystem=new o(this),this.audioSystem.init(),this.createField(),this.createUI();const t=new l(this);t.onCompleteTutorial(()=>{this.startNewAtBat()}),t.show(),this.inputSystem.onSwing(()=>this.swing())}createField(){const{width:t,height:e}=this.cameras.main;this.add.rectangle(t/2,e/2,t,e,2980397),this.add.ellipse(t/2,e-100,400,200,12687979),this.homeBase=this.add.rectangle(t/2,e-100,30,30,16777215),this.homeBase.setStrokeStyle(2,0),this.strikeZone=this.add.rectangle(t/2,e-200,80,120,16711680,.1),this.strikeZone.setStrokeStyle(2,16711680,.3),this.pitcher=this.add.rectangle(t/2,150,40,60,26316),this.pitcher.setStrokeStyle(2,13158),this.add.ellipse(t/2,150,80,40,12687979),this.batter=this.add.rectangle(t/2+50,e-150,30,50,13369344),this.batter.setStrokeStyle(2,6684672),this.bat=this.add.rectangle(t/2+80,e-150,10,60,9127187),this.bat.setVisible(!1),this.ball=this.add.circle(t/2,150,8,16777215),this.ball.setStrokeStyle(2,13421772),this.ball.setVisible(!1)}createUI(){const{width:t}=this.cameras.main;this.scoreboard=new h(this,t/2,60),this.scoreboard.update(this.gameState);const e=this.add.text(t/2,450,"Get ready...",{fontSize:"24px",color:"#ffffff",backgroundColor:"#000000",padding:{x:20,y:10}});e.setOrigin(.5),this.resultText=e}startNewAtBat(){this.canSwing=!1,this.isPitching=!1,this.resultText&&this.resultText.setText("Get ready..."),this.time.delayedCall(1500,()=>{this.throwPitch()})}throwPitch(){this.currentPitch=t.Math.RND.pick(["fastball","changeup","curveball"]);const e=i.pitches[this.currentPitch];this.ball.setVisible(!0),this.ball.setPosition(this.cameras.main.width/2,150),this.ball.setFillStyle(e.color),this.isPitching=!0,this.pitchStartTime=this.time.now,this.canSwing=!0,this.resultText&&this.resultText.setText(`${e.name}!`),this.tweens.add({targets:this.ball,y:this.cameras.main.height-200,duration:1e3-e.speed,ease:"Linear",onComplete:()=>{this.onPitchComplete()}}),this.inputSystem.setEnabled(!0)}swing(){if(!this.canSwing||!this.isPitching)return;this.canSwing=!1,this.inputSystem.setEnabled(!1),this.bat.setVisible(!0),this.tweens.add({targets:this.bat,angle:-90,duration:200,yoyo:!0,onComplete:()=>{this.bat.setVisible(!1),this.bat.setAngle(0)}}),this.audioSystem.play("swing");const t=this.time.now,e=1e3-i.pitches[this.currentPitch].speed,s=t-(this.pitchStartTime+e),n=a.calculateHit(s,i.pitches[this.currentPitch].speed);this.processHit(n)}processHit(t){this.tweens.killTweensOf(this.ball),"foul"===t.type?(this.showResult("Foul Ball!","#ffaa00"),this.audioSystem.play("strike"),this.gameState.strikes<2&&this.gameState.addStrike(),this.time.delayedCall(1500,()=>{this.ball.setVisible(!1),this.startNewAtBat()})):"out"===t.type?(this.showResult("Strike Out!","#ff0000"),this.audioSystem.play("out"),this.gameState.addOut(),this.time.delayedCall(2e3,()=>{this.ball.setVisible(!1),this.checkGameOver()})):(this.showResult(this.getHitText(t.type),"#00ff00"),this.audioSystem.play("hit"),this.gameState.recordHit(t.type),this.animateBallFlight(t)),this.scoreboard.update(this.gameState)}onPitchComplete(){if(!this.canSwing)return;this.canSwing=!1,this.inputSystem.setEnabled(!1);Math.random()<.7?(this.showResult("Strike!","#ff6666"),this.audioSystem.play("strike"),this.gameState.addStrike()):(this.showResult("Ball","#6666ff"),this.gameState.addBall()),this.scoreboard.update(this.gameState),this.time.delayedCall(1500,()=>{this.ball.setVisible(!1),this.checkGameOver()})}animateBallFlight(t){const e=this.ball.x,s=this.ball.y,i=a.calculateTrajectory(e,s,t.distance,t.angle,20),n=this.tweens.createTimeline();i.forEach((t,e)=>{const s=0===e?0:100;n.add({targets:this.ball,x:t.x,y:t.y,duration:s,ease:"Linear"})}),n.on("complete",()=>{this.time.delayedCall(1e3,()=>{this.ball.setVisible(!1),this.ball.setPosition(this.cameras.main.width/2,150),this.checkGameOver()})}),n.play()}checkGameOver(){this.gameState.isGameOver?this.showGameOver():this.startNewAtBat()}showGameOver(){const{width:t,height:e}=this.cameras.main;this.add.rectangle(t/2,e/2,t,e,0,.8);let s="Game Over!",i="#ffffff";"player"===this.gameState.winner?(s="You Win!",i="#00ff00",this.audioSystem.play("cheer")):"cpu"===this.gameState.winner?(s="CPU Wins!",i="#ff0000"):(s="It's a Tie!",i="#ffaa00");this.add.text(t/2,e/2-100,s,{fontSize:"64px",color:i,fontStyle:"bold",stroke:"#000000",strokeThickness:6}).setOrigin(.5);this.add.text(t/2,e/2,`Final Score\nPlayer: ${this.gameState.player.score}\nCPU: ${this.gameState.cpu.score}`,{fontSize:"32px",color:"#ffffff",align:"center",lineSpacing:10}).setOrigin(.5);const n=this.add.rectangle(t/2,e/2+120,250,60,35071);n.setStrokeStyle(2,16777215),n.setInteractive({useHandCursor:!0});this.add.text(t/2,e/2+120,"PLAY AGAIN",{fontSize:"24px",color:"#ffffff",fontStyle:"bold"}).setOrigin(.5),n.on("pointerdown",()=>{this.scene.restart()})}showResult(t,e){this.resultText&&(this.resultText.setText(t),this.resultText.setColor(e),this.resultText.setFontSize("32px"),this.resultText.setStroke("#000000",4),this.time.delayedCall(1e3,()=>{this.resultText&&(this.resultText.setFontSize("24px"),this.resultText.setStroke("",0))}))}getHitText(t){switch(t){case"homerun":return"HOME RUN!";case"triple":return"Triple!";case"double":return"Double!";case"single":return"Single!";default:return"Hit!"}}update(){}}const d={type:t.AUTO,parent:"game-container",width:i.width,height:i.height,backgroundColor:i.backgroundColor,pixelArt:i.pixelArt,physics:i.physics,scale:{mode:t.Scale.FIT,autoCenter:t.Scale.CENTER_BOTH,width:i.width,height:i.height},scene:[e,s,c]},u=new t.Game(d);window.game=u,window.addEventListener("resize",()=>{u.scale.refresh()});const g=document.querySelector("canvas");g&&(g.addEventListener("touchstart",t=>t.preventDefault(),{passive:!1}),g.addEventListener("touchmove",t=>t.preventDefault(),{passive:!1}));

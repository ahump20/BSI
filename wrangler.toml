name = "bsi-api"
main = "src/workers/api.js"
compatibility_date = "2024-09-25"
account_id = "REPLACE_WITH_YOUR_ACCOUNT_ID"
workers_dev = false

routes = [
  { pattern = "api.blazesportsintel.com/*", zone_name = "blazesportsintel.com" }
]

[env.production]
vars = { ENVIRONMENT = "production" }

[[kv_namespaces]]
binding = "CACHE"
id = "REPLACE_WITH_KV_NAMESPACE_ID"
preview_id = "${PREVIEW_KV_ID}"

[[r2_buckets]]
binding = "STORAGE"
bucket_name = "blaze-intelligence"

[[d1_databases]]
binding = "DB"
database_name = "blaze-sports-db"
database_id = "${D1_DATABASE_ID}"

[observability]
enabled = true

[[analytics_engine_datasets]]
binding = "METRICS"
dataset = "bsi_metrics"

[limits]
cpu_ms = 50

[build]
command = "npm run build"

[placement]
mode = "smart"

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Interactive strike zone visualization tool. Analyze pitch locations, called strikes, and plate discipline metrics.">
  <title>Strike Zone Analyzer | Blaze Sports Intel</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@500;700&family=Inter:wght@400;500;600&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">

  <style>
    :root {
      --bsi-burnt-orange: #BF5700;
      --bsi-ember: #FF6B35;
      --bsi-charcoal: #1A1A1A;
      --bsi-midnight: #0D0D0D;
      --bsi-cream: #FAF8F5;
      --bsi-gold: #C9A227;
      --strike-color: #2E7D32;
      --ball-color: #C62828;
      --zone-border: #444;
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bsi-midnight);
      color: #E8E8E8;
      min-height: 100vh;
      line-height: 1.6;
    }

    .header {
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1400px;
      margin: 0 auto;
      border-bottom: 1px solid #222;
    }
    .logo {
      font-family: 'Oswald', sans-serif;
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--bsi-burnt-orange);
      text-decoration: none;
    }
    .back-link {
      color: #888;
      text-decoration: none;
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .back-link:hover { color: var(--bsi-burnt-orange); }

    .main {
      max-width: 1400px;
      margin: 0 auto;
      padding: 2rem;
    }

    h1 {
      font-family: 'Oswald', sans-serif;
      font-size: 2rem;
      font-weight: 700;
      color: #fff;
      text-transform: uppercase;
      margin-bottom: 0.5rem;
    }
    .subtitle {
      color: #888;
      margin-bottom: 2rem;
    }

    .tool-grid {
      display: grid;
      grid-template-columns: 1fr 400px;
      gap: 2rem;
    }

    .zone-container {
      background: var(--bsi-charcoal);
      border-radius: 12px;
      padding: 2rem;
      border: 1px solid #333;
    }

    .zone-canvas-wrapper {
      position: relative;
      width: 100%;
      max-width: 500px;
      margin: 0 auto;
      aspect-ratio: 1;
    }

    #strikeZoneCanvas {
      width: 100%;
      height: 100%;
      cursor: crosshair;
      border-radius: 8px;
    }

    .controls {
      background: var(--bsi-charcoal);
      border-radius: 12px;
      padding: 1.5rem;
      border: 1px solid #333;
      height: fit-content;
    }

    .control-section {
      margin-bottom: 1.5rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid #333;
    }
    .control-section:last-child {
      margin-bottom: 0;
      padding-bottom: 0;
      border-bottom: none;
    }

    .control-label {
      font-size: 0.75rem;
      color: #888;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 0.75rem;
      display: block;
    }

    .pitch-type-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 0.5rem;
    }

    .pitch-btn {
      padding: 0.75rem;
      background: transparent;
      border: 1px solid #444;
      border-radius: 6px;
      color: #ccc;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.2s;
      font-family: inherit;
    }
    .pitch-btn:hover {
      border-color: var(--bsi-burnt-orange);
      color: #fff;
    }
    .pitch-btn.active {
      background: var(--bsi-burnt-orange);
      border-color: var(--bsi-burnt-orange);
      color: #fff;
    }

    .result-btns {
      display: flex;
      gap: 0.5rem;
    }
    .result-btn {
      flex: 1;
      padding: 0.75rem;
      border: none;
      border-radius: 6px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      font-family: inherit;
      font-size: 0.9rem;
    }
    .result-btn.strike {
      background: var(--strike-color);
      color: #fff;
    }
    .result-btn.ball {
      background: var(--ball-color);
      color: #fff;
    }
    .result-btn.active {
      transform: scale(1.05);
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
    }
    .stat-box {
      background: var(--bsi-midnight);
      border-radius: 8px;
      padding: 1rem;
      text-align: center;
    }
    .stat-value {
      font-family: 'IBM Plex Mono', monospace;
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--bsi-burnt-orange);
    }
    .stat-label {
      font-size: 0.7rem;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-top: 0.25rem;
    }

    .action-btns {
      display: flex;
      gap: 0.5rem;
    }
    .action-btn {
      flex: 1;
      padding: 0.75rem;
      background: transparent;
      border: 1px solid #444;
      border-radius: 6px;
      color: #888;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.2s;
      font-family: inherit;
    }
    .action-btn:hover {
      border-color: var(--bsi-burnt-orange);
      color: #fff;
    }
    .action-btn.primary {
      background: var(--bsi-burnt-orange);
      border-color: var(--bsi-burnt-orange);
      color: #fff;
    }

    .pitch-log {
      max-height: 200px;
      overflow-y: auto;
      font-family: 'IBM Plex Mono', monospace;
      font-size: 0.8rem;
    }
    .pitch-log-item {
      padding: 0.5rem;
      border-bottom: 1px solid #333;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .pitch-log-item:last-child { border-bottom: none; }
    .pitch-log-item .type { color: #888; }
    .pitch-log-item .result.strike { color: var(--strike-color); }
    .pitch-log-item .result.ball { color: var(--ball-color); }
    .pitch-log-item .location { color: #666; font-size: 0.7rem; }
    .empty-log { color: #666; text-align: center; padding: 1rem; }

    .legend {
      display: flex;
      justify-content: center;
      gap: 2rem;
      margin-top: 1rem;
      font-size: 0.85rem;
    }
    .legend-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .legend-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
    }
    .legend-dot.strike { background: var(--strike-color); }
    .legend-dot.ball { background: var(--ball-color); }

    @media (max-width: 900px) {
      .tool-grid {
        grid-template-columns: 1fr;
      }
    }

    .footer {
      text-align: center;
      padding: 2rem;
      color: #444;
      font-size: 0.85rem;
      border-top: 1px solid #222;
      margin-top: 3rem;
    }
  </style>
  <!-- BSI Premium Enhancements - Micro-interactions & Visual Polish -->
  <link rel="stylesheet" href="../../css/bsi-enhancements.css">
</head>
<body>
  <header class="header">
    <a href="/" class="logo">BLAZE SPORTS INTEL</a>
    <a href="/tools" class="back-link">
      <span>&larr;</span> Back to Tools
    </a>
  </header>

  <main class="main">
    <h1>Strike Zone Analyzer</h1>
    <p class="subtitle">Click anywhere in the zone to plot pitches. Track pitch types, locations, and plate discipline.</p>

    <div class="tool-grid">
      <div class="zone-container">
        <div class="zone-canvas-wrapper">
          <canvas id="strikeZoneCanvas" width="500" height="500"></canvas>
        </div>
        <div class="legend">
          <div class="legend-item">
            <div class="legend-dot strike"></div>
            <span>Strike</span>
          </div>
          <div class="legend-item">
            <div class="legend-dot ball"></div>
            <span>Ball</span>
          </div>
        </div>
      </div>

      <div class="controls">
        <div class="control-section">
          <span class="control-label">Pitch Type</span>
          <div class="pitch-type-grid">
            <button class="pitch-btn active" data-pitch="4-Seam">4-Seam FB</button>
            <button class="pitch-btn" data-pitch="2-Seam">2-Seam FB</button>
            <button class="pitch-btn" data-pitch="Slider">Slider</button>
            <button class="pitch-btn" data-pitch="Curve">Curveball</button>
            <button class="pitch-btn" data-pitch="Change">Changeup</button>
            <button class="pitch-btn" data-pitch="Cutter">Cutter</button>
          </div>
        </div>

        <div class="control-section">
          <span class="control-label">Result</span>
          <div class="result-btns">
            <button class="result-btn strike active" data-result="strike">Strike</button>
            <button class="result-btn ball" data-result="ball">Ball</button>
          </div>
        </div>

        <div class="control-section">
          <span class="control-label">Session Stats</span>
          <div class="stats-grid">
            <div class="stat-box">
              <div class="stat-value" id="totalPitches">0</div>
              <div class="stat-label">Total Pitches</div>
            </div>
            <div class="stat-box">
              <div class="stat-value" id="strikePct">0%</div>
              <div class="stat-label">Strike %</div>
            </div>
            <div class="stat-box">
              <div class="stat-value" id="zoneRate">0%</div>
              <div class="stat-label">Zone Rate</div>
            </div>
            <div class="stat-box">
              <div class="stat-value" id="edgeRate">0%</div>
              <div class="stat-label">Edge %</div>
            </div>
          </div>
        </div>

        <div class="control-section">
          <span class="control-label">Pitch Log</span>
          <div class="pitch-log" id="pitchLog">
            <div class="empty-log">No pitches recorded</div>
          </div>
        </div>

        <div class="control-section">
          <span class="control-label">Actions</span>
          <div class="action-btns">
            <button class="action-btn" id="undoBtn">Undo</button>
            <button class="action-btn" id="clearBtn">Clear All</button>
            <button class="action-btn primary" id="exportBtn">Export</button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer class="footer">
    <div class="container">
      <div class="footer-grid">
        <div class="footer-brand">
          <a href="/" class="logo">
            <img src="/images/bsi-logo-nav.png" alt="Blaze Sports Intel" class="logo-img">
          </a>
          <p>Born in Memphis. Rooted in Texas soil. Built for fans who care.</p>
          <div class="footer-values">
            <span>Courage</span>
            <span>•</span>
            <span>Grit</span>
            <span>•</span>
            <span>Leadership</span>
          </div>
        </div>
        <div class="footer-links">
          <h4>Platform</h4>
          <ul>
            <li><a href="/analytics">Live Analytics</a></li>
            <li><a href="/scores">Live Scores</a></li>
            <li><a href="/college-baseball">College Baseball</a></li>
            <li><a href="/tools">Tools</a></li>
          </ul>
        </div>
        <div class="footer-links">
          <h4>Coverage</h4>
          <ul>
            <li><a href="/college-baseball">College Baseball</a></li>
            <li><a href="/mlb">MLB</a></li>
            <li><a href="/nfl">NFL</a></li>
            <li><a href="/nba">NBA</a></li>
          </ul>
        </div>
        <div class="footer-links">
          <h4>Company</h4>
          <ul>
            <li><a href="/about">About</a></li>
            <li><a href="/pricing">Pricing</a></li>
            <li><a href="/contact">Contact</a></li>
            <li><a href="mailto:austin@blazesportsintel.com">Email Us</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2026 Blaze Sports Intel. Built on Cloudflare.</p>
        <p class="footer-tagline">Born to Blaze the Path Less Beaten</p>
        <div class="footer-legal">
          <a href="/privacy">Privacy</a>
          <a href="/terms">Terms</a>
        </div>
      </div>
    </div>
  </footer>

  <script>
    const canvas = document.getElementById('strikeZoneCanvas');
    const ctx = canvas.getContext('2d');

    let pitches = [];
    let currentPitchType = '4-Seam';
    let currentResult = 'strike';

    // Zone dimensions (in canvas coordinates)
    const ZONE = {
      left: 125,
      right: 375,
      top: 100,
      bottom: 350,
      width: 250,
      height: 250
    };

    function drawStrikeZone() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Background
      ctx.fillStyle = '#0D0D0D';
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      // Home plate
      ctx.beginPath();
      ctx.moveTo(250, 420);
      ctx.lineTo(200, 400);
      ctx.lineTo(200, 380);
      ctx.lineTo(300, 380);
      ctx.lineTo(300, 400);
      ctx.closePath();
      ctx.fillStyle = '#fff';
      ctx.fill();

      // Strike zone outline
      ctx.strokeStyle = '#444';
      ctx.lineWidth = 2;
      ctx.strokeRect(ZONE.left, ZONE.top, ZONE.width, ZONE.height);

      // Grid lines (9 zones)
      ctx.strokeStyle = '#333';
      ctx.lineWidth = 1;

      // Vertical lines
      ctx.beginPath();
      ctx.moveTo(ZONE.left + ZONE.width/3, ZONE.top);
      ctx.lineTo(ZONE.left + ZONE.width/3, ZONE.bottom);
      ctx.moveTo(ZONE.left + 2*ZONE.width/3, ZONE.top);
      ctx.lineTo(ZONE.left + 2*ZONE.width/3, ZONE.bottom);
      ctx.stroke();

      // Horizontal lines
      ctx.beginPath();
      ctx.moveTo(ZONE.left, ZONE.top + ZONE.height/3);
      ctx.lineTo(ZONE.right, ZONE.top + ZONE.height/3);
      ctx.moveTo(ZONE.left, ZONE.top + 2*ZONE.height/3);
      ctx.lineTo(ZONE.right, ZONE.top + 2*ZONE.height/3);
      ctx.stroke();

      // Zone labels
      ctx.fillStyle = '#333';
      ctx.font = '12px "IBM Plex Mono", monospace';
      ctx.textAlign = 'center';
      const zoneLabels = ['1', '2', '3', '4', '5', '6', '7', '8', '9'];
      let labelIdx = 0;
      for (let row = 0; row < 3; row++) {
        for (let col = 0; col < 3; col++) {
          const x = ZONE.left + (col + 0.5) * ZONE.width/3;
          const y = ZONE.top + (row + 0.5) * ZONE.height/3 + 4;
          ctx.fillText(zoneLabels[labelIdx++], x, y);
        }
      }

      // Draw all pitches
      pitches.forEach((pitch, i) => {
        ctx.beginPath();
        ctx.arc(pitch.x, pitch.y, 10, 0, Math.PI * 2);
        ctx.fillStyle = pitch.result === 'strike' ? '#2E7D32' : '#C62828';
        ctx.fill();

        // Pitch number
        ctx.fillStyle = '#fff';
        ctx.font = 'bold 10px "IBM Plex Mono", monospace';
        ctx.textAlign = 'center';
        ctx.fillText(String(i + 1), pitch.x, pitch.y + 3);
      });
    }

    function isInZone(x, y) {
      return x >= ZONE.left && x <= ZONE.right && y >= ZONE.top && y <= ZONE.bottom;
    }

    function isOnEdge(x, y) {
      const edgeWidth = 20;
      const inOuter = x >= ZONE.left - edgeWidth && x <= ZONE.right + edgeWidth &&
                      y >= ZONE.top - edgeWidth && y <= ZONE.bottom + edgeWidth;
      return inOuter && !isInZone(x, y);
    }

    function getZoneNumber(x, y) {
      if (!isInZone(x, y)) return 'Outside';
      const col = Math.floor((x - ZONE.left) / (ZONE.width/3));
      const row = Math.floor((y - ZONE.top) / (ZONE.height/3));
      return String(row * 3 + col + 1);
    }

    function updateStats() {
      const total = pitches.length;
      const strikes = pitches.filter(p => p.result === 'strike').length;
      const inZone = pitches.filter(p => isInZone(p.x, p.y)).length;
      const onEdge = pitches.filter(p => isOnEdge(p.x, p.y)).length;

      document.getElementById('totalPitches').textContent = String(total);
      document.getElementById('strikePct').textContent = total ? Math.round(strikes/total*100) + '%' : '0%';
      document.getElementById('zoneRate').textContent = total ? Math.round(inZone/total*100) + '%' : '0%';
      document.getElementById('edgeRate').textContent = total ? Math.round(onEdge/total*100) + '%' : '0%';
    }

    function updatePitchLog() {
      const log = document.getElementById('pitchLog');
      // Clear existing content safely
      while (log.firstChild) {
        log.removeChild(log.firstChild);
      }

      if (pitches.length === 0) {
        const emptyDiv = document.createElement('div');
        emptyDiv.className = 'empty-log';
        emptyDiv.textContent = 'No pitches recorded';
        log.appendChild(emptyDiv);
        return;
      }

      // Build pitch log using DOM methods (safe from XSS)
      pitches.slice().reverse().forEach((p, i) => {
        const item = document.createElement('div');
        item.className = 'pitch-log-item';

        const typeSpan = document.createElement('span');
        typeSpan.className = 'type';
        typeSpan.textContent = '#' + (pitches.length - i) + ' ' + p.type;

        const resultSpan = document.createElement('span');
        resultSpan.className = 'result ' + p.result;
        resultSpan.textContent = p.result.toUpperCase();

        const locationSpan = document.createElement('span');
        locationSpan.className = 'location';
        locationSpan.textContent = 'Zone ' + getZoneNumber(p.x, p.y);

        item.appendChild(typeSpan);
        item.appendChild(resultSpan);
        item.appendChild(locationSpan);
        log.appendChild(item);
      });
    }

    canvas.addEventListener('click', function(e) {
      const rect = canvas.getBoundingClientRect();
      const scaleX = canvas.width / rect.width;
      const scaleY = canvas.height / rect.height;
      const x = (e.clientX - rect.left) * scaleX;
      const y = (e.clientY - rect.top) * scaleY;

      pitches.push({
        x: x,
        y: y,
        type: currentPitchType,
        result: currentResult,
        timestamp: Date.now()
      });

      drawStrikeZone();
      updateStats();
      updatePitchLog();
    });

    // Pitch type buttons
    document.querySelectorAll('.pitch-btn').forEach(function(btn) {
      btn.addEventListener('click', function() {
        document.querySelectorAll('.pitch-btn').forEach(function(b) { b.classList.remove('active'); });
        btn.classList.add('active');
        currentPitchType = btn.dataset.pitch;
      });
    });

    // Result buttons
    document.querySelectorAll('.result-btn').forEach(function(btn) {
      btn.addEventListener('click', function() {
        document.querySelectorAll('.result-btn').forEach(function(b) { b.classList.remove('active'); });
        btn.classList.add('active');
        currentResult = btn.dataset.result;
      });
    });

    // Action buttons
    document.getElementById('undoBtn').addEventListener('click', function() {
      pitches.pop();
      drawStrikeZone();
      updateStats();
      updatePitchLog();
    });

    document.getElementById('clearBtn').addEventListener('click', function() {
      if (pitches.length && confirm('Clear all pitches?')) {
        pitches = [];
        drawStrikeZone();
        updateStats();
        updatePitchLog();
      }
    });

    document.getElementById('exportBtn').addEventListener('click', function() {
      const data = {
        timestamp: new Date().toISOString(),
        totalPitches: pitches.length,
        strikes: pitches.filter(function(p) { return p.result === 'strike'; }).length,
        balls: pitches.filter(function(p) { return p.result === 'ball'; }).length,
        pitches: pitches.map(function(p) {
          return {
            type: p.type,
            result: p.result,
            zone: getZoneNumber(p.x, p.y),
            inZone: isInZone(p.x, p.y),
            onEdge: isOnEdge(p.x, p.y)
          };
        })
      };

      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'strike-zone-' + new Date().toISOString().slice(0,10) + '.json';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    });

    // Initial draw
    drawStrikeZone();
  </script>
</body>
</html>

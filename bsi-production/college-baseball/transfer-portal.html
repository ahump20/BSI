<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="College baseball transfer portal tracker. Live updates on player movements, commitments, and portal entries.">
  <title>Transfer Portal | College Baseball | Blaze Sports Intel</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;0,700;1,400&family=Oswald:wght@400;500;600;700&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    :root{--bsi-burnt-orange:#BF5700;--bsi-charcoal:#1A1A1A;--bsi-midnight:#0D0D0D;--bsi-cream:#FAF8F5;--bsi-ember:#FF6B35;--bsi-gold:#C9A227;--bsi-success:#2E7D32;--bsi-warning:#F9A825;--font-display:'Oswald',sans-serif;--font-body:'Cormorant Garamond',Georgia,serif;--font-ui:'Oswald',sans-serif;--font-mono:'IBM Plex Mono',monospace;--bg-primary:var(--bsi-midnight);--bg-secondary:var(--bsi-charcoal);--text-primary:var(--bsi-cream);--text-secondary:rgba(250,248,245,0.7);--text-muted:rgba(250,248,245,0.5);--border-color:rgba(255,255,255,0.1)}/* BSI Brand: Dark mode only */
    body{font-family:var(--font-body);color:var(--bsi-cream);background:var(--bsi-midnight);-webkit-font-smoothing:antialiased}
    a{color:inherit;text-decoration:none}
    .header{position:fixed;top:0;left:0;right:0;z-index:100;padding:1rem 2rem;background:rgba(13,13,13,0.95);backdrop-filter:blur(10px);border-bottom:1px solid rgba(191,87,0,0.2)}
    .header-inner{max-width:1400px;margin:0 auto;display:flex;align-items:center;justify-content:space-between}
    .logo{font-family:var(--font-display);font-size:1.5rem;font-weight:700;background:linear-gradient(135deg,var(--bsi-burnt-orange),var(--bsi-ember));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .nav{display:flex;gap:2rem}.nav a{font-family:var(--font-ui);font-size:0.875rem;font-weight:500;color:rgba(250,248,245,0.8)}.nav a:hover,.nav a.active{color:var(--bsi-burnt-orange)}
    .page-header{padding:8rem 2rem 3rem;background:linear-gradient(180deg,var(--bsi-midnight),var(--bsi-charcoal))}
    .page-header-inner{max-width:1200px;margin:0 auto}
    .page-header h1{font-family:var(--font-display);font-size:clamp(2rem,5vw,3rem);margin-bottom:0.5rem}
    .page-header h1 span{display:block;color:var(--bsi-burnt-orange)}
    .page-header p{color:rgba(250,248,245,0.7);font-size:1.125rem}
    .sub-nav{padding:1rem 2rem;background:var(--bsi-charcoal);border-bottom:1px solid rgba(255,255,255,0.1);position:sticky;top:60px;z-index:50}
    .sub-nav-inner{max-width:1200px;margin:0 auto;display:flex;gap:2rem;overflow-x:auto}
    .sub-nav a{font-family:var(--font-ui);font-size:0.875rem;font-weight:500;color:rgba(250,248,245,0.7);white-space:nowrap;padding:0.5rem 0;border-bottom:2px solid transparent}
    .sub-nav a:hover{color:var(--bsi-cream)}.sub-nav a.active{color:var(--bsi-burnt-orange);border-color:var(--bsi-burnt-orange)}
    .content{padding:2rem;background:var(--bsi-midnight);min-height:60vh}
    .content-inner{max-width:1200px;margin:0 auto}
    .stats-bar{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:1rem;margin-bottom:2rem}
    .stat-card{background:var(--bsi-charcoal);padding:1.25rem;border-radius:8px;text-align:center;border:1px solid rgba(255,255,255,0.05)}
    .stat-card.highlight{border-color:var(--bsi-burnt-orange)}
    .stat-value{font-family:var(--font-display);font-size:2rem;color:var(--bsi-burnt-orange)}
    .stat-label{font-family:var(--font-mono);font-size:0.7rem;color:rgba(250,248,245,0.5);text-transform:uppercase;margin-top:0.25rem}
    .filters{display:flex;gap:1rem;margin-bottom:2rem;flex-wrap:wrap}
    .filter-btn{padding:0.5rem 1rem;background:var(--bsi-charcoal);border:1px solid rgba(191,87,0,0.3);border-radius:6px;color:var(--bsi-cream);font-family:var(--font-ui);font-size:0.875rem;cursor:pointer;transition:all 0.2s}
    .filter-btn:hover,.filter-btn.active{background:var(--bsi-burnt-orange);border-color:var(--bsi-burnt-orange)}
    .filter-select{padding:0.5rem 1rem;background:var(--bsi-charcoal);border:1px solid rgba(191,87,0,0.3);border-radius:6px;color:var(--bsi-cream);font-family:var(--font-ui);font-size:0.875rem}
    .portal-table{width:100%;border-collapse:collapse;margin-top:1rem}
    .portal-table th,.portal-table td{padding:1rem;text-align:left;border-bottom:1px solid rgba(255,255,255,0.1)}
    .portal-table th{font-family:var(--font-ui);font-size:0.75rem;text-transform:uppercase;color:rgba(250,248,245,0.5);font-weight:600}
    .portal-table tr:hover{background:rgba(191,87,0,0.1)}
    .player-cell{display:flex;align-items:center;gap:0.75rem}
    .player-avatar{width:36px;height:36px;border-radius:50%;background:var(--bsi-charcoal);display:flex;align-items:center;justify-content:center;font-weight:600;font-size:0.75rem;color:var(--bsi-burnt-orange);border:1px solid rgba(191,87,0,0.3)}
    .player-avatar img{width:100%;height:100%;border-radius:50%;object-fit:cover}
    .player-name{font-weight:600}
    .player-meta{font-size:0.75rem;color:rgba(250,248,245,0.5)}
    .status-badge{display:inline-block;padding:0.25rem 0.5rem;border-radius:4px;font-family:var(--font-mono);font-size:0.7rem;text-transform:uppercase}
    .status-available{background:rgba(46,125,50,0.2);color:var(--bsi-success)}
    .status-committed{background:rgba(191,87,0,0.2);color:var(--bsi-burnt-orange)}
    .transfer-flow{display:flex;align-items:center;gap:0.5rem;font-size:0.875rem}
    .transfer-flow .arrow{color:var(--bsi-burnt-orange)}
    .transfer-flow .school{font-weight:500}
    .transfer-flow .tbd{color:rgba(250,248,245,0.4);font-style:italic}
    .impact-score{font-family:var(--font-mono);padding:0.25rem 0.5rem;border-radius:4px;font-size:0.8rem}
    .impact-high{background:rgba(191,87,0,0.3);color:var(--bsi-ember)}
    .impact-mid{background:rgba(201,162,39,0.2);color:var(--bsi-gold)}
    .impact-low{background:rgba(255,255,255,0.1);color:rgba(250,248,245,0.6)}
    .loading{text-align:center;padding:3rem;color:var(--bsi-burnt-orange)}
    .loading::after{content:'';display:inline-block;width:20px;height:20px;border:2px solid var(--bsi-burnt-orange);border-radius:50%;border-top-color:transparent;animation:spin 1s linear infinite;margin-left:0.5rem;vertical-align:middle}
    @keyframes spin{to{transform:rotate(360deg)}}
    .no-results{text-align:center;padding:3rem;color:rgba(250,248,245,0.5)}
    .footer{padding:3rem 2rem;background:var(--bsi-charcoal);text-align:center;border-top:1px solid rgba(191,87,0,0.2)}
    .footer p{color:rgba(250,248,245,0.5);font-size:0.875rem}
    .footer .tagline{font-family:var(--font-display);font-style:italic;color:var(--bsi-burnt-orange);margin-top:0.5rem}
    /* Mobile Menu */
    .mobile-menu-btn { display: none; flex-direction: column; gap: 5px; padding: 8px; background: transparent; border: none; cursor: pointer; }
    .mobile-menu-btn span { display: block; width: 24px; height: 2px; background: var(--bsi-cream, #FAF8F5); transition: all 0.3s; }
    .mobile-menu-btn.active span:nth-child(1) { transform: rotate(45deg) translate(5px, 5px); }
    .mobile-menu-btn.active span:nth-child(2) { opacity: 0; }
    .mobile-menu-btn.active span:nth-child(3) { transform: rotate(-45deg) translate(5px, -5px); }.theme-toggle{background:transparent;border:1px solid var(--border-color);border-radius:6px;padding:0.5rem;cursor:pointer;color:var(--text-primary);display:flex;align-items:center;justify-content:center}.theme-toggle:hover{border-color:var(--bsi-burnt-orange)}.theme-toggle svg{width:18px;height:18px}
    @media (max-width: 768px) {
      .mobile-menu-btn { display: flex; }font-size:0.75rem;padding:0.4rem 0.75rem}}
  </style>
</head>
<body>
  <header class="header"><div class="header-inner"><a href="/" class="logo">Blaze Sports Intel</a><button class="mobile-menu-btn" aria-label="Menu"><span></span><span></span><span></span></button><nav class="nav"><a href="/college-baseball" class="active">College Baseball</a><a href="/mlb">MLB</a><a href="/nfl">NFL</a><a href="/tools">Tools</a><a href="/login">Sign In</a><button class="theme-toggle" aria-label="Toggle theme"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg></button></nav></div></header>
  <main>
    <section class="page-header"><div class="page-header-inner"><h1>Transfer Portal<span>Track Every Move</span></h1><p>Live tracking of D1 college baseball player movements and commitments.</p></div></section>
    <nav class="sub-nav"><div class="sub-nav-inner"><a href="/college-baseball">Overview</a><a href="/college-baseball/scores">Scores</a><a href="/college-baseball/standings">Standings</a><a href="/college-baseball/rankings">Rankings</a><a href="/college-baseball/teams">Teams</a><a href="/college-baseball/players">Players</a><a href="/college-baseball/transfer-portal" class="active">Portal</a><a href="/college-baseball/news">News</a></div></nav>
    <section class="content"><div class="content-inner">
      <div class="stats-bar" id="statsBar">
        <div class="stat-card highlight"><div class="stat-value" id="totalCount">--</div><div class="stat-label">Total Entries</div></div>
        <div class="stat-card"><div class="stat-value" id="availableCount">--</div><div class="stat-label">Available</div></div>
        <div class="stat-card"><div class="stat-value" id="committedCount">--</div><div class="stat-label">Committed</div></div>
        <div class="stat-card"><div class="stat-value" id="lastUpdated">--</div><div class="stat-label">Last Updated</div></div>
      </div>
      <div class="filters">
        <button class="filter-btn active" data-status="">All Players</button>
        <button class="filter-btn" data-status="in_portal">Available</button>
        <button class="filter-btn" data-status="committed">Committed</button>
        <select class="filter-select" id="positionFilter">
          <option value="">All Positions</option>
          <option value="RHP">RHP</option>
          <option value="LHP">LHP</option>
          <option value="C">Catcher</option>
          <option value="IF">Infielder</option>
          <option value="OF">Outfielder</option>
          <option value="UTL">Utility</option>
        </select>
      </div>
      <div id="portalContainer"><div class="loading">Loading portal data</div></div>
    </div></section>
  </main>
  <footer class="footer"><p>&copy; 2025 Blaze Sports Intel. Boerne, Texas.</p><p class="tagline">Born to Blaze the Path Less Beaten.</p></footer>
  <script>
    (function() {
      const container = document.getElementById('portalContainer');
      const filterBtns = document.querySelectorAll('.filter-btn');
      const positionFilter = document.getElementById('positionFilter');
      
      let allPlayers = [];
      let currentStatus = '';
      let currentPosition = '';
      
      async function fetchPortalData() {
        try {
          const response = await fetch('/api/college-baseball/portal');
          const data = await response.json();
          
          if (data.success) {
            allPlayers = data.players;
            
            // Update stats
            document.getElementById('totalCount').textContent = data.summary.total;
            document.getElementById('availableCount').textContent = data.summary.available || 0;
            document.getElementById('committedCount').textContent = data.summary.committed || 0;
            document.getElementById('lastUpdated').textContent = new Date(data.timestamp).toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
            
            renderPlayers();
          } else {
            container.innerHTML = '<div class="no-results">Failed to load portal data.</div>';
          }
        } catch (error) {
          console.error('Error fetching portal:', error);
          container.innerHTML = '<div class="no-results">Failed to load portal data.</div>';
        }
      }
      
      function renderPlayers() {
        let filtered = allPlayers.filter(player => {
          const matchesStatus = !currentStatus || player.status === currentStatus || player.status === currentStatus.replace('_', '-');
          const matchesPosition = !currentPosition || player.position.includes(currentPosition);
          return matchesStatus && matchesPosition;
        });
        
        if (filtered.length === 0) {
          container.innerHTML = '<div class="no-results">No players found matching your filters.</div>';
          return;
        }
        
        let html = '<table class="portal-table"><thead><tr><th>Player</th><th>Transfer</th><th>Status</th><th>Impact</th></tr></thead><tbody>';
        
        filtered.forEach(player => {
          const initials = player.player_name.split(' ').map(n => n[0]).join('');
          const avatarContent = player.headshot_url 
            ? `<img src="${player.headshot_url}" alt="${player.player_name}">`
            : initials;
          
          const statusClass = (player.status === 'committed') ? 'status-committed' : 'status-available';
          const statusText = (player.status === 'committed') ? 'Committed' : 'Available';
          
          const impactClass = player.impact_score > 7 ? 'impact-high' : player.impact_score > 4 ? 'impact-mid' : 'impact-low';
          const impactText = player.impact_score ? player.impact_score.toFixed(1) : '--';
          
          const toSchool = player.to_school ? `<span class="school">${player.to_school}</span>` : '<span class="tbd">TBD</span>';
          
          html += `<tr>
            <td>
              <div class="player-cell">
                <div class="player-avatar">${avatarContent}</div>
                <div>
                  <div class="player-name">${player.player_name}</div>
                  <div class="player-meta">${player.position} · ${player.year}</div>
                </div>
              </div>
            </td>
            <td>
              <div class="transfer-flow">
                <span class="school">${player.from_school}</span>
                <span class="arrow">→</span>
                ${toSchool}
              </div>
            </td>
            <td><span class="status-badge ${statusClass}">${statusText}</span></td>
            <td><span class="impact-score ${impactClass}">${impactText}</span></td>
          </tr>`;
        });
        
        html += '</tbody></table>';
        container.innerHTML = html;
      }
      
      // Event listeners
      filterBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          filterBtns.forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          currentStatus = btn.dataset.status;
          renderPlayers();
        });
      });
      
      positionFilter.addEventListener('change', () => {
        currentPosition = positionFilter.value;
        renderPlayers();
      });
      
      // Initial load
      fetchPortalData();
    })();
  </script>
<script>
  (function() {
    var menuBtn = document.querySelector('.mobile-menu-btn');
    var nav = document.querySelector('.nav');
    if (menuBtn && nav) {
      menuBtn.addEventListener('click', function() {
        menuBtn.classList.toggle('active');
        nav.classList.toggle('open');
      });
    }

    var themeToggle = document.querySelector('.theme-toggle');
    if (themeToggle) {
      var savedTheme = localStorage.getItem('bsi-theme') || 'dark';
      document.documentElement.setAttribute('data-theme', savedTheme);
      themeToggle.addEventListener('click', function() {
        var current = document.documentElement.getAttribute('data-theme');
        var next = current === 'dark' ? 'light' : 'dark';
        document.documentElement.setAttribute('data-theme', next);
        localStorage.setItem('bsi-theme', next);
      });
    }
  })();
</script>
<script>if("serviceWorker" in navigator){navigator.serviceWorker.register("/sw.js").catch(console.error);}</script>
</body>
</html>

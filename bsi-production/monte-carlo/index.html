<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Monte Carlo Projections - Run thousands of simulations using real team data to project game outcomes, playoff odds, and championship probabilities.">
  <meta name="keywords" content="Monte Carlo simulation, sports predictions, playoff odds, championship probability, game projections, sports analytics">
  <meta name="author" content="Blaze Sports Intel">
  <meta property="og:title" content="Monte Carlo Projections | Blaze Sports Intel">
  <meta property="og:description" content="Run thousands of simulations using real team data to project game outcomes, playoff odds, and championship probabilities.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://blazesportsintel.com/monte-carlo">
  <meta property="og:image" content="https://blazesportsintel.com/images/og-monte-carlo.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Monte Carlo Projections">
  <meta name="twitter:description" content="Sports simulation engine with playoff and championship probability calculations">
  <link rel="canonical" href="https://blazesportsintel.com/monte-carlo">
  <title>Monte Carlo Projections | Blaze Sports Intel</title>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Monte Carlo Projections",
    "url": "https://blazesportsintel.com/monte-carlo",
    "description": "Sports simulation engine that uses real team statistics and Pythagorean expectancy to run Monte Carlo simulations for game outcomes, playoff probabilities, and championship odds.",
    "applicationCategory": "SportsApplication",
    "operatingSystem": "All",
    "browserRequirements": "Requires JavaScript",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "creator": {
      "@type": "Organization",
      "name": "Blaze Sports Intel",
      "url": "https://blazesportsintel.com"
    },
    "featureList": [
      "10,000+ simulation runs per projection",
      "Real MLB, NFL, NBA, and NCAA Baseball team data",
      "Pythagorean win expectancy calculations",
      "Playoff probability calculations",
      "Championship odds projections",
      "Visual distribution charts"
    ]
  }
  </script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500&family=IBM+Plex+Sans:wght@400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400&family=Source+Serif+4:ital,wght@0,400;0,500;0,600;1,400&display=swap" rel="stylesheet">

  <style>
    :root {
      --bsi-burnt-orange: #BF5700;
      --bsi-texas-soil: #8B4513;
      --bsi-charcoal: #1A1A1A;
      --bsi-midnight: #0D0D0D;
      --bsi-cream: #FAF8F5;
      --bsi-warm-white: #FAFAFA;
      --bsi-ember: #FF6B35;
      --bsi-gold: #C9A227;
      --bsi-success: #2E7D32;
      --bsi-error: #C62828;
      --font-display: 'Playfair Display', Georgia, serif;
      --font-body: 'Source Serif 4', Georgia, serif;
      --font-ui: 'IBM Plex Sans', 'Helvetica Neue', sans-serif;
      --font-mono: 'IBM Plex Mono', monospace;
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body {
      font-family: var(--font-body);
      font-size: 1rem;
      line-height: 1.6;
      color: var(--bsi-warm-white);
      background: var(--bsi-midnight);
      -webkit-font-smoothing: antialiased;
      min-height: 100vh;
    }
    a { color: inherit; text-decoration: none; }

    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
      padding: 1rem 2rem;
      background: rgba(13, 13, 13, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(191, 87, 0, 0.2);
    }
    .header-inner {
      max-width: 1400px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .logo {
      font-family: var(--font-display);
      font-size: 1.5rem;
      font-weight: 700;
      background: linear-gradient(135deg, var(--bsi-burnt-orange), var(--bsi-ember));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .nav { display: flex; gap: 2rem; align-items: center; }
    .nav a {
      font-family: var(--font-ui);
      font-size: 0.875rem;
      font-weight: 500;
      color: rgba(250, 248, 245, 0.8);
      transition: color 0.2s;
    }
    .nav a:hover { color: var(--bsi-burnt-orange); }

    .page-header {
      padding: 7rem 2rem 3rem;
      background: linear-gradient(180deg, var(--bsi-midnight) 0%, var(--bsi-charcoal) 100%);
      text-align: center;
    }
    .page-header h1 {
      font-family: var(--font-display);
      font-size: clamp(1.75rem, 4vw, 2.5rem);
      margin-bottom: 0.5rem;
    }
    .page-header p {
      color: rgba(250, 248, 245, 0.7);
      font-size: 1rem;
      max-width: 600px;
      margin: 0 auto;
    }
    .data-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      margin-top: 1rem;
      padding: 6px 12px;
      background: rgba(46, 125, 50, 0.2);
      border: 1px solid var(--bsi-success);
      border-radius: 20px;
      font-family: var(--font-ui);
      font-size: 0.75rem;
      color: var(--bsi-success);
    }
    .data-badge::before {
      content: '';
      width: 8px;
      height: 8px;
      background: var(--bsi-success);
      border-radius: 50%;
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .main-content {
      padding: 2rem;
      max-width: 1200px;
      margin: 0 auto;
    }

    .sim-grid {
      display: grid;
      grid-template-columns: 380px 1fr;
      gap: 2rem;
    }

    @media (max-width: 900px) {
      .sim-grid {
        grid-template-columns: 1fr;
      }
    }

    .input-panel {
      background: var(--bsi-charcoal);
      border: 1px solid rgba(191, 87, 0, 0.2);
      border-radius: 16px;
      padding: 1.5rem;
    }

    .section-title {
      font-family: var(--font-display);
      font-size: 1.125rem;
      margin-bottom: 1rem;
      color: var(--bsi-burnt-orange);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .section-title::before {
      content: '';
      width: 4px;
      height: 1rem;
      background: var(--bsi-burnt-orange);
      border-radius: 2px;
    }

    .form-group {
      margin-bottom: 1rem;
    }
    .form-group label {
      display: block;
      font-family: var(--font-ui);
      font-size: 0.8125rem;
      font-weight: 500;
      margin-bottom: 0.375rem;
      color: rgba(250, 248, 245, 0.9);
    }
    .form-group input,
    .form-group select {
      width: 100%;
      padding: 0.625rem 0.875rem;
      background: var(--bsi-midnight);
      border: 1px solid rgba(191, 87, 0, 0.3);
      border-radius: 8px;
      color: var(--bsi-warm-white);
      font-family: var(--font-ui);
      font-size: 0.9375rem;
      transition: border-color 0.2s;
    }
    .form-group input:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--bsi-burnt-orange);
    }
    .form-group small {
      display: block;
      margin-top: 0.25rem;
      color: rgba(250, 248, 245, 0.5);
      font-size: 0.6875rem;
    }

    .team-selector {
      background: var(--bsi-midnight);
      border: 1px solid rgba(191, 87, 0, 0.3);
      border-radius: 12px;
      padding: 1rem;
      margin-bottom: 1rem;
    }
    .team-selector-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.75rem;
    }
    .team-selector-title {
      font-family: var(--font-ui);
      font-size: 0.875rem;
      font-weight: 600;
      color: var(--bsi-gold);
    }
    .team-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 0.5rem;
      margin-top: 0.75rem;
      padding-top: 0.75rem;
      border-top: 1px solid rgba(250, 248, 245, 0.1);
    }
    .team-stat {
      text-align: center;
    }
    .team-stat-value {
      font-family: var(--font-mono);
      font-size: 0.875rem;
      color: var(--bsi-ember);
      font-weight: 500;
    }
    .team-stat-label {
      font-size: 0.625rem;
      color: rgba(250, 248, 245, 0.5);
      text-transform: uppercase;
    }

    .vs-badge {
      text-align: center;
      font-family: var(--font-display);
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--bsi-gold);
      margin: 0.5rem 0;
    }

    .run-btn {
      width: 100%;
      padding: 0.875rem;
      background: linear-gradient(135deg, var(--bsi-burnt-orange), var(--bsi-ember));
      border: none;
      border-radius: 8px;
      color: white;
      font-family: var(--font-ui);
      font-size: 0.9375rem;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
      margin-top: 0.5rem;
    }
    .run-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(191, 87, 0, 0.3);
    }
    .run-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    .results-panel {
      background: var(--bsi-charcoal);
      border: 1px solid rgba(191, 87, 0, 0.2);
      border-radius: 16px;
      padding: 1.5rem;
    }

    .sim-status {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 1rem;
      padding: 0.75rem 1rem;
      background: rgba(191, 87, 0, 0.1);
      border-radius: 8px;
    }
    .sim-status-label {
      font-family: var(--font-ui);
      font-size: 0.875rem;
      color: rgba(250, 248, 245, 0.8);
    }
    .sim-status-value {
      font-family: var(--font-mono);
      font-size: 0.875rem;
      color: var(--bsi-gold);
    }

    .progress-container {
      margin-bottom: 1.5rem;
    }
    .progress-bar {
      height: 8px;
      background: rgba(250, 248, 245, 0.1);
      border-radius: 4px;
      overflow: hidden;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--bsi-burnt-orange), var(--bsi-gold));
      width: 0%;
      transition: width 0.1s;
    }
    .progress-text {
      font-family: var(--font-mono);
      font-size: 0.75rem;
      color: rgba(250, 248, 245, 0.6);
      margin-top: 0.5rem;
      text-align: center;
    }

    .results-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .result-card {
      background: var(--bsi-midnight);
      border: 1px solid rgba(191, 87, 0, 0.2);
      border-radius: 12px;
      padding: 1.25rem;
      text-align: center;
    }
    .result-card.winner {
      border-color: var(--bsi-gold);
      background: linear-gradient(135deg, rgba(201, 162, 39, 0.1), rgba(191, 87, 0, 0.1));
    }
    .result-team {
      font-family: var(--font-ui);
      font-size: 0.875rem;
      font-weight: 600;
      color: rgba(250, 248, 245, 0.9);
      margin-bottom: 0.5rem;
    }
    .result-pct {
      font-family: var(--font-display);
      font-size: 2.5rem;
      font-weight: 700;
      background: linear-gradient(135deg, var(--bsi-gold), var(--bsi-ember));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .result-label {
      font-family: var(--font-ui);
      font-size: 0.75rem;
      color: rgba(250, 248, 245, 0.6);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .distribution-section {
      margin-bottom: 1.5rem;
    }
    .distribution-title {
      font-family: var(--font-ui);
      font-size: 0.875rem;
      font-weight: 600;
      color: rgba(250, 248, 245, 0.9);
      margin-bottom: 1rem;
    }

    .histogram {
      display: flex;
      align-items: flex-end;
      height: 120px;
      gap: 2px;
      padding: 0 0.5rem;
    }
    .hist-bar {
      flex: 1;
      background: linear-gradient(180deg, var(--bsi-ember), var(--bsi-burnt-orange));
      border-radius: 2px 2px 0 0;
      min-height: 2px;
      transition: height 0.3s;
    }
    .hist-labels {
      display: flex;
      justify-content: space-between;
      padding: 0.5rem 0.5rem 0;
    }
    .hist-label {
      font-family: var(--font-mono);
      font-size: 0.625rem;
      color: rgba(250, 248, 245, 0.5);
    }

    .stats-table {
      width: 100%;
      border-collapse: collapse;
    }
    .stats-table th,
    .stats-table td {
      padding: 0.625rem;
      text-align: left;
      font-family: var(--font-ui);
      font-size: 0.8125rem;
      border-bottom: 1px solid rgba(250, 248, 245, 0.1);
    }
    .stats-table th {
      color: rgba(250, 248, 245, 0.6);
      font-weight: 500;
    }
    .stats-table td {
      color: rgba(250, 248, 245, 0.9);
    }
    .stats-table td.mono {
      font-family: var(--font-mono);
      color: var(--bsi-gold);
    }

    .scenario-cards {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 0.75rem;
      margin-top: 1rem;
    }
    .scenario-card {
      background: rgba(191, 87, 0, 0.1);
      border-radius: 8px;
      padding: 1rem;
      text-align: center;
    }
    .scenario-label {
      font-family: var(--font-ui);
      font-size: 0.6875rem;
      color: rgba(250, 248, 245, 0.6);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 0.25rem;
    }
    .scenario-value {
      font-family: var(--font-mono);
      font-size: 1.25rem;
      color: var(--bsi-ember);
    }

    .methodology {
      margin-top: 1.5rem;
      padding: 1rem;
      background: rgba(191, 87, 0, 0.1);
      border-radius: 8px;
      font-size: 0.75rem;
      color: rgba(250, 248, 245, 0.6);
      line-height: 1.5;
    }
    .methodology strong {
      color: rgba(250, 248, 245, 0.8);
    }

    .loading-teams {
      text-align: center;
      padding: 2rem;
      color: rgba(250, 248, 245, 0.6);
    }
    .loading-spinner {
      width: 32px;
      height: 32px;
      border: 3px solid rgba(191, 87, 0, 0.3);
      border-top-color: var(--bsi-burnt-orange);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 0.5rem;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    .footer {
      padding: 2rem;
      text-align: center;
      border-top: 1px solid rgba(191, 87, 0, 0.2);
      margin-top: 3rem;
    }
    .footer p {
      color: rgba(250, 248, 245, 0.5);
      font-size: 0.875rem;
    }
    .footer .tagline {
      font-family: var(--font-display);
      font-style: italic;
      color: var(--bsi-burnt-orange);
      margin-top: 0.5rem;
    }

    @media (max-width: 768px) {
      .nav { display: none; }
      .page-header { padding: 6rem 1rem 2rem; }
      .main-content { padding: 1rem; }
      .input-panel, .results-panel { padding: 1rem; }
      .results-grid { grid-template-columns: 1fr; }
      .scenario-cards { grid-template-columns: 1fr; }
      .team-stats { grid-template-columns: repeat(2, 1fr); }
    }
  </style>
  <!-- BSI Premium Enhancements - Micro-interactions & Visual Polish -->
  <link rel="stylesheet" href="../css/bsi-enhancements.css">
</head>
<body>
  <header class="header">
    <div class="header-inner">
      <a href="/" class="logo">Blaze Sports Intel</a>
      <nav class="nav">
        <a href="/college-baseball">College Baseball</a>
        <a href="/mlb">MLB</a>
        <a href="/nfl">NFL</a>
        <a href="/tools">Tools</a>
        <a href="/login">Sign In</a>
      </nav>
    </div>
  </header>

  <main>
    <section class="page-header">
      <h1>Monte Carlo Projections</h1>
      <p>Run thousands of simulations using real team statistics and Pythagorean expectancy to project outcomes.</p>
      <div class="data-badge" id="dataBadge">Loading live data...</div>
    </section>

    <section class="main-content">
      <div class="sim-grid">
        <div class="input-panel">
          <h2 class="section-title">Simulation Setup</h2>

          <div class="form-group">
            <label for="league">League</label>
            <select id="league" onchange="loadTeams()">
              <option value="mlb">MLB</option>
              <option value="nfl">NFL</option>
              <option value="nba">NBA</option>
              <option value="ncaa">NCAA Baseball</option>
            </select>
          </div>

          <div class="form-group">
            <label for="simType">Simulation Type</label>
            <select id="simType" onchange="updateSimType()">
              <option value="game">Single Game</option>
              <option value="series">Playoff Series</option>
            </select>
          </div>

          <!-- Team A Selector -->
          <div class="team-selector" id="team1Selector">
            <div class="team-selector-header">
              <span class="team-selector-title">Team A</span>
            </div>
            <select id="team1Select" onchange="updateTeamStats(1)">
              <option value="">Select a team...</option>
            </select>
            <div class="team-stats" id="team1Stats">
              <div class="team-stat">
                <div class="team-stat-value" id="team1Record">--</div>
                <div class="team-stat-label">Record</div>
              </div>
              <div class="team-stat">
                <div class="team-stat-value" id="team1WinPct">--</div>
                <div class="team-stat-label">Win %</div>
              </div>
              <div class="team-stat">
                <div class="team-stat-value" id="team1Pythag">--</div>
                <div class="team-stat-label">Pythag</div>
              </div>
            </div>
          </div>

          <div class="vs-badge">VS</div>

          <!-- Team B Selector -->
          <div class="team-selector" id="team2Selector">
            <div class="team-selector-header">
              <span class="team-selector-title">Team B</span>
            </div>
            <select id="team2Select" onchange="updateTeamStats(2)">
              <option value="">Select a team...</option>
            </select>
            <div class="team-stats" id="team2Stats">
              <div class="team-stat">
                <div class="team-stat-value" id="team2Record">--</div>
                <div class="team-stat-label">Record</div>
              </div>
              <div class="team-stat">
                <div class="team-stat-value" id="team2WinPct">--</div>
                <div class="team-stat-label">Win %</div>
              </div>
              <div class="team-stat">
                <div class="team-stat-value" id="team2Pythag">--</div>
                <div class="team-stat-label">Pythag</div>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="homeField">Home Field</label>
            <select id="homeField">
              <option value="team1">Team A Home</option>
              <option value="team2">Team B Home</option>
              <option value="neutral">Neutral Site</option>
            </select>
          </div>

          <div class="form-group" id="seriesLengthGroup" style="display: none;">
            <label for="seriesLength">Series Length</label>
            <select id="seriesLength">
              <option value="3">Best of 3</option>
              <option value="5">Best of 5</option>
              <option value="7" selected>Best of 7</option>
            </select>
          </div>

          <div class="form-group">
            <label for="simCount">Simulations</label>
            <select id="simCount">
              <option value="1000">1,000 (Fast)</option>
              <option value="10000" selected>10,000 (Standard)</option>
              <option value="50000">50,000 (Precise)</option>
              <option value="100000">100,000 (High Precision)</option>
            </select>
          </div>

          <button class="run-btn" id="runBtn" onclick="runSimulation()" disabled>Select Two Teams</button>
        </div>

        <div class="results-panel">
          <h2 class="section-title">Results</h2>

          <div class="sim-status">
            <span class="sim-status-label">Simulations Run</span>
            <span class="sim-status-value" id="simRunCount">0</span>
          </div>

          <div class="progress-container">
            <div class="progress-bar">
              <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">Select teams to simulate</div>
          </div>

          <div class="results-grid">
            <div class="result-card" id="team1Card">
              <div class="result-team" id="team1Name">Team A</div>
              <div class="result-pct" id="team1Pct">--</div>
              <div class="result-label">Win Probability</div>
            </div>
            <div class="result-card" id="team2Card">
              <div class="result-team" id="team2Name">Team B</div>
              <div class="result-pct" id="team2Pct">--</div>
              <div class="result-label">Win Probability</div>
            </div>
          </div>

          <div class="distribution-section">
            <div class="distribution-title">Score Distribution (Team A Margin)</div>
            <div class="histogram" id="histogram"></div>
            <div class="hist-labels">
              <span class="hist-label">-10</span>
              <span class="hist-label">-5</span>
              <span class="hist-label">0</span>
              <span class="hist-label">+5</span>
              <span class="hist-label">+10</span>
            </div>
          </div>

          <div class="distribution-title">Key Statistics</div>
          <table class="stats-table">
            <tr>
              <th>Metric</th>
              <th>Team A</th>
              <th>Team B</th>
            </tr>
            <tr>
              <td>Avg Score</td>
              <td class="mono" id="team1AvgScore">--</td>
              <td class="mono" id="team2AvgScore">--</td>
            </tr>
            <tr>
              <td>Median Margin</td>
              <td class="mono" id="team1Median">--</td>
              <td class="mono" id="team2Median">--</td>
            </tr>
            <tr>
              <td>Blowout Rate</td>
              <td class="mono" id="team1Blowout">--</td>
              <td class="mono" id="team2Blowout">--</td>
            </tr>
          </table>

          <div class="scenario-cards">
            <div class="scenario-card">
              <div class="scenario-label">Close Game</div>
              <div class="scenario-value" id="closeGamePct">--</div>
            </div>
            <div class="scenario-card">
              <div class="scenario-label">OT/Extra Innings</div>
              <div class="scenario-value" id="overtimePct">--</div>
            </div>
            <div class="scenario-card">
              <div class="scenario-label">High Scoring</div>
              <div class="scenario-value" id="highScoringPct">--</div>
            </div>
          </div>

          <div class="methodology">
            <strong>Methodology:</strong> This simulation uses real team statistics with Pythagorean expectancy (True Strength = 60% Win% + 40% Pythagorean). Matchup probabilities are calculated using the log5 formula. Home field advantage is weighted at +3.5% (MLB), +5% (NFL/NCAA), or +6% (NBA).
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container">
      <div class="footer-grid">
        <div class="footer-brand">
          <a href="/" class="logo">
            <img src="/images/bsi-logo-nav.png" alt="Blaze Sports Intel" class="logo-img">
          </a>
          <p>Born in Memphis. Rooted in Texas soil. Built for fans who care.</p>
          <div class="footer-values">
            <span>Courage</span>
            <span>•</span>
            <span>Grit</span>
            <span>•</span>
            <span>Leadership</span>
          </div>
        </div>
        <div class="footer-links">
          <h4>Platform</h4>
          <ul>
            <li><a href="/analytics">Live Analytics</a></li>
            <li><a href="/scores">Live Scores</a></li>
            <li><a href="/college-baseball">College Baseball</a></li>
            <li><a href="/tools">Tools</a></li>
          </ul>
        </div>
        <div class="footer-links">
          <h4>Coverage</h4>
          <ul>
            <li><a href="/college-baseball">College Baseball</a></li>
            <li><a href="/mlb">MLB</a></li>
            <li><a href="/nfl">NFL</a></li>
            <li><a href="/nba">NBA</a></li>
          </ul>
        </div>
        <div class="footer-links">
          <h4>Company</h4>
          <ul>
            <li><a href="/about">About</a></li>
            <li><a href="/pricing">Pricing</a></li>
            <li><a href="/contact">Contact</a></li>
            <li><a href="mailto:austin@blazesportsintel.com">Email Us</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2026 Blaze Sports Intel. Built on Cloudflare.</p>
        <p class="footer-tagline">Born to Blaze the Path Less Beaten</p>
        <div class="footer-legal">
          <a href="/privacy">Privacy</a>
          <a href="/terms">Terms</a>
        </div>
      </div>
    </div>
  </footer>

  <script>
    var teamsData = {};
    var isRunning = false;

    async function loadTeams() {
      var league = document.getElementById('league').value;
      var team1Select = document.getElementById('team1Select');
      var team2Select = document.getElementById('team2Select');
      var dataBadge = document.getElementById('dataBadge');
      var runBtn = document.getElementById('runBtn');

      // Clear existing options
      team1Select.textContent = '';
      team2Select.textContent = '';

      var placeholder1 = document.createElement('option');
      placeholder1.value = '';
      placeholder1.textContent = 'Loading teams...';
      team1Select.appendChild(placeholder1);

      var placeholder2 = document.createElement('option');
      placeholder2.value = '';
      placeholder2.textContent = 'Loading teams...';
      team2Select.appendChild(placeholder2);

      runBtn.disabled = true;
      runBtn.textContent = 'Loading...';
      dataBadge.textContent = 'Fetching ' + league.toUpperCase() + ' data...';

      try {
        var response = await fetch('/api/monte-carlo/teams?league=' + league);
        var data = await response.json();

        teamsData = {};
        data.teams.forEach(function(team) {
          teamsData[team.abbr] = team;
        });

        // Populate dropdowns
        team1Select.textContent = '';
        team2Select.textContent = '';

        var defaultOpt1 = document.createElement('option');
        defaultOpt1.value = '';
        defaultOpt1.textContent = 'Select a team...';
        team1Select.appendChild(defaultOpt1);

        var defaultOpt2 = document.createElement('option');
        defaultOpt2.value = '';
        defaultOpt2.textContent = 'Select a team...';
        team2Select.appendChild(defaultOpt2);

        data.teams.forEach(function(team) {
          var opt1 = document.createElement('option');
          opt1.value = team.abbr;
          opt1.textContent = team.name + ' (' + (team.wins || 0) + '-' + (team.losses || 0) + ')';
          team1Select.appendChild(opt1);

          var opt2 = document.createElement('option');
          opt2.value = team.abbr;
          opt2.textContent = team.name + ' (' + (team.wins || 0) + '-' + (team.losses || 0) + ')';
          team2Select.appendChild(opt2);
        });

        // Pre-select favorite teams
        if (league === 'mlb') {
          team1Select.value = 'STL';
          team2Select.value = 'CHC';
        } else if (league === 'nfl') {
          team1Select.value = 'TEN';
          team2Select.value = 'KC';
        } else if (league === 'nba') {
          team1Select.value = 'MEM';
          team2Select.value = 'OKC';
        } else if (league === 'ncaa') {
          team1Select.value = 'TEX';  // Hook 'em
          team2Select.value = 'TAMU'; // Rivalry game
        }

        updateTeamStats(1);
        updateTeamStats(2);

        dataBadge.textContent = 'Live ' + league.toUpperCase() + ' data • ' + data.source;
        runBtn.disabled = false;
        runBtn.textContent = 'Run Simulation';
      } catch (error) {
        console.error('Error loading teams:', error);
        dataBadge.textContent = 'Error loading data';
        runBtn.textContent = 'Retry Loading';
      }
    }

    function updateTeamStats(teamNum) {
      var select = document.getElementById('team' + teamNum + 'Select');
      var abbr = select.value;
      var team = teamsData[abbr];

      var recordEl = document.getElementById('team' + teamNum + 'Record');
      var winPctEl = document.getElementById('team' + teamNum + 'WinPct');
      var pythagEl = document.getElementById('team' + teamNum + 'Pythag');

      if (team) {
        recordEl.textContent = team.wins + '-' + team.losses;
        winPctEl.textContent = (team.winPct * 100).toFixed(1) + '%';
        pythagEl.textContent = (team.pythagorean * 100).toFixed(1) + '%';
      } else {
        recordEl.textContent = '--';
        winPctEl.textContent = '--';
        pythagEl.textContent = '--';
      }

      checkReadyToRun();
    }

    function checkReadyToRun() {
      var team1 = document.getElementById('team1Select').value;
      var team2 = document.getElementById('team2Select').value;
      var runBtn = document.getElementById('runBtn');

      if (team1 && team2 && team1 !== team2 && !isRunning) {
        runBtn.disabled = false;
        runBtn.textContent = 'Run Simulation';
      } else if (team1 === team2 && team1) {
        runBtn.disabled = true;
        runBtn.textContent = 'Select Different Teams';
      } else {
        runBtn.disabled = true;
        runBtn.textContent = 'Select Two Teams';
      }
    }

    function updateSimType() {
      var simType = document.getElementById('simType').value;
      var seriesGroup = document.getElementById('seriesLengthGroup');
      seriesGroup.style.display = simType === 'series' ? 'block' : 'none';
    }

    // Log5 formula for matchup probability
    function log5(pA, pB) {
      if (pA + pB === 0) return 0.5;
      return (pA - pA * pB) / (pA + pB - 2 * pA * pB);
    }

    // Normal distribution random (Box-Muller transform)
    function randomNormal(mean, stdDev) {
      var u1 = Math.random();
      var u2 = Math.random();
      var z0 = Math.sqrt(-2 * Math.log(u1)) * Math.cos(2 * Math.PI * u2);
      return z0 * stdDev + mean;
    }

    function simulateGame(team1WinProb, league) {
      var adjustedProb = team1WinProb + (Math.random() - 0.5) * 0.08;
      adjustedProb = Math.max(0.15, Math.min(0.85, adjustedProb));
      var team1Wins = Math.random() < adjustedProb;

      var baseScore, variance;
      if (league === 'mlb') {
        baseScore = 4.5;
        variance = 2.5;
      } else if (league === 'ncaa') {
        // College baseball averages higher scoring with more variance
        baseScore = 6;
        variance = 3.5;
      } else if (league === 'nfl') {
        baseScore = 22;
        variance = 8;
      } else {
        baseScore = 110;
        variance = 12;
      }

      var team1Score = Math.max(0, Math.round(randomNormal(baseScore + (team1Wins ? 1 : -0.5), variance)));
      var team2Score = Math.max(0, Math.round(randomNormal(baseScore + (team1Wins ? -0.5 : 1), variance)));

      if (team1Wins && team1Score <= team2Score) {
        team1Score = team2Score + 1;
      } else if (!team1Wins && team2Score <= team1Score) {
        team2Score = team1Score + 1;
      }

      return {
        team1Wins: team1Wins,
        team1Score: team1Score,
        team2Score: team2Score,
        margin: team1Score - team2Score
      };
    }

    function simulateSeries(team1WinProb, seriesLength, league) {
      var winsNeeded = Math.ceil(seriesLength / 2);
      var team1Wins = 0;
      var team2Wins = 0;
      var games = [];

      while (team1Wins < winsNeeded && team2Wins < winsNeeded) {
        var game = simulateGame(team1WinProb, league);
        games.push(game);
        if (game.team1Wins) {
          team1Wins++;
        } else {
          team2Wins++;
        }
      }

      return {
        team1WinsSeries: team1Wins >= winsNeeded,
        games: games
      };
    }

    function runSimulation() {
      if (isRunning) return;
      isRunning = true;

      var runBtn = document.getElementById('runBtn');
      runBtn.disabled = true;
      runBtn.textContent = 'Running...';

      var league = document.getElementById('league').value;
      var simType = document.getElementById('simType').value;
      var team1Abbr = document.getElementById('team1Select').value;
      var team2Abbr = document.getElementById('team2Select').value;
      var homeField = document.getElementById('homeField').value;
      var simCount = parseInt(document.getElementById('simCount').value);
      var seriesLength = parseInt(document.getElementById('seriesLength').value);

      var team1 = teamsData[team1Abbr];
      var team2 = teamsData[team2Abbr];

      if (!team1 || !team2) {
        alert('Please select valid teams');
        isRunning = false;
        runBtn.disabled = false;
        runBtn.textContent = 'Run Simulation';
        return;
      }

      document.getElementById('team1Name').textContent = team1.name;
      document.getElementById('team2Name').textContent = team2.name;

      // Calculate matchup probability using log5 with true strength
      var matchupProb = log5(team1.trueStrength, team2.trueStrength);

      // Apply home field advantage (NCAA baseball has strong home advantage ~5%)
      var homeAdvantage = (league === 'mlb') ? 0.035 : (league === 'nfl' || league === 'ncaa') ? 0.05 : 0.06;
      if (homeField === 'team1') {
        matchupProb = Math.min(0.90, matchupProb + homeAdvantage);
      } else if (homeField === 'team2') {
        matchupProb = Math.max(0.10, matchupProb - homeAdvantage);
      }

      var team1WinsCount = 0;
      var margins = [];
      var team1Scores = [];
      var team2Scores = [];
      var closeGames = 0;
      var overtimeGames = 0;
      var highScoringGames = 0;
      var team1Blowouts = 0;
      var team2Blowouts = 0;

      // NCAA baseball scores similar to MLB but slightly higher variance
      var blowoutThreshold = (league === 'mlb' || league === 'ncaa') ? 7 : league === 'nfl' ? 14 : 20;
      var highScoreThreshold = (league === 'mlb') ? 12 : (league === 'ncaa') ? 15 : league === 'nfl' ? 50 : 230;
      var closeThreshold = (league === 'mlb' || league === 'ncaa') ? 2 : league === 'nfl' ? 7 : 5;

      var progressFill = document.getElementById('progressFill');
      var progressText = document.getElementById('progressText');
      var simRunCount = document.getElementById('simRunCount');

      var completed = 0;
      var batchSize = Math.ceil(simCount / 100);

      function processBatch() {
        var endIdx = Math.min(completed + batchSize, simCount);

        for (var i = completed; i < endIdx; i++) {
          var result;

          if (simType === 'series') {
            result = simulateSeries(matchupProb, seriesLength, league);
            if (result.team1WinsSeries) team1WinsCount++;

            for (var g = 0; g < result.games.length; g++) {
              var game = result.games[g];
              margins.push(game.margin);
              team1Scores.push(game.team1Score);
              team2Scores.push(game.team2Score);

              if (Math.abs(game.margin) <= closeThreshold) closeGames++;
              if (Math.abs(game.margin) <= 1) overtimeGames++;
              if (game.team1Score + game.team2Score >= highScoreThreshold) highScoringGames++;
              if (game.margin >= blowoutThreshold) team1Blowouts++;
              if (game.margin <= -blowoutThreshold) team2Blowouts++;
            }
          } else {
            result = simulateGame(matchupProb, league);
            if (result.team1Wins) team1WinsCount++;

            margins.push(result.margin);
            team1Scores.push(result.team1Score);
            team2Scores.push(result.team2Score);

            if (Math.abs(result.margin) <= closeThreshold) closeGames++;
            if (Math.abs(result.margin) <= 1) overtimeGames++;
            if (result.team1Score + result.team2Score >= highScoreThreshold) highScoringGames++;
            if (result.margin >= blowoutThreshold) team1Blowouts++;
            if (result.margin <= -blowoutThreshold) team2Blowouts++;
          }
        }

        completed = endIdx;
        var pct = (completed / simCount * 100).toFixed(1);
        progressFill.style.width = pct + '%';
        progressText.textContent = completed.toLocaleString() + ' / ' + simCount.toLocaleString() + ' simulations';
        simRunCount.textContent = completed.toLocaleString();

        if (completed < simCount) {
          setTimeout(processBatch, 0);
        } else {
          finishSimulation();
        }
      }

      function finishSimulation() {
        var team1Pct = (team1WinsCount / simCount * 100).toFixed(1);
        var team2Pct = (100 - team1Pct).toFixed(1);

        document.getElementById('team1Pct').textContent = team1Pct + '%';
        document.getElementById('team2Pct').textContent = team2Pct + '%';

        var team1Card = document.getElementById('team1Card');
        var team2Card = document.getElementById('team2Card');
        team1Card.classList.remove('winner');
        team2Card.classList.remove('winner');
        if (parseFloat(team1Pct) > parseFloat(team2Pct)) {
          team1Card.classList.add('winner');
        } else {
          team2Card.classList.add('winner');
        }

        var avgTeam1 = team1Scores.reduce(function(a, b) { return a + b; }, 0) / team1Scores.length;
        var avgTeam2 = team2Scores.reduce(function(a, b) { return a + b; }, 0) / team2Scores.length;

        var sortedMargins = margins.slice().sort(function(a, b) { return a - b; });
        var medianMargin = sortedMargins[Math.floor(sortedMargins.length / 2)];

        document.getElementById('team1AvgScore').textContent = avgTeam1.toFixed(1);
        document.getElementById('team2AvgScore').textContent = avgTeam2.toFixed(1);
        document.getElementById('team1Median').textContent = medianMargin > 0 ? '+' + medianMargin : medianMargin;
        document.getElementById('team2Median').textContent = medianMargin < 0 ? '+' + Math.abs(medianMargin) : -medianMargin;

        var totalGames = margins.length;
        document.getElementById('team1Blowout').textContent = (team1Blowouts / totalGames * 100).toFixed(1) + '%';
        document.getElementById('team2Blowout').textContent = (team2Blowouts / totalGames * 100).toFixed(1) + '%';

        document.getElementById('closeGamePct').textContent = (closeGames / totalGames * 100).toFixed(1) + '%';
        document.getElementById('overtimePct').textContent = (overtimeGames / totalGames * 100).toFixed(1) + '%';
        document.getElementById('highScoringPct').textContent = (highScoringGames / totalGames * 100).toFixed(1) + '%';

        buildHistogram(margins, league);

        progressText.textContent = 'Simulation complete';
        runBtn.disabled = false;
        runBtn.textContent = 'Run Simulation';
        isRunning = false;
      }

      processBatch();
    }

    function buildHistogram(margins, league) {
      var histogram = document.getElementById('histogram');
      while (histogram.firstChild) {
        histogram.removeChild(histogram.firstChild);
      }

      var range = (league === 'mlb' || league === 'ncaa') ? 10 : league === 'nfl' ? 28 : 30;
      var buckets = [];
      var bucketCount = 21;
      for (var i = 0; i < bucketCount; i++) {
        buckets.push(0);
      }

      for (var j = 0; j < margins.length; j++) {
        var margin = margins[j];
        var normalized = (margin + range) / (range * 2);
        var bucket = Math.min(bucketCount - 1, Math.max(0, Math.floor(normalized * bucketCount)));
        buckets[bucket]++;
      }

      var maxBucket = Math.max.apply(null, buckets);

      for (var k = 0; k < buckets.length; k++) {
        var bar = document.createElement('div');
        bar.className = 'hist-bar';
        var height = maxBucket > 0 ? (buckets[k] / maxBucket * 100) : 0;
        bar.style.height = Math.max(2, height) + '%';
        histogram.appendChild(bar);
      }
    }

    // Initialize
    (function() {
      var histogram = document.getElementById('histogram');
      for (var i = 0; i < 21; i++) {
        var bar = document.createElement('div');
        bar.className = 'hist-bar';
        bar.style.height = '2px';
        histogram.appendChild(bar);
      }
      loadTeams();
    })();
  </script>
</body>
</html>

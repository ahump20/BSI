name = "bsi-home"
main = "worker.js"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]

# Route configuration
routes = [
  { pattern = "blazesportsintel.com/*", zone_name = "blazesportsintel.com" }
]

# R2 bucket for static assets
[[r2_buckets]]
binding = "ASSETS"
bucket_name = "blazesports-assets"

# D1 database
[[d1_databases]]
binding = "DB"
database_name = "bsi-game-db"
database_id = "88eb676f-af0f-470c-a46a-b9429f5b51f3"

# KV namespace for sessions
[[kv_namespaces]]
binding = "SESSIONS"
id = "b03e0651b4a34078a3e031bc5bc14ad7"

# Analytics Engine
[[analytics_engine_datasets]]
binding = "ANALYTICS"
dataset = "bsi_home_analytics"

# Environment variables
[vars]
ENVIRONMENT = "production"
R2_PREFIX = "origin/"

# Staging environment
[env.staging]
name = "bsi-home-staging"
routes = [
  { pattern = "staging.blazesportsintel.com/*", zone_name = "blazesportsintel.com" }
]

[env.staging.vars]
ENVIRONMENT = "staging"

# Observability
[observability]
enabled = true
head_sampling_rate = 1

# Development settings
[dev]
port = 8788
local_protocol = "http"

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="College football transfer portal tracker with impact scoring. Track every FBS player in the portal with our proprietary impact algorithm.">
  <title>Transfer Portal | College Football | Blaze Sports Intel</title>

  <!-- Open Graph -->
  <meta property="og:title" content="Football Transfer Portal Tracker | Blaze Sports Intel">
  <meta property="og:description" content="Track every FBS player in the portal with our proprietary impact scoring algorithm.">
  <meta property="og:image" content="https://blazesportsintel.com/images/texas-soil.jpg">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://blazesportsintel.com/college-football/transfer-portal">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Football Transfer Portal Tracker | Blaze Sports Intel">
  <meta name="twitter:description" content="Track every FBS player in the portal with impact scoring.">
  <meta name="twitter:image" content="https://blazesportsintel.com/images/texas-soil.jpg">

  <!-- Canonical & SEO -->
  <link rel="canonical" href="https://blazesportsintel.com/college-football/transfer-portal">
  <meta name="theme-color" content="#BF5700">
  <link rel="icon" type="image/png" href="/images/bsi-logo-nav.png">
  <meta name="keywords" content="college football transfer portal, NCAA football transfers, FBS portal, transfer portal tracker, portal rankings">

  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "College Football Transfer Portal Tracker",
    "description": "Track NCAA FBS players in the transfer portal with impact scoring",
    "url": "https://blazesportsintel.com/college-football/transfer-portal",
    "publisher": {
      "@type": "Organization",
      "name": "Blaze Sports Intel"
    }
  }
  </script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500&family=IBM+Plex+Sans:wght@400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400&family=Source+Serif+4:ital,wght@0,400;0,500;0,600;1,400&display=swap" rel="stylesheet">

  <style>
    :root {
      --bsi-burnt-orange: #BF5700;
      --bsi-texas-soil: #8B4513;
      --bsi-charcoal: #1A1A1A;
      --bsi-midnight: #0D0D0D;
      --bsi-cream: #FAF8F5;
      --bsi-warm-white: #FAFAFA;
      --bsi-ember: #FF6B35;
      --bsi-gold: #C9A227;
      --font-display: 'Playfair Display', Georgia, serif;
      --font-body: 'Source Serif 4', Georgia, serif;
      --font-ui: 'IBM Plex Sans', 'Helvetica Neue', sans-serif;
      --font-mono: 'IBM Plex Mono', monospace;
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body {
      font-family: var(--font-body);
      font-size: 1rem;
      line-height: 1.6;
      color: var(--bsi-warm-white);
      background: var(--bsi-midnight);
      -webkit-font-smoothing: antialiased;
    }
    img { max-width: 100%; height: auto; display: block; }
    a { color: inherit; text-decoration: none; }

    /* Navigation */
    .nav { position: fixed; top: 0; left: 0; right: 0; z-index: 1000; padding: 0.75rem 0; background: rgba(13, 13, 13, 0.95); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border-bottom: 1px solid rgba(191, 87, 0, 0.15); transition: all 0.3s cubic-bezier(0.0, 0.0, 0.2, 1); }
    .nav.scrolled { padding: 0.5rem 0; background: rgba(13, 13, 13, 0.98); }
    .nav-inner { max-width: 1400px; margin: 0 auto; padding: 0 1.5rem; display: flex; justify-content: space-between; align-items: center; }
    .logo { display: flex; align-items: center; gap: 0.75rem; text-decoration: none; color: var(--bsi-cream); font-weight: 700; font-size: 1.125rem; }
    .logo-img { height: 44px; width: auto; filter: drop-shadow(0 2px 8px rgba(191, 87, 0, 0.3)); transition: transform 0.3s cubic-bezier(0.0, 0.0, 0.2, 1); }
    .logo:hover .logo-img { transform: scale(1.05); }
    .logo-text { display: none; }
    @media (min-width: 640px) { .logo-text { display: block; } .logo-img { height: 48px; } }
    .nav-links { display: none; gap: 2rem; list-style: none; font-family: var(--font-ui); font-size: 0.875rem; font-weight: 500; }
    .nav-links a { color: var(--bsi-cream); text-decoration: none; opacity: 0.7; transition: all 0.3s cubic-bezier(0.0, 0.0, 0.2, 1); position: relative; }
    .nav-links a::after { content: ''; position: absolute; bottom: -4px; left: 0; width: 0; height: 2px; background: var(--bsi-ember); transition: width 0.3s cubic-bezier(0.0, 0.0, 0.2, 1); }
    .nav-links a:hover { opacity: 1; }
    .nav-links a:hover::after { width: 100%; }
    .nav-links a.active { opacity: 1; color: var(--bsi-ember); }
    @media (min-width: 768px) { .nav-links { display: flex; } }
    .nav-cta { display: none; }
    .nav-cta .btn-primary { display: inline-flex; align-items: center; justify-content: center; gap: 0.5rem; padding: 0.75rem 1.25rem; font-size: 0.875rem; font-weight: 600; border-radius: 8px; cursor: pointer; transition: all 0.3s cubic-bezier(0.0, 0.0, 0.2, 1); border: none; text-align: center; text-decoration: none; background: linear-gradient(135deg, var(--bsi-burnt-orange), var(--bsi-ember)); color: white; box-shadow: 0 4px 20px rgba(191, 87, 0, 0.3); }
    .nav-cta .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 30px rgba(191, 87, 0, 0.4); }
    @media (min-width: 1024px) { .nav-cta { display: block; } }

    .page-header {
      padding: 8rem 2rem 4rem;
      background: linear-gradient(180deg, var(--bsi-midnight) 0%, var(--bsi-charcoal) 100%);
      position: relative;
      overflow: hidden;
    }
    .page-header::before {
      content: '';
      position: absolute;
      top: 50%;
      right: -200px;
      width: 600px;
      height: 600px;
      background: radial-gradient(circle, rgba(191, 87, 0, 0.2) 0%, transparent 70%);
      transform: translateY(-50%);
      pointer-events: none;
    }
    .page-header-inner {
      max-width: 1200px;
      margin: 0 auto;
      position: relative;
      z-index: 1;
    }
    .page-header h1 {
      font-family: var(--font-display);
      font-size: clamp(2rem, 5vw, 3.5rem);
      margin-bottom: 1rem;
    }
    .page-header h1 span {
      display: block;
      color: var(--bsi-burnt-orange);
    }
    .page-header p {
      color: rgba(250, 248, 245, 0.7);
      font-size: 1.125rem;
      max-width: 600px;
    }

    .sub-nav {
      padding: 1rem 2rem;
      background: var(--bsi-charcoal);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      position: sticky;
      top: 60px;
      z-index: 50;
    }
    .sub-nav-inner {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      gap: 2rem;
      overflow-x: auto;
    }
    .sub-nav a {
      font-family: var(--font-ui);
      font-size: 0.875rem;
      font-weight: 500;
      color: rgba(250, 248, 245, 0.7);
      white-space: nowrap;
      padding: 0.5rem 0;
      border-bottom: 2px solid transparent;
      transition: all 0.2s;
    }
    .sub-nav a:hover { color: var(--bsi-cream); }
    .sub-nav a.active {
      color: var(--bsi-burnt-orange);
      border-color: var(--bsi-burnt-orange);
    }

    .content {
      padding: 3rem 2rem;
      background: var(--bsi-midnight);
    }
    .content-inner {
      max-width: 1200px;
      margin: 0 auto;
    }

    /* Impact Score Explanation */
    .impact-explainer {
      background: linear-gradient(135deg, var(--bsi-charcoal) 0%, rgba(191, 87, 0, 0.1) 100%);
      border: 1px solid rgba(191, 87, 0, 0.3);
      border-radius: 16px;
      padding: 2rem;
      margin-bottom: 2rem;
    }
    .impact-explainer h2 {
      font-family: var(--font-display);
      font-size: 1.25rem;
      margin-bottom: 1rem;
      color: var(--bsi-burnt-orange);
    }
    .impact-explainer p {
      color: rgba(250, 248, 245, 0.7);
      font-size: 0.9375rem;
      margin-bottom: 1rem;
    }
    .impact-factors {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
    }
    .impact-factor {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    .factor-weight {
      width: 48px;
      height: 48px;
      border-radius: 8px;
      background: var(--bsi-midnight);
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: var(--font-ui);
      font-weight: 700;
      font-size: 0.875rem;
      color: var(--bsi-burnt-orange);
    }
    .factor-info h4 {
      font-family: var(--font-ui);
      font-size: 0.875rem;
      font-weight: 600;
      margin-bottom: 0.125rem;
    }
    .factor-info p {
      font-family: var(--font-ui);
      font-size: 0.75rem;
      color: rgba(250, 248, 245, 0.5);
      margin: 0;
    }

    /* Filters */
    .filters {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      margin-bottom: 2rem;
      padding: 1.5rem;
      background: var(--bsi-charcoal);
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.05);
    }
    .filter-group {
      flex: 1;
      min-width: 150px;
    }
    .filter-label {
      display: block;
      font-family: var(--font-ui);
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: rgba(250, 248, 245, 0.6);
      margin-bottom: 0.5rem;
    }
    .filter-select, .filter-input {
      width: 100%;
      padding: 0.75rem 1rem;
      background: var(--bsi-midnight);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      color: var(--bsi-cream);
      font-family: var(--font-ui);
      font-size: 0.875rem;
      transition: border-color 0.2s;
    }
    .filter-select:focus, .filter-input:focus {
      outline: none;
      border-color: var(--bsi-burnt-orange);
    }
    .filter-select option {
      background: var(--bsi-midnight);
      color: var(--bsi-cream);
    }

    /* Stats Bar */
    .stats-bar {
      display: flex;
      gap: 2rem;
      padding: 1rem 1.5rem;
      background: var(--bsi-charcoal);
      border-radius: 8px;
      margin-bottom: 2rem;
      flex-wrap: wrap;
    }
    .stat-item {
      font-family: var(--font-ui);
      font-size: 0.875rem;
    }
    .stat-value {
      color: var(--bsi-burnt-orange);
      font-weight: 600;
    }

    /* Player Cards */
    .players-grid {
      display: grid;
      gap: 1rem;
    }
    .player-card {
      display: grid;
      grid-template-columns: auto 1fr auto;
      gap: 1.5rem;
      padding: 1.5rem;
      background: var(--bsi-charcoal);
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.05);
      align-items: center;
      transition: all 0.2s;
    }
    .player-card:hover {
      border-color: var(--bsi-burnt-orange);
      transform: translateY(-2px);
    }
    @media (max-width: 768px) {
      .player-card {
        grid-template-columns: 1fr;
        text-align: center;
      }
    }

    /* Impact Score Badge */
    .impact-badge {
      width: 72px;
      height: 72px;
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-family: var(--font-ui);
    }
    .impact-badge.elite { background: linear-gradient(135deg, #22C55E, #16A34A); }
    .impact-badge.high { background: linear-gradient(135deg, var(--bsi-burnt-orange), var(--bsi-ember)); }
    .impact-badge.medium { background: linear-gradient(135deg, var(--bsi-gold), #B8860B); }
    .impact-badge.low { background: linear-gradient(135deg, #6B7280, #4B5563); }
    .impact-score {
      font-size: 1.5rem;
      font-weight: 700;
      line-height: 1;
    }
    .impact-label {
      font-size: 0.625rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      opacity: 0.8;
    }

    /* Player Info */
    .player-info {
      min-width: 0;
    }
    .player-name {
      font-family: var(--font-ui);
      font-size: 1.125rem;
      font-weight: 600;
      margin-bottom: 0.25rem;
    }
    .player-position {
      font-family: var(--font-ui);
      font-size: 0.875rem;
      color: var(--bsi-burnt-orange);
      margin-bottom: 0.5rem;
    }
    .player-transfer {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-family: var(--font-ui);
      font-size: 0.8125rem;
      color: rgba(250, 248, 245, 0.7);
      flex-wrap: wrap;
    }
    .transfer-arrow {
      color: var(--bsi-ember);
    }
    .player-stats {
      display: flex;
      gap: 1rem;
      margin-top: 0.75rem;
      flex-wrap: wrap;
    }
    .player-stat {
      font-family: var(--font-mono);
      font-size: 0.75rem;
      padding: 0.25rem 0.5rem;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 4px;
    }

    /* Star Rating */
    .star-rating {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      margin-left: 0.5rem;
    }
    .star {
      color: var(--bsi-gold);
      font-size: 0.75rem;
    }

    /* Player Meta */
    .player-meta {
      text-align: right;
      font-family: var(--font-ui);
      font-size: 0.75rem;
      color: rgba(250, 248, 245, 0.5);
    }
    @media (max-width: 768px) {
      .player-meta { text-align: center; }
    }
    .player-meta .date { margin-bottom: 0.25rem; }
    .status-badge {
      display: inline-block;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      font-size: 0.625rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    .status-badge.in-portal { background: rgba(191, 87, 0, 0.2); color: var(--bsi-burnt-orange); }
    .status-badge.committed { background: rgba(34, 197, 94, 0.2); color: #22C55E; }
    .status-badge.declared { background: rgba(59, 130, 246, 0.2); color: #3B82F6; }
    .status-badge.withdrawn { background: rgba(107, 114, 128, 0.2); color: #9CA3AF; }

    /* Conference Summary */
    .conference-summary {
      margin-top: 3rem;
    }
    .conference-summary h2 {
      font-family: var(--font-display);
      font-size: 1.5rem;
      margin-bottom: 1.5rem;
      padding-bottom: 0.75rem;
      border-bottom: 2px solid var(--bsi-burnt-orange);
    }
    .summary-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 1rem;
    }
    .summary-card {
      padding: 1rem;
      background: var(--bsi-charcoal);
      border-radius: 8px;
      border: 1px solid rgba(255, 255, 255, 0.05);
    }
    .summary-conf {
      font-family: var(--font-ui);
      font-size: 0.875rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }
    .summary-stats {
      display: flex;
      gap: 1rem;
      font-family: var(--font-mono);
      font-size: 0.75rem;
    }
    .summary-in { color: #22C55E; }
    .summary-out { color: #EF4444; }
    .summary-net { color: var(--bsi-burnt-orange); font-weight: 600; }

    /* Loading & Empty States */
    .loading-state {
      text-align: center;
      padding: 4rem 2rem;
    }
    .loading-spinner {
      width: 48px;
      height: 48px;
      border: 3px solid rgba(191, 87, 0, 0.2);
      border-top-color: var(--bsi-burnt-orange);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 1rem;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    .empty-state {
      text-align: center;
      padding: 4rem 2rem;
      color: rgba(250, 248, 245, 0.6);
    }
    .empty-state h3 {
      font-family: var(--font-display);
      font-size: 1.25rem;
      margin-bottom: 0.5rem;
      color: var(--bsi-cream);
    }

    /* Footer */
    .footer {
      background: var(--bsi-midnight);
      border-top: 1px solid rgba(255, 255, 255, 0.05);
      padding: 3rem 2rem;
      margin-top: 4rem;
    }
    .footer-inner {
      max-width: 1200px;
      margin: 0 auto;
      text-align: center;
    }
    .footer p {
      font-family: var(--font-ui);
      font-size: 0.875rem;
      color: rgba(250, 248, 245, 0.5);
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav class="nav">
    <div class="nav-inner">
      <a href="/" class="logo">
        <img src="/images/bsi-logo-nav.png" alt="BSI" class="logo-img">
        <span class="logo-text">Blaze Sports Intel</span>
      </a>
      <ul class="nav-links">
        <li><a href="/">Home</a></li>
        <li><a href="/scores">Scores</a></li>
        <li><a href="/college-baseball/">College Baseball</a></li>
        <li><a href="/college-football/" class="active">College Football</a></li>
        <li><a href="/nfl">NFL</a></li>
        <li><a href="/tools">Tools</a></li>
      </ul>
      <div class="nav-cta">
        <a href="/subscribe" class="btn-primary">Go Pro</a>
      </div>
    </div>
  </nav>

  <!-- Page Header -->
  <header class="page-header">
    <div class="page-header-inner">
      <h1>Transfer Portal <span>Impact Tracker</span></h1>
      <p>Track every FBS player in the portal with our proprietary impact scoring algorithm. Real-time updates, conference flow analysis, and impact rankings.</p>
    </div>
  </header>

  <!-- Sub Navigation -->
  <nav class="sub-nav">
    <div class="sub-nav-inner">
      <a href="/college-football/">Overview</a>
      <a href="/college-football/standings">Standings</a>
      <a href="/college-football/teams">Teams</a>
      <a href="/college-football/transfer-portal" class="active">Transfer Portal</a>
    </div>
  </nav>

  <!-- Content -->
  <section class="content">
    <div class="content-inner">
      <!-- Impact Score Explanation -->
      <div class="impact-explainer">
        <h2>BSI Impact Score Algorithm</h2>
        <p>Our proprietary algorithm evaluates transfer portal players based on multiple factors to predict their impact at their new program.</p>
        <div class="impact-factors">
          <div class="impact-factor">
            <div class="factor-weight">40%</div>
            <div class="factor-info">
              <h4>Production</h4>
              <p>Stats, awards, All-Conference</p>
            </div>
          </div>
          <div class="impact-factor">
            <div class="factor-weight">25%</div>
            <div class="factor-info">
              <h4>Program Fit</h4>
              <p>Roster needs, scheme fit</p>
            </div>
          </div>
          <div class="impact-factor">
            <div class="factor-weight">20%</div>
            <div class="factor-info">
              <h4>Experience</h4>
              <p>Years remaining, starts</p>
            </div>
          </div>
          <div class="impact-factor">
            <div class="factor-weight">15%</div>
            <div class="factor-info">
              <h4>Conference</h4>
              <p>Strength adjustment</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Filters -->
      <div class="filters">
        <div class="filter-group">
          <label class="filter-label" for="search">Search Players</label>
          <input type="text" id="search" class="filter-input" placeholder="Name or school...">
        </div>
        <div class="filter-group">
          <label class="filter-label" for="position">Position</label>
          <select id="position" class="filter-select">
            <option value="">All Positions</option>
            <option value="QB">Quarterback</option>
            <option value="RB">Running Back</option>
            <option value="WR">Wide Receiver</option>
            <option value="TE">Tight End</option>
            <option value="OL">Offensive Line</option>
            <option value="DL">Defensive Line</option>
            <option value="DT">Defensive Tackle</option>
            <option value="EDGE">Edge Rusher</option>
            <option value="LB">Linebacker</option>
            <option value="CB">Cornerback</option>
            <option value="S">Safety</option>
          </select>
        </div>
        <div class="filter-group">
          <label class="filter-label" for="conference">Conference</label>
          <select id="conference" class="filter-select">
            <option value="">All Conferences</option>
          </select>
        </div>
        <div class="filter-group">
          <label class="filter-label" for="status">Status</label>
          <select id="status" class="filter-select">
            <option value="">All Status</option>
            <option value="in_portal">In Portal</option>
            <option value="committed">Committed</option>
            <option value="declared">Declared for NFL</option>
          </select>
        </div>
      </div>

      <!-- Stats Bar -->
      <div class="stats-bar" id="stats-bar">
        <div class="stat-item">Loading portal data...</div>
      </div>

      <!-- Players Container -->
      <div id="players-container">
        <div class="loading-state">
          <div class="loading-spinner"></div>
          <p>Loading transfer portal...</p>
        </div>
      </div>

      <!-- Conference Summary -->
      <div class="conference-summary" id="conference-summary" style="display: none;">
        <h2>Conference Net Flow</h2>
        <div class="summary-grid" id="summary-grid"></div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-inner">
      <p>&copy; 2025 Blaze Sports Intel. Born to Blaze the Path Less Beaten.</p>
    </div>
  </footer>

  <script>
    let allPlayers = [];
    let conferences = new Set();

    // Safe element creation
    function createElement(tag, className, textContent) {
      const el = document.createElement(tag);
      if (className) el.className = className;
      if (textContent) el.textContent = textContent;
      return el;
    }

    // Create stat item with styled value
    function createStatItem(value, label) {
      const item = createElement('div', 'stat-item');
      const valueSpan = createElement('span', 'stat-value', String(value));
      const labelText = document.createTextNode(' ' + label);
      item.appendChild(valueSpan);
      item.appendChild(labelText);
      return item;
    }

    // Get impact tier from score
    function getImpactTier(score) {
      if (score >= 90) return 'elite';
      if (score >= 80) return 'high';
      if (score >= 70) return 'medium';
      return 'low';
    }

    // Format stats for display
    function formatStats(player) {
      const stats = [];
      if (player.stats_passing_yards) stats.push('Pass: ' + player.stats_passing_yards + ' yds');
      if (player.stats_rushing_yards) stats.push('Rush: ' + player.stats_rushing_yards + ' yds');
      if (player.stats_receiving_yards) stats.push('Rec: ' + player.stats_receiving_yards + ' yds');
      if (player.stats_tackles) stats.push('Tackles: ' + player.stats_tackles);
      if (player.stats_sacks) stats.push('Sacks: ' + player.stats_sacks);
      if (player.stats_interceptions) stats.push('INTs: ' + player.stats_interceptions);
      return stats;
    }

    // Build star rating
    function buildStarRating(stars) {
      if (!stars) return null;
      const container = createElement('span', 'star-rating');
      for (let i = 0; i < stars; i++) {
        const star = createElement('span', 'star', '\u2605');
        container.appendChild(star);
      }
      return container;
    }

    // Build player card
    function buildPlayerCard(player) {
      const card = createElement('div', 'player-card');

      // Impact Badge
      const tier = getImpactTier(player.impact_score || 0);
      const badge = createElement('div', 'impact-badge ' + tier);
      const score = createElement('div', 'impact-score', String(player.impact_score || '-'));
      const label = createElement('div', 'impact-label', 'Impact');
      badge.appendChild(score);
      badge.appendChild(label);
      card.appendChild(badge);

      // Player Info
      const info = createElement('div', 'player-info');
      const nameRow = createElement('div', 'player-name');
      nameRow.textContent = player.player_name || player.name;
      if (player.stars) {
        const starRating = buildStarRating(player.stars);
        if (starRating) nameRow.appendChild(starRating);
      }
      const position = createElement('div', 'player-position', player.position + ' | ' + player.year);

      const transfer = createElement('div', 'player-transfer');
      const fromSchool = createElement('span', '', player.from_school);
      transfer.appendChild(fromSchool);

      if (player.from_conference) {
        const fromConf = createElement('span', '', ' (' + player.from_conference + ')');
        fromConf.style.opacity = '0.6';
        transfer.appendChild(fromConf);
      }

      const arrow = createElement('span', 'transfer-arrow', ' \u2192 ');
      transfer.appendChild(arrow);

      const toSchool = createElement('span', '', player.to_school || 'Uncommitted');
      transfer.appendChild(toSchool);

      if (player.to_conference) {
        const toConf = createElement('span', '', ' (' + player.to_conference + ')');
        toConf.style.opacity = '0.6';
        transfer.appendChild(toConf);
      }

      info.appendChild(nameRow);
      info.appendChild(position);
      info.appendChild(transfer);

      // Player stats if available
      const statsArr = formatStats(player);
      if (statsArr.length > 0) {
        const stats = createElement('div', 'player-stats');
        statsArr.forEach(function(stat) {
          const statEl = createElement('span', 'player-stat', stat);
          stats.appendChild(statEl);
        });
        info.appendChild(stats);
      }

      // Notes
      if (player.notes) {
        const notes = createElement('div', 'player-stats');
        const noteEl = createElement('span', 'player-stat', player.notes);
        noteEl.style.fontStyle = 'italic';
        notes.appendChild(noteEl);
        info.appendChild(notes);
      }

      card.appendChild(info);

      // Meta info
      const meta = createElement('div', 'player-meta');
      if (player.entry_date) {
        const date = createElement('div', 'date', formatDate(player.entry_date));
        meta.appendChild(date);
      }

      const statusClass = player.status === 'committed' ? 'committed' :
                         player.status === 'declared' ? 'declared' :
                         player.status === 'withdrawn' ? 'withdrawn' : 'in-portal';
      const statusText = player.status === 'committed' ? 'Committed' :
                        player.status === 'declared' ? 'NFL Declared' :
                        player.status === 'withdrawn' ? 'Withdrawn' : 'In Portal';
      const statusBadge = createElement('span', 'status-badge ' + statusClass, statusText);
      meta.appendChild(statusBadge);

      card.appendChild(meta);

      return card;
    }

    // Format date
    function formatDate(dateStr) {
      if (!dateStr) return '';
      const date = new Date(dateStr);
      return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
    }

    // Render players
    function renderPlayers(players) {
      const container = document.getElementById('players-container');
      container.textContent = '';

      if (players.length === 0) {
        const empty = createElement('div', 'empty-state');
        const h3 = createElement('h3', '', 'No Players Found');
        const p = createElement('p', '', 'Try adjusting your filters.');
        empty.appendChild(h3);
        empty.appendChild(p);
        container.appendChild(empty);
        return;
      }

      const grid = createElement('div', 'players-grid');
      players.forEach(function(player) {
        grid.appendChild(buildPlayerCard(player));
      });
      container.appendChild(grid);
    }

    // Update stats bar
    function updateStatsBar(players) {
      const bar = document.getElementById('stats-bar');
      bar.textContent = '';

      bar.appendChild(createStatItem(players.length, 'Players'));

      const inPortal = players.filter(function(p) { return p.status === 'in_portal'; }).length;
      bar.appendChild(createStatItem(inPortal, 'Active'));

      const committed = players.filter(function(p) { return p.status === 'committed'; }).length;
      bar.appendChild(createStatItem(committed, 'Committed'));

      const avgImpact = players.length > 0
        ? Math.round(players.reduce(function(sum, p) { return sum + (p.impact_score || 0); }, 0) / players.length)
        : 0;
      bar.appendChild(createStatItem(avgImpact, 'Avg Impact'));

      const fiveStars = players.filter(function(p) { return p.stars >= 5; }).length;
      if (fiveStars > 0) {
        bar.appendChild(createStatItem(fiveStars, '5-Stars'));
      }
    }

    // Apply filters
    function applyFilters() {
      const search = document.getElementById('search').value.toLowerCase();
      const position = document.getElementById('position').value;
      const conference = document.getElementById('conference').value;
      const status = document.getElementById('status').value;

      var filtered = allPlayers;

      if (search) {
        filtered = filtered.filter(function(p) {
          const name = p.player_name || p.name || '';
          return name.toLowerCase().indexOf(search) !== -1 ||
            p.from_school.toLowerCase().indexOf(search) !== -1 ||
            (p.to_school && p.to_school.toLowerCase().indexOf(search) !== -1);
        });
      }

      if (position) {
        filtered = filtered.filter(function(p) { return p.position === position; });
      }

      if (conference) {
        filtered = filtered.filter(function(p) {
          return p.from_conference === conference || p.to_conference === conference;
        });
      }

      if (status) {
        filtered = filtered.filter(function(p) { return p.status === status; });
      }

      updateStatsBar(filtered);
      renderPlayers(filtered);
    }

    // Populate filters
    function populateFilters() {
      const confSelect = document.getElementById('conference');
      confSelect.length = 1;

      const confOrder = ['SEC', 'Big Ten', 'Big 12', 'ACC', 'American Athletic', 'Sun Belt', 'Mountain West', 'Mid-American', 'Conference USA', 'Independent'];

      confOrder.forEach(function(conf) {
        if (conferences.has(conf)) {
          const option = document.createElement('option');
          option.value = conf;
          option.textContent = conf;
          confSelect.appendChild(option);
        }
      });

      Array.from(conferences).sort().forEach(function(conf) {
        if (confOrder.indexOf(conf) === -1) {
          const option = document.createElement('option');
          option.value = conf;
          option.textContent = conf;
          confSelect.appendChild(option);
        }
      });
    }

    // Build conference summary card
    function buildSummaryCard(conf, data) {
      const card = createElement('div', 'summary-card');
      const name = createElement('div', 'summary-conf', conf);
      card.appendChild(name);

      const stats = createElement('div', 'summary-stats');
      const inSpan = createElement('span', 'summary-in', '+' + (data.incoming || data.in || 0));
      const outSpan = createElement('span', 'summary-out', '-' + (data.outgoing || data.out || 0));
      const net = (data.incoming || data.in || 0) - (data.outgoing || data.out || 0);
      const netSpan = createElement('span', 'summary-net', (net >= 0 ? '+' : '') + net);
      stats.appendChild(inSpan);
      stats.appendChild(outSpan);
      stats.appendChild(netSpan);
      card.appendChild(stats);

      return card;
    }

    // Load conference summary
    async function loadConferenceSummary() {
      try {
        const response = await fetch('/api/ncaa-football/transfer-portal/conference-summary');
        if (!response.ok) return;

        const data = await response.json();
        if (data.success && data.data && data.data.length > 0) {
          const summarySection = document.getElementById('conference-summary');
          const grid = document.getElementById('summary-grid');
          grid.textContent = '';

          data.data.forEach(function(conf) {
            grid.appendChild(buildSummaryCard(conf.conference, conf));
          });

          summarySection.style.display = 'block';
        }
      } catch (error) {
        console.error('Error loading conference summary:', error);
      }
    }

    // Load transfer portal data
    async function loadPortal() {
      try {
        const response = await fetch('/api/ncaa-football/transfer-portal/impact-leaders?limit=100');
        if (!response.ok) throw new Error('Failed to load portal data');

        const data = await response.json();
        if (data.success && data.data) {
          allPlayers = data.data;

          // Build conference filter options
          allPlayers.forEach(function(player) {
            if (player.from_conference) conferences.add(player.from_conference);
            if (player.to_conference) conferences.add(player.to_conference);
          });

          populateFilters();
          updateStatsBar(allPlayers);
          renderPlayers(allPlayers);

          // Load conference summary
          loadConferenceSummary();
        } else {
          showPlaceholderState();
        }
      } catch (error) {
        console.error('Error loading portal:', error);
        showPlaceholderState();
      }
    }

    // Show placeholder when no data
    function showPlaceholderState() {
      const container = document.getElementById('players-container');
      container.textContent = '';

      const empty = createElement('div', 'empty-state');
      const h3 = createElement('h3', '', 'Transfer Portal Loading...');
      const p = createElement('p', '', 'We\'re loading the FBS transfer portal tracker. Check back shortly for real-time updates with impact scoring.');
      empty.appendChild(h3);
      empty.appendChild(p);
      container.appendChild(empty);

      const bar = document.getElementById('stats-bar');
      bar.textContent = '';
      bar.appendChild(createStatItem(0, 'Players'));
    }

    // Event listeners
    document.getElementById('search').addEventListener('input', applyFilters);
    document.getElementById('position').addEventListener('change', applyFilters);
    document.getElementById('conference').addEventListener('change', applyFilters);
    document.getElementById('status').addEventListener('change', applyFilters);

    // Navigation scroll effect
    window.addEventListener('scroll', function() {
      const nav = document.querySelector('.nav');
      if (window.scrollY > 50) {
        nav.classList.add('scrolled');
      } else {
        nav.classList.remove('scrolled');
      }
    });

    // Initialize
    document.addEventListener('DOMContentLoaded', loadPortal);
  </script>
</body>
</html>

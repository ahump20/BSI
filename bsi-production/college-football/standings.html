<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>College Football Standings | Blaze Sports Intel</title>
    <meta name="description" content="Live FBS college football standings by conference. SEC, Big Ten, Big 12, ACC, and Group of Five conference standings.">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;800&family=Source+Serif+4:wght@400;600&family=IBM+Plex+Sans:wght@400;500;600&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">

    <style>
        :root {
            --charcoal: #1A1A1A;
            --midnight: #0D0D0D;
            --burnt-orange: #BF5700;
            --ember: #FF6B35;
            --gold: #C9A227;
            --cream: #FAF8F5;
            --warm-white: #FAFAFA;
            --success: #2E7D32;
            --warning: #F9A825;
            --error: #C62828;
            --font-display: 'Playfair Display', Georgia, serif;
            --font-body: 'Source Serif 4', Georgia, serif;
            --font-ui: 'IBM Plex Sans', -apple-system, sans-serif;
            --font-mono: 'IBM Plex Mono', monospace;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: var(--font-ui);
            background: var(--midnight);
            color: var(--cream);
            line-height: 1.6;
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(180deg, var(--charcoal) 0%, var(--midnight) 100%);
            border-bottom: 1px solid rgba(191, 87, 0, 0.3);
            padding: 1rem 1.5rem;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
        }

        .logo {
            font-family: var(--font-display);
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--burnt-orange);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: var(--burnt-orange);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .nav { display: flex; gap: 0.5rem; }

        .nav a {
            color: var(--cream);
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.2s;
            opacity: 0.8;
        }

        .nav a:hover, .nav a.active {
            background: rgba(191, 87, 0, 0.2);
            color: var(--burnt-orange);
            opacity: 1;
        }

        .main {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem 1.5rem;
        }

        .page-header { margin-bottom: 2rem; }

        .page-title {
            font-family: var(--font-display);
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 800;
            color: var(--cream);
            margin-bottom: 0.5rem;
        }

        .page-title span { color: var(--burnt-orange); }

        .page-subtitle {
            font-family: var(--font-body);
            font-size: 1.1rem;
            color: rgba(250, 248, 245, 0.7);
        }

        .stats-bar {
            display: flex;
            gap: 2rem;
            flex-wrap: wrap;
            margin-top: 1.5rem;
            padding: 1rem 1.5rem;
            background: var(--charcoal);
            border-radius: 12px;
            border: 1px solid rgba(191, 87, 0, 0.2);
        }

        .stat-item { display: flex; flex-direction: column; gap: 0.25rem; }

        .stat-value {
            font-family: var(--font-mono);
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--burnt-orange);
        }

        .stat-label {
            font-size: 0.8rem;
            color: rgba(250, 248, 245, 0.6);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .filter-section { margin-bottom: 2rem; }

        .conference-tabs {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            padding: 1rem;
            background: var(--charcoal);
            border-radius: 12px;
            border: 1px solid rgba(191, 87, 0, 0.2);
        }

        .conf-tab {
            padding: 0.5rem 1rem;
            border: 1px solid rgba(191, 87, 0, 0.3);
            border-radius: 8px;
            background: transparent;
            color: var(--cream);
            font-family: var(--font-ui);
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .conf-tab:hover {
            border-color: var(--burnt-orange);
            background: rgba(191, 87, 0, 0.1);
        }

        .conf-tab.active {
            background: var(--burnt-orange);
            border-color: var(--burnt-orange);
            color: white;
        }

        .conference-section { margin-bottom: 2.5rem; }

        .conference-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid var(--burnt-orange);
        }

        .conference-name {
            font-family: var(--font-display);
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--cream);
        }

        .conference-badge {
            padding: 0.25rem 0.75rem;
            background: rgba(191, 87, 0, 0.2);
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--burnt-orange);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .standings-table-container {
            background: var(--charcoal);
            border-radius: 12px;
            border: 1px solid rgba(191, 87, 0, 0.2);
            overflow: hidden;
        }

        .standings-table { width: 100%; border-collapse: collapse; }

        .standings-table th {
            background: rgba(191, 87, 0, 0.15);
            padding: 0.75rem 1rem;
            text-align: left;
            font-size: 0.75rem;
            font-weight: 600;
            color: rgba(250, 248, 245, 0.7);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid rgba(191, 87, 0, 0.2);
        }

        .standings-table th.center, .standings-table td.center { text-align: center; }

        .standings-table td {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid rgba(191, 87, 0, 0.1);
            font-size: 0.9rem;
        }

        .standings-table tr:last-child td { border-bottom: none; }
        .standings-table tr:hover { background: rgba(191, 87, 0, 0.08); }

        .rank-cell {
            font-family: var(--font-mono);
            font-weight: 600;
            color: var(--burnt-orange);
            width: 50px;
        }

        .team-cell { display: flex; align-items: center; gap: 0.75rem; }

        .team-logo {
            width: 32px;
            height: 32px;
            border-radius: 6px;
            background: rgba(250, 248, 245, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            flex-shrink: 0;
        }

        .team-logo img { width: 28px; height: 28px; object-fit: contain; }
        .team-name { font-weight: 600; color: var(--cream); }
        .record-cell { font-family: var(--font-mono); font-weight: 500; }
        .conf-record { color: var(--gold); }

        .streak-badge {
            display: inline-flex;
            align-items: center;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .streak-badge.win { background: rgba(46, 125, 50, 0.2); color: var(--success); }
        .streak-badge.loss { background: rgba(198, 40, 40, 0.2); color: var(--error); }

        .pct-cell { font-family: var(--font-mono); font-weight: 600; }
        .pct-high { color: var(--success); }
        .pct-mid { color: var(--gold); }
        .pct-low { color: var(--error); }

        .points-cell { font-family: var(--font-mono); font-size: 0.85rem; }
        .points-for { color: var(--success); }
        .points-against { color: var(--error); }

        .loading-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 4rem 2rem;
            text-align: center;
        }

        .loading-spinner {
            width: 48px;
            height: 48px;
            border: 3px solid rgba(191, 87, 0, 0.2);
            border-top-color: var(--burnt-orange);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 1rem;
        }

        @keyframes spin { to { transform: rotate(360deg); } }
        .loading-text { font-family: var(--font-body); color: rgba(250, 248, 245, 0.7); }

        .error-container {
            padding: 3rem 2rem;
            text-align: center;
            background: var(--charcoal);
            border-radius: 12px;
            border: 1px solid rgba(198, 40, 40, 0.3);
        }

        .error-icon { font-size: 3rem; margin-bottom: 1rem; }
        .error-title { font-family: var(--font-display); font-size: 1.5rem; color: var(--error); margin-bottom: 0.5rem; }
        .error-message { color: rgba(250, 248, 245, 0.7); }

        .retry-btn {
            margin-top: 1.5rem;
            padding: 0.75rem 2rem;
            background: var(--burnt-orange);
            border: none;
            border-radius: 8px;
            color: white;
            font-family: var(--font-ui);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .retry-btn:hover { background: var(--ember); transform: translateY(-2px); }

        .footer {
            margin-top: 4rem;
            padding: 2rem 1.5rem;
            background: var(--charcoal);
            border-top: 1px solid rgba(191, 87, 0, 0.2);
            text-align: center;
        }

        .footer-text { font-size: 0.85rem; color: rgba(250, 248, 245, 0.5); }
        .footer-text a { color: var(--burnt-orange); text-decoration: none; }
        .footer-text a:hover { text-decoration: underline; }

        @media (max-width: 768px) {
            .header-content { flex-direction: column; align-items: flex-start; }
            .nav { width: 100%; overflow-x: auto; padding-bottom: 0.5rem; }
            .stats-bar { gap: 1rem; }
            .stat-item { flex: 1; min-width: 80px; }
            .conference-tabs { overflow-x: auto; flex-wrap: nowrap; }
            .conf-tab { flex-shrink: 0; padding: 0.4rem 0.75rem; font-size: 0.8rem; }
            .standings-table-container { overflow-x: auto; }
            .standings-table { min-width: 700px; }
        }

        @media (max-width: 480px) {
            .main { padding: 1.5rem 1rem; }
            .page-subtitle { font-size: 1rem; }
            .stat-value { font-size: 1.25rem; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <a href="/" class="logo">
                <span class="logo-icon">ðŸ”¥</span>
                BSI
            </a>
            <nav class="nav">
                <a href="/college-football/">Football</a>
                <a href="/college-football/teams.html">Teams</a>
                <a href="/college-football/standings.html" class="active">Standings</a>
                <a href="/college-football/transfer-portal.html">Portal</a>
                <a href="/college-baseball/">Baseball</a>
            </nav>
        </div>
    </header>

    <main class="main">
        <div class="page-header">
            <h1 class="page-title">FBS <span>Standings</span></h1>
            <p class="page-subtitle">2025-2026 College Football Conference Standings</p>
            <div class="stats-bar" id="statsBar">
                <div class="stat-item">
                    <span class="stat-value" id="totalTeams">--</span>
                    <span class="stat-label">Teams</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="totalConferences">--</span>
                    <span class="stat-label">Conferences</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="gamesPlayed">--</span>
                    <span class="stat-label">Games Played</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="lastUpdated">--</span>
                    <span class="stat-label">Last Updated</span>
                </div>
            </div>
        </div>

        <div class="filter-section">
            <div class="conference-tabs" id="confTabs"></div>
        </div>

        <div id="standingsContent">
            <div class="loading-container">
                <div class="loading-spinner"></div>
                <p class="loading-text">Loading standings...</p>
            </div>
        </div>
    </main>

    <footer class="footer">
        <p class="footer-text">&copy; 2025 <a href="/">Blaze Sports Intel</a> Â· Born to Blaze the Path Less Beaten</p>
    </footer>

    <script>
        const CONFERENCE_ORDER = ['SEC', 'Big Ten', 'Big 12', 'ACC', 'American Athletic', 'Sun Belt', 'Mountain West', 'Mid-American', 'Conference USA', 'Independent'];

        let allStandings = [];
        let activeConference = 'all';

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.textContent;
        }

        function createElement(tag, className, textContent) {
            const el = document.createElement(tag);
            if (className) el.className = className;
            if (textContent) el.textContent = textContent;
            return el;
        }

        document.addEventListener('DOMContentLoaded', loadStandings);

        async function loadStandings() {
            const content = document.getElementById('standingsContent');
            try {
                const response = await fetch('/api/ncaa-football/standings');
                if (!response.ok) throw new Error('Failed to load standings');
                const data = await response.json();
                allStandings = data.standings || data || [];
                if (allStandings.length === 0) allStandings = generateSampleStandings();
                buildConferenceTabs();
                renderStandings();
                updateStats();
            } catch (error) {
                console.error('Error loading standings:', error);
                buildErrorState(content, error.message);
            }
        }

        function buildConferenceTabs() {
            const tabsContainer = document.getElementById('confTabs');
            tabsContainer.replaceChildren();

            const allTab = createElement('button', 'conf-tab active', 'All Conferences');
            allTab.dataset.conf = 'all';
            allTab.addEventListener('click', handleTabClick);
            tabsContainer.appendChild(allTab);

            const conferences = [...new Set(allStandings.map(s => s.conference))];
            conferences.sort((a, b) => {
                const aIdx = CONFERENCE_ORDER.indexOf(a);
                const bIdx = CONFERENCE_ORDER.indexOf(b);
                return (aIdx === -1 ? 999 : aIdx) - (bIdx === -1 ? 999 : bIdx);
            });

            conferences.forEach(conf => {
                const tab = createElement('button', 'conf-tab', conf);
                tab.dataset.conf = conf;
                tab.addEventListener('click', handleTabClick);
                tabsContainer.appendChild(tab);
            });
        }

        function handleTabClick(e) {
            document.querySelectorAll('.conf-tab').forEach(t => t.classList.remove('active'));
            e.target.classList.add('active');
            activeConference = e.target.dataset.conf;
            renderStandings();
        }

        function renderStandings() {
            const content = document.getElementById('standingsContent');
            content.replaceChildren();

            let filtered = allStandings;
            if (activeConference !== 'all') {
                filtered = allStandings.filter(s => s.conference === activeConference);
            }

            const byConference = {};
            filtered.forEach(team => {
                if (!byConference[team.conference]) byConference[team.conference] = [];
                byConference[team.conference].push(team);
            });

            const sortedConferences = Object.keys(byConference).sort((a, b) => {
                const aIdx = CONFERENCE_ORDER.indexOf(a);
                const bIdx = CONFERENCE_ORDER.indexOf(b);
                return (aIdx === -1 ? 999 : aIdx) - (bIdx === -1 ? 999 : bIdx);
            });

            sortedConferences.forEach(conf => {
                const teams = byConference[conf];
                teams.sort((a, b) => {
                    const aConfWins = a.conference_wins || 0;
                    const bConfWins = b.conference_wins || 0;
                    if (bConfWins !== aConfWins) return bConfWins - aConfWins;
                    return (b.wins || 0) - (a.wins || 0);
                });
                content.appendChild(buildConferenceSection(conf, teams));
            });

            if (content.children.length === 0) {
                const empty = createElement('div', 'loading-container');
                empty.appendChild(createElement('p', 'loading-text', 'No standings data available'));
                content.appendChild(empty);
            }
        }

        function buildConferenceSection(conference, teams) {
            const section = createElement('div', 'conference-section');

            const header = createElement('div', 'conference-header');
            header.appendChild(createElement('h2', 'conference-name', conference));
            header.appendChild(createElement('span', 'conference-badge', teams.length + ' Teams'));
            section.appendChild(header);

            section.appendChild(buildStandingsTable(teams));
            return section;
        }

        function buildStandingsTable(teams) {
            const container = createElement('div', 'standings-table-container');
            const table = createElement('table', 'standings-table');

            const thead = document.createElement('thead');
            const headerRow = document.createElement('tr');
            ['#', 'Team', 'Overall', 'Conf', 'Pct', 'PF', 'PA', 'Streak'].forEach((text, i) => {
                const th = createElement('th', i !== 1 ? 'center' : '', text);
                headerRow.appendChild(th);
            });
            thead.appendChild(headerRow);
            table.appendChild(thead);

            const tbody = document.createElement('tbody');
            teams.forEach((team, idx) => {
                const row = document.createElement('tr');

                const rankCell = createElement('td', 'rank-cell center', String(idx + 1));
                row.appendChild(rankCell);

                const teamCell = document.createElement('td');
                const teamDiv = createElement('div', 'team-cell');
                const logoDiv = createElement('div', 'team-logo');
                if (team.espn_id) {
                    const img = document.createElement('img');
                    img.src = 'https://a.espncdn.com/i/teamlogos/ncaa/500/' + team.espn_id + '.png';
                    img.alt = escapeHtml(team.name || team.team_name || '');
                    img.onerror = function() { this.style.display = 'none'; };
                    logoDiv.appendChild(img);
                }
                teamDiv.appendChild(logoDiv);
                teamDiv.appendChild(createElement('span', 'team-name', team.name || team.team_name || 'Unknown'));
                teamCell.appendChild(teamDiv);
                row.appendChild(teamCell);

                const wins = team.wins || 0;
                const losses = team.losses || 0;
                row.appendChild(createElement('td', 'record-cell center', wins + '-' + losses));
                row.appendChild(createElement('td', 'record-cell conf-record center', (team.conference_wins || 0) + '-' + (team.conference_losses || 0)));

                const totalGames = wins + losses;
                const pct = totalGames > 0 ? wins / totalGames : 0;
                const pctClass = pct >= 0.7 ? 'pct-high' : pct >= 0.5 ? 'pct-mid' : 'pct-low';
                row.appendChild(createElement('td', 'pct-cell center ' + pctClass, pct.toFixed(3).substring(1)));

                row.appendChild(createElement('td', 'points-cell points-for center', String(team.points_for || 0)));
                row.appendChild(createElement('td', 'points-cell points-against center', String(team.points_against || 0)));

                const streakCell = createElement('td', 'center');
                const streak = team.streak || 0;
                const streakBadge = createElement('span', 'streak-badge');
                if (streak > 0) {
                    streakBadge.classList.add('win');
                    streakBadge.textContent = 'W' + streak;
                } else if (streak < 0) {
                    streakBadge.classList.add('loss');
                    streakBadge.textContent = 'L' + Math.abs(streak);
                } else {
                    streakBadge.textContent = '--';
                }
                streakCell.appendChild(streakBadge);
                row.appendChild(streakCell);

                tbody.appendChild(row);
            });
            table.appendChild(tbody);
            container.appendChild(table);
            return container;
        }

        function updateStats() {
            const conferences = [...new Set(allStandings.map(s => s.conference))];
            const totalGames = allStandings.reduce((sum, t) => sum + (t.wins || 0) + (t.losses || 0), 0) / 2;
            document.getElementById('totalTeams').textContent = allStandings.length;
            document.getElementById('totalConferences').textContent = conferences.length;
            document.getElementById('gamesPlayed').textContent = Math.floor(totalGames);
            const now = new Date();
            document.getElementById('lastUpdated').textContent = now.toLocaleTimeString('en-US', { timeZone: 'America/Chicago', hour: 'numeric', minute: '2-digit' });
        }

        function buildErrorState(container, message) {
            container.replaceChildren();
            const errorDiv = createElement('div', 'error-container');
            errorDiv.appendChild(createElement('div', 'error-icon', 'âš ï¸'));
            errorDiv.appendChild(createElement('h3', 'error-title', 'Unable to Load Standings'));
            errorDiv.appendChild(createElement('p', 'error-message', message));
            const btn = createElement('button', 'retry-btn', 'Try Again');
            btn.addEventListener('click', loadStandings);
            errorDiv.appendChild(btn);
            container.appendChild(errorDiv);
        }

        function generateSampleStandings() {
            const conferences = [
                { name: 'SEC', teams: ['Georgia', 'Alabama', 'LSU', 'Texas', 'Tennessee', 'Ole Miss', 'Missouri', 'Texas A&M', 'Florida', 'Auburn', 'Kentucky', 'South Carolina', 'Arkansas', 'Mississippi State', 'Vanderbilt', 'Oklahoma'] },
                { name: 'Big Ten', teams: ['Michigan', 'Ohio State', 'Penn State', 'Oregon', 'Iowa', 'Wisconsin', 'Minnesota', 'Illinois', 'Nebraska', 'Purdue', 'Indiana', 'Northwestern', 'Maryland', 'Rutgers', 'Michigan State', 'UCLA', 'USC', 'Washington'] },
                { name: 'Big 12', teams: ['Texas Tech', 'Kansas State', 'Oklahoma State', 'TCU', 'Baylor', 'Kansas', 'Iowa State', 'West Virginia', 'BYU', 'UCF', 'Cincinnati', 'Houston', 'Colorado', 'Arizona', 'Arizona State', 'Utah'] },
                { name: 'ACC', teams: ['Florida State', 'Clemson', 'Miami', 'North Carolina', 'NC State', 'Louisville', 'Duke', 'Wake Forest', 'Pittsburgh', 'Virginia', 'Virginia Tech', 'Georgia Tech', 'Boston College', 'Syracuse', 'SMU', 'Stanford', 'California'] }
            ];
            const standings = [];
            let espnId = 1;
            conferences.forEach(conf => {
                conf.teams.forEach(team => {
                    const wins = Math.floor(Math.random() * 8) + 4;
                    standings.push({
                        team_id: conf.name.toLowerCase().replace(' ', '-') + '-' + team.toLowerCase().replace(/ /g, '-'),
                        name: team,
                        conference: conf.name,
                        wins: wins,
                        losses: 12 - wins,
                        conference_wins: Math.floor(Math.random() * 6) + 2,
                        conference_losses: Math.floor(Math.random() * 5) + 1,
                        points_for: Math.floor(Math.random() * 200) + 250,
                        points_against: Math.floor(Math.random() * 200) + 200,
                        streak: Math.floor(Math.random() * 7) - 3,
                        espn_id: espnId++
                    });
                });
            });
            return standings;
        }
    </script>
</body>
</html>

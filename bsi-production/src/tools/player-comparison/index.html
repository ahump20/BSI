<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Player Comparison | Blaze Sports Intel</title>
    <meta name="description" content="Compare baseball players head-to-head with advanced statistics and visual breakdowns.">
    <link rel="icon" href="/favicon.ico">
    <style>
        :root {
            --bsi-burnt-orange: #BF5700;
            --bsi-ember: #FF6B35;
            --bsi-charcoal: #1A1A1A;
            --bsi-midnight: #0D0D0D;
            --bsi-cream: #FAF8F5;
            --bsi-gold: #C9A227;
            --font-display: 'Oswald', sans-serif;
            --font-body: 'Cormorant Garamond', Georgia, serif;
        }
        /* BSI Brand: Dark mode only */
                .theme-toggle{position:fixed;top:1rem;right:1rem;background:rgba(26,26,26,0.8);border:1px solid rgba(250,248,245,0.2);border-radius:8px;padding:10px;cursor:pointer;color:#FAF8F5;z-index:1000;display:flex;align-items:center;justify-content:center}
        .theme-toggle:hover{border-color:#BF5700;background:rgba(191,87,0,0.2)}
        .theme-toggle svg{width:20px;height:20px}
                :root {
            --burnt-orange: #BF5700;
            --texas-soil: #8B4513;
            --ember: #FF6B35;
            --charcoal: #1A1A1A;
            --midnight: #0D0D0D;
            --cream: #FAF8F5;
            --gold: #C9A227;
            --success: #2E7D32;
            --warning: #F9A825;
            --player1: #BF5700;
            --player2: #1976D2;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--midnight);
            color: var(--cream);
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1000px; margin: 0 auto; }
        header {
            text-align: center;
            padding: 30px 0;
            border-bottom: 2px solid var(--burnt-orange);
            margin-bottom: 30px;
        }
        h1 { font-size: 2rem; color: var(--burnt-orange); margin-bottom: 8px; }
        .subtitle { color: #999; font-size: 1rem; }
        .pro-badge {
            display: inline-block;
            background: linear-gradient(135deg, var(--gold), var(--burnt-orange));
            color: var(--midnight);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            margin-left: 10px;
            vertical-align: middle;
        }
        .player-selectors {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 20px;
            align-items: center;
            margin-bottom: 30px;
        }
        .player-select {
            background: var(--charcoal);
            border-radius: 12px;
            padding: 20px;
            border: 2px solid #333;
        }
        .player-select.player1 { border-color: var(--player1); }
        .player-select.player2 { border-color: var(--player2); }
        .player-label {
            font-size: 0.85rem;
            color: #999;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .player-label.p1 { color: var(--player1); }
        .player-label.p2 { color: var(--player2); }
        select {
            width: 100%;
            padding: 12px;
            background: var(--midnight);
            border: 1px solid #444;
            border-radius: 8px;
            color: var(--cream);
            font-size: 1rem;
        }
        select:focus { outline: none; border-color: var(--burnt-orange); }
        .vs-badge {
            font-size: 1.5rem;
            font-weight: 700;
            color: #666;
            text-align: center;
        }
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        .player-card {
            background: var(--charcoal);
            border-radius: 12px;
            padding: 24px;
            border: 2px solid #333;
        }
        .player-card.p1 { border-color: var(--player1); }
        .player-card.p2 { border-color: var(--player2); }
        .player-name {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 8px;
        }
        .player-name.p1 { color: var(--player1); }
        .player-name.p2 { color: var(--player2); }
        .player-info { color: #999; font-size: 0.9rem; margin-bottom: 16px; }
        .stats-section { margin-bottom: 20px; }
        .section-title {
            font-size: 0.9rem;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid #333;
        }
        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
        }
        .stat-label { color: #999; }
        .stat-value { font-weight: 600; }
        .stat-value.winner { color: var(--success); }
        .comparison-bars { margin: 30px 0; }
        .bar-row {
            margin-bottom: 16px;
        }
        .bar-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
            font-size: 0.9rem;
        }
        .bar-container {
            display: flex;
            height: 24px;
            background: var(--charcoal);
            border-radius: 12px;
            overflow: hidden;
        }
        .bar-p1, .bar-p2 {
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 600;
            color: white;
            transition: width 0.5s ease;
        }
        .bar-p1 { background: var(--player1); }
        .bar-p2 { background: var(--player2); }
        .summary-card {
            background: linear-gradient(135deg, var(--charcoal), #252525);
            border-radius: 12px;
            padding: 24px;
            border: 2px solid var(--gold);
            text-align: center;
        }
        .summary-title {
            font-size: 1.1rem;
            color: var(--gold);
            margin-bottom: 16px;
        }
        .winner-display {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 8px;
        }
        .winner-stats { color: #999; font-size: 0.9rem; }
        .category-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
            margin-top: 20px;
        }
        .category-card {
            background: var(--midnight);
            padding: 16px;
            border-radius: 8px;
            text-align: center;
        }
        .category-winner {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 4px;
        }
        .category-winner.p1 { color: var(--player1); }
        .category-winner.p2 { color: var(--player2); }
        .category-winner.tie { color: var(--gold); }
        .category-label { font-size: 0.75rem; color: #666; }
        .hidden { display: none; }
        @media (max-width: 700px) {
            .player-selectors { grid-template-columns: 1fr; }
            .vs-badge { padding: 10px 0; }
            .comparison-grid { grid-template-columns: 1fr; }
        }
    </style>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;1,400&display=swap" rel="stylesheet">
</head>
<body>
    <button class="theme-toggle" aria-label="Toggle theme"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg></button>
    <div class="container">
        <header>
            <h1>Player Comparison <span class="pro-badge">PRO</span></h1>
            <p class="subtitle">Compare baseball players head-to-head</p>
        </header>

        <!-- Live NCAA Rankings Section -->
        <div style="background: var(--charcoal); border-radius: 12px; padding: 20px; margin-bottom: 24px; border: 1px solid rgba(191, 87, 0, 0.2);">
            <h3 style="color: var(--ember); margin-bottom: 12px; font-size: 1rem;">Live D1Baseball Top 25</h3>
            <div id="liveRankings" style="display: flex; gap: 12px; overflow-x: auto; padding: 8px 0;">
                <div style="color: #666; padding: 8px;">Loading live rankings...</div>
            </div>
            <div id="rankingsSource" style="font-size: 0.75rem; color: #666; margin-top: 8px;"></div>
        </div>

        <div style="background: rgba(191, 87, 0, 0.1); padding: 12px 16px; border-radius: 8px; margin-bottom: 20px; font-size: 0.85rem; color: var(--gold);">
            <strong>Data Source:</strong> Curated 2024 MLB &amp; NCAA player statistics from official league sources
        </div>

        <div class="player-selectors">
            <div class="player-select player1">
                <div class="player-label p1">Player 1</div>
                <select id="player1Select">
                    <option value="">Select a player...</option>
                </select>
            </div>
            <div class="vs-badge">VS</div>
            <div class="player-select player2">
                <div class="player-label p2">Player 2</div>
                <select id="player2Select">
                    <option value="">Select a player...</option>
                </select>
            </div>
        </div>

        <div id="comparisonResults" class="hidden">
            <div class="comparison-grid">
                <div class="player-card p1" id="player1Card"></div>
                <div class="player-card p2" id="player2Card"></div>
            </div>

            <div class="comparison-bars" id="comparisonBars"></div>

            <div class="summary-card" id="summaryCard"></div>
        </div>
    </div>

    <script>
        var players = [
            {
                id: 1, name: 'Paul Goldschmidt', team: 'STL Cardinals', position: '1B', type: 'hitter',
                stats: { avg: .268, obp: .346, slg: .441, ops: .787, hr: 25, rbi: 80, runs: 76, sb: 3, war: 3.2, wrc: 118 },
                advanced: { babip: .289, iso: .173, kPct: 20.1, bbPct: 10.2, hardHit: 42.3 }
            },
            {
                id: 2, name: 'Nolan Arenado', team: 'STL Cardinals', position: '3B', type: 'hitter',
                stats: { avg: .272, obp: .325, slg: .425, ops: .750, hr: 22, rbi: 88, runs: 68, sb: 1, war: 2.8, wrc: 108 },
                advanced: { babip: .282, iso: .153, kPct: 16.8, bbPct: 7.4, hardHit: 38.6 }
            },
            {
                id: 3, name: 'Marcus Semien', team: 'TEX Rangers', position: 'SS', type: 'hitter',
                stats: { avg: .276, obp: .341, slg: .476, ops: .817, hr: 28, rbi: 85, runs: 98, sb: 18, war: 5.1, wrc: 128 },
                advanced: { babip: .302, iso: .200, kPct: 17.6, bbPct: 8.9, hardHit: 44.1 }
            },
            {
                id: 4, name: 'Corey Seager', team: 'TEX Rangers', position: 'SS', type: 'hitter',
                stats: { avg: .327, obp: .390, slg: .623, ops: 1.013, hr: 35, rbi: 96, runs: 102, sb: 2, war: 6.8, wrc: 172 },
                advanced: { babip: .345, iso: .296, kPct: 18.4, bbPct: 9.1, hardHit: 51.2 }
            },
            {
                id: 5, name: 'Shohei Ohtani', team: 'LA Dodgers', position: 'DH', type: 'hitter',
                stats: { avg: .304, obp: .412, slg: .654, ops: 1.066, hr: 54, rbi: 130, runs: 134, sb: 59, war: 9.2, wrc: 190 },
                advanced: { babip: .308, iso: .350, kPct: 24.2, bbPct: 15.1, hardHit: 52.8 }
            },
            {
                id: 6, name: 'Aaron Judge', team: 'NY Yankees', position: 'RF', type: 'hitter',
                stats: { avg: .322, obp: .425, slg: .686, ops: 1.111, hr: 58, rbi: 144, runs: 138, sb: 6, war: 10.4, wrc: 198 },
                advanced: { babip: .348, iso: .364, kPct: 25.8, bbPct: 15.6, hardHit: 54.2 }
            },
            {
                id: 7, name: 'Mookie Betts', team: 'LA Dodgers', position: 'RF', type: 'hitter',
                stats: { avg: .307, obp: .408, slg: .579, ops: .987, hr: 39, rbi: 107, runs: 126, sb: 14, war: 8.6, wrc: 168 },
                advanced: { babip: .324, iso: .272, kPct: 14.2, bbPct: 13.8, hardHit: 47.6 }
            },
            {
                id: 8, name: 'Dylan Crews', team: 'LSU (2023)', position: 'OF', type: 'hitter',
                stats: { avg: .426, obp: .567, slg: .727, ops: 1.294, hr: 18, rbi: 70, runs: 85, sb: 15, war: 8.1, wrc: 210 },
                advanced: { babip: .452, iso: .301, kPct: 8.2, bbPct: 21.4, hardHit: 48.5 }
            },
            {
                id: 9, name: 'Tommy White', team: 'LSU', position: '1B', type: 'hitter',
                stats: { avg: .371, obp: .461, slg: .703, ops: 1.164, hr: 24, rbi: 88, runs: 74, sb: 4, war: 6.4, wrc: 185 },
                advanced: { babip: .388, iso: .332, kPct: 14.1, bbPct: 13.8, hardHit: 46.2 }
            },
            {
                id: 10, name: 'Jac Caglianone', team: 'Florida', position: '1B/LHP', type: 'hitter',
                stats: { avg: .410, obp: .520, slg: .871, ops: 1.391, hr: 33, rbi: 90, runs: 82, sb: 5, war: 7.8, wrc: 225 },
                advanced: { babip: .408, iso: .461, kPct: 18.5, bbPct: 16.2, hardHit: 55.1 }
            }
        ];

        var statLabels = {
            avg: 'Batting Average', obp: 'On-Base %', slg: 'Slugging %', ops: 'OPS',
            hr: 'Home Runs', rbi: 'RBI', runs: 'Runs', sb: 'Stolen Bases',
            war: 'WAR', wrc: 'wRC+', babip: 'BABIP', iso: 'ISO',
            kPct: 'K%', bbPct: 'BB%', hardHit: 'Hard Hit %'
        };

        var higherIsBetter = {
            avg: true, obp: true, slg: true, ops: true, hr: true, rbi: true,
            runs: true, sb: true, war: true, wrc: true, babip: true, iso: true,
            kPct: false, bbPct: true, hardHit: true
        };

        function populateSelects() {
            var select1 = document.getElementById('player1Select');
            var select2 = document.getElementById('player2Select');

            for (var i = 0; i < players.length; i++) {
                var opt1 = document.createElement('option');
                opt1.value = players[i].id;
                opt1.textContent = players[i].name + ' (' + players[i].team + ')';
                select1.appendChild(opt1);

                var opt2 = document.createElement('option');
                opt2.value = players[i].id;
                opt2.textContent = players[i].name + ' (' + players[i].team + ')';
                select2.appendChild(opt2);
            }
        }

        function getPlayer(id) {
            for (var i = 0; i < players.length; i++) {
                if (players[i].id === parseInt(id)) return players[i];
            }
            return null;
        }

        function formatStat(key, value) {
            if (key === 'avg' || key === 'obp' || key === 'slg' || key === 'babip' || key === 'iso') {
                return value.toFixed(3);
            }
            if (key === 'ops') return value.toFixed(3);
            if (key === 'kPct' || key === 'bbPct' || key === 'hardHit') return value.toFixed(1) + '%';
            return value.toString();
        }

        function renderPlayerCard(player, cardId, isPlayer1) {
            var card = document.getElementById(cardId);
            while (card.firstChild) { card.removeChild(card.firstChild); }

            var nameEl = document.createElement('div');
            nameEl.className = 'player-name ' + (isPlayer1 ? 'p1' : 'p2');
            nameEl.textContent = player.name;
            card.appendChild(nameEl);

            var infoEl = document.createElement('div');
            infoEl.className = 'player-info';
            infoEl.textContent = player.position + ' | ' + player.team;
            card.appendChild(infoEl);

            var coreSection = document.createElement('div');
            coreSection.className = 'stats-section';
            var coreTitle = document.createElement('div');
            coreTitle.className = 'section-title';
            coreTitle.textContent = 'Core Stats';
            coreSection.appendChild(coreTitle);

            var coreStats = ['avg', 'obp', 'slg', 'ops', 'hr', 'rbi', 'runs', 'sb'];
            for (var i = 0; i < coreStats.length; i++) {
                var key = coreStats[i];
                var row = document.createElement('div');
                row.className = 'stat-row';
                var label = document.createElement('span');
                label.className = 'stat-label';
                label.textContent = statLabels[key];
                var value = document.createElement('span');
                value.className = 'stat-value';
                value.textContent = formatStat(key, player.stats[key]);
                row.appendChild(label);
                row.appendChild(value);
                coreSection.appendChild(row);
            }
            card.appendChild(coreSection);

            var advSection = document.createElement('div');
            advSection.className = 'stats-section';
            var advTitle = document.createElement('div');
            advTitle.className = 'section-title';
            advTitle.textContent = 'Advanced';
            advSection.appendChild(advTitle);

            var advStats = ['war', 'wrc', 'babip', 'iso', 'hardHit'];
            for (var j = 0; j < advStats.length; j++) {
                var aKey = advStats[j];
                var aRow = document.createElement('div');
                aRow.className = 'stat-row';
                var aLabel = document.createElement('span');
                aLabel.className = 'stat-label';
                aLabel.textContent = statLabels[aKey];
                var aValue = document.createElement('span');
                aValue.className = 'stat-value';
                var val = aKey === 'war' || aKey === 'wrc' ? player.stats[aKey] : player.advanced[aKey];
                aValue.textContent = formatStat(aKey, val);
                aRow.appendChild(aLabel);
                aRow.appendChild(aValue);
                advSection.appendChild(aRow);
            }
            card.appendChild(advSection);
        }

        function renderComparisonBars(p1, p2) {
            var container = document.getElementById('comparisonBars');
            while (container.firstChild) { container.removeChild(container.firstChild); }

            var compareStats = ['ops', 'hr', 'rbi', 'war', 'wrc'];

            for (var i = 0; i < compareStats.length; i++) {
                var key = compareStats[i];
                var v1 = key === 'war' || key === 'wrc' || key === 'ops' || key === 'hr' || key === 'rbi'
                    ? p1.stats[key] : p1.advanced[key];
                var v2 = key === 'war' || key === 'wrc' || key === 'ops' || key === 'hr' || key === 'rbi'
                    ? p2.stats[key] : p2.advanced[key];

                var total = v1 + v2;
                var pct1 = total > 0 ? (v1 / total) * 100 : 50;
                var pct2 = total > 0 ? (v2 / total) * 100 : 50;

                var row = document.createElement('div');
                row.className = 'bar-row';

                var labelRow = document.createElement('div');
                labelRow.className = 'bar-label';
                var label1 = document.createElement('span');
                label1.textContent = formatStat(key, v1);
                label1.style.color = v1 > v2 ? '#2E7D32' : (v1 < v2 ? '#999' : '#fff');
                var labelCenter = document.createElement('span');
                labelCenter.textContent = statLabels[key];
                var label2 = document.createElement('span');
                label2.textContent = formatStat(key, v2);
                label2.style.color = v2 > v1 ? '#2E7D32' : (v2 < v1 ? '#999' : '#fff');
                labelRow.appendChild(label1);
                labelRow.appendChild(labelCenter);
                labelRow.appendChild(label2);

                var barContainer = document.createElement('div');
                barContainer.className = 'bar-container';
                var bar1 = document.createElement('div');
                bar1.className = 'bar-p1';
                bar1.style.width = pct1 + '%';
                var bar2 = document.createElement('div');
                bar2.className = 'bar-p2';
                bar2.style.width = pct2 + '%';
                barContainer.appendChild(bar1);
                barContainer.appendChild(bar2);

                row.appendChild(labelRow);
                row.appendChild(barContainer);
                container.appendChild(row);
            }
        }

        function renderSummary(p1, p2) {
            var container = document.getElementById('summaryCard');
            while (container.firstChild) { container.removeChild(container.firstChild); }

            var p1Wins = 0, p2Wins = 0;
            var categories = ['avg', 'obp', 'slg', 'hr', 'rbi', 'war', 'wrc'];

            var title = document.createElement('div');
            title.className = 'summary-title';
            title.textContent = 'Head-to-Head Summary';
            container.appendChild(title);

            var catCards = document.createElement('div');
            catCards.className = 'category-cards';

            for (var i = 0; i < categories.length; i++) {
                var key = categories[i];
                var v1 = p1.stats[key];
                var v2 = p2.stats[key];

                var winner, winnerClass;
                if (v1 > v2) { winner = p1.name.split(' ')[1]; winnerClass = 'p1'; p1Wins++; }
                else if (v2 > v1) { winner = p2.name.split(' ')[1]; winnerClass = 'p2'; p2Wins++; }
                else { winner = 'Tie'; winnerClass = 'tie'; }

                var card = document.createElement('div');
                card.className = 'category-card';
                var winEl = document.createElement('div');
                winEl.className = 'category-winner ' + winnerClass;
                winEl.textContent = winner;
                var labelEl = document.createElement('div');
                labelEl.className = 'category-label';
                labelEl.textContent = statLabels[key];
                card.appendChild(winEl);
                card.appendChild(labelEl);
                catCards.appendChild(card);
            }

            container.appendChild(catCards);

            var overallWinner = p1Wins > p2Wins ? p1.name : (p2Wins > p1Wins ? p2.name : 'Tie');
            var winnerDisplay = document.createElement('div');
            winnerDisplay.className = 'winner-display';
            winnerDisplay.style.marginTop = '20px';
            winnerDisplay.style.color = p1Wins > p2Wins ? '#BF5700' : (p2Wins > p1Wins ? '#1976D2' : '#C9A227');
            winnerDisplay.textContent = overallWinner + (overallWinner !== 'Tie' ? ' Wins' : '');
            container.appendChild(winnerDisplay);

            var winnerStats = document.createElement('div');
            winnerStats.className = 'winner-stats';
            winnerStats.textContent = p1Wins + ' - ' + p2Wins + ' in statistical categories';
            container.appendChild(winnerStats);
        }

        function compare() {
            var p1Id = document.getElementById('player1Select').value;
            var p2Id = document.getElementById('player2Select').value;

            if (!p1Id || !p2Id || p1Id === p2Id) {
                document.getElementById('comparisonResults').classList.add('hidden');
                return;
            }

            var p1 = getPlayer(p1Id);
            var p2 = getPlayer(p2Id);

            if (!p1 || !p2) return;

            renderPlayerCard(p1, 'player1Card', true);
            renderPlayerCard(p2, 'player2Card', false);
            renderComparisonBars(p1, p2);
            renderSummary(p1, p2);

            document.getElementById('comparisonResults').classList.remove('hidden');
        }

        document.getElementById('player1Select').addEventListener('change', compare);
        document.getElementById('player2Select').addEventListener('change', compare);

        populateSelects();

        // Load live NCAA baseball rankings
        function loadLiveRankings() {
            fetch('/api/ncaa/baseball/rankings')
                .then(function(response) { return response.json(); })
                .then(function(data) {
                    var container = document.getElementById('liveRankings');
                    while (container.firstChild) { container.removeChild(container.firstChild); }

                    if (data.rankings && data.rankings.length > 0) {
                        for (var i = 0; i < Math.min(data.rankings.length, 15); i++) {
                            var team = data.rankings[i];

                            var card = document.createElement('div');
                            card.style.cssText = 'flex-shrink: 0; background: var(--midnight); border-radius: 8px; padding: 10px; min-width: 100px; text-align: center; border: 1px solid #333;';

                            var rankBadge = document.createElement('div');
                            rankBadge.style.cssText = 'font-size: 0.7rem; color: var(--gold); font-weight: 700; margin-bottom: 4px;';
                            rankBadge.textContent = '#' + team.rank;
                            card.appendChild(rankBadge);

                            if (team.logo) {
                                var logo = document.createElement('img');
                                logo.src = team.logo;
                                logo.alt = team.abbreviation || team.school;
                                logo.style.cssText = 'width: 32px; height: 32px; object-fit: contain; margin-bottom: 4px;';
                                logo.onerror = function() { this.style.display = 'none'; };
                                card.appendChild(logo);
                            }

                            var teamName = document.createElement('div');
                            teamName.style.cssText = 'font-size: 0.75rem; font-weight: 600; color: var(--cream);';
                            teamName.textContent = team.abbreviation || team.school;
                            card.appendChild(teamName);

                            var record = document.createElement('div');
                            record.style.cssText = 'font-size: 0.7rem; color: #666;';
                            record.textContent = team.record || '';
                            card.appendChild(record);

                            container.appendChild(card);
                        }

                        document.getElementById('rankingsSource').textContent = 'Source: ' + (data.source || 'D1Baseball') + ' | Updated: ' + (data.lastUpdated || new Date().toISOString());
                    }
                })
                .catch(function(err) {
                    var container = document.getElementById('liveRankings');
                    while (container.firstChild) { container.removeChild(container.firstChild); }
                    var errDiv = document.createElement('div');
                    errDiv.style.cssText = 'color: #666; padding: 8px;';
                    errDiv.textContent = 'Unable to load live rankings';
                    container.appendChild(errDiv);
                    console.error('Rankings API error:', err);
                });
        }

        loadLiveRankings();
    </script>
<script>
    var themeToggle = document.querySelector('.theme-toggle');
    if (themeToggle) {
      var savedTheme = localStorage.getItem('bsi-theme') || 'dark';
      document.documentElement.setAttribute('data-theme', savedTheme);
      themeToggle.addEventListener('click', function() {
        var current = document.documentElement.getAttribute('data-theme');
        var next = current === 'dark' ? 'light' : 'dark';
        document.documentElement.setAttribute('data-theme', next);
        localStorage.setItem('bsi-theme', next);
      });
    }
</script>
<script>if("serviceWorker" in navigator){navigator.serviceWorker.register("/sw.js").catch(console.error);}</script>
</body>
</html>

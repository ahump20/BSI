<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blaze Sports Intel - REAL Data (No Fake Analytics)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 40px 0;
            border-bottom: 2px solid rgba(255,255,255,0.2);
            margin-bottom: 40px;
        }

        h1 {
            font-size: 3em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ff6b00, #ffa500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            font-size: 1.2em;
            color: #ffa500;
            margin-bottom: 20px;
        }

        .disclaimer {
            background: rgba(255,0,0,0.2);
            border: 2px solid #ff0000;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            font-size: 14px;
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }

        .card {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .card h2 {
            margin-bottom: 20px;
            color: #ffa500;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .status {
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 4px;
            background: rgba(0,255,0,0.2);
            color: #00ff00;
        }

        .status.error {
            background: rgba(255,0,0,0.2);
            color: #ff0000;
        }

        .status.loading {
            background: rgba(255,255,0,0.2);
            color: #ffff00;
        }

        .data-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .data-row:last-child {
            border-bottom: none;
        }

        .label {
            color: rgba(255,255,255,0.7);
        }

        .value {
            font-weight: bold;
        }

        .source {
            font-size: 11px;
            color: rgba(255,255,255,0.5);
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        button {
            background: linear-gradient(45deg, #ff6b00, #ffa500);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px;
            transition: transform 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .api-test {
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .api-test h3 {
            color: #ffa500;
            margin-bottom: 15px;
        }

        .endpoint {
            background: rgba(255,255,255,0.1);
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-family: monospace;
        }

        .result {
            background: rgba(0,255,0,0.1);
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }

        .result.error {
            background: rgba(255,0,0,0.1);
        }

        .no-random {
            background: rgba(0,255,0,0.3);
            border: 2px solid #00ff00;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            margin: 20px 0;
        }

        .no-random h3 {
            color: #00ff00;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üî• Blaze Sports Intel</h1>
            <div class="subtitle">REAL Data Implementation - No Fake Analytics</div>

            <div class="disclaimer">
                <strong>‚ö†Ô∏è TRANSPARENCY NOTICE:</strong><br>
                This version uses REAL external APIs and database connections.<br>
                NO Math.random() ‚Ä¢ NO hardcoded data ‚Ä¢ NO fake statistics<br>
                All data comes from: MLB Stats API, ESPN API, or PostgreSQL database
            </div>

            <div class="no-random">
                <h3>‚úÖ NO RANDOM NUMBERS IN THIS VERSION</h3>
                <p>Every number on this page comes from:</p>
                <ul style="list-style: none; padding: 10px 0;">
                    <li>‚Ä¢ Real MLB Stats API (statsapi.mlb.com)</li>
                    <li>‚Ä¢ Real ESPN API (site.api.espn.com)</li>
                    <li>‚Ä¢ Real PostgreSQL database</li>
                    <li>‚Ä¢ Real calculations (Pythagorean, Elo formulas)</li>
                </ul>
            </div>
        </header>

        <div class="api-test">
            <h3>üß™ Test Real APIs</h3>
            <p>Click to fetch REAL data from external sources:</p>

            <div>
                <button onclick="testMLBAPI()">Test MLB Stats API</button>
                <button onclick="testNFLAPI()">Test ESPN NFL API</button>
                <button onclick="testLiveScores()">Test Live Scores</button>
                <button onclick="testDatabase()">Test Database</button>
            </div>

            <div id="apiResults"></div>
        </div>

        <div class="dashboard" id="dashboard">
            <!-- Cards will be populated by JavaScript -->
        </div>
    </div>

    <script>
        // NO MATH.RANDOM() IN THIS FILE - ALL REAL DATA

        const API_BASE = 'http://localhost:3000/api';
        const CF_API_BASE = '/api/sports-data-real';

        // Test MLB Stats API
        async function testMLBAPI() {
            showLoading('Testing MLB Stats API...');
            try {
                // Try local server first
                let response = await fetch(`${API_BASE}/mlb/138`);
                let data = await response.json();

                if (!data.success) {
                    // Fallback to Cloudflare function
                    response = await fetch(`${CF_API_BASE}/mlb`);
                    data = await response.json();
                }

                showResult('MLB API Result', data);
                updateCard('mlb', data);
            } catch (error) {
                showError('MLB API Error', error.message);
            }
        }

        // Test NFL ESPN API
        async function testNFLAPI() {
            showLoading('Testing ESPN NFL API...');
            try {
                let response = await fetch(`${API_BASE}/nfl/10`);
                let data = await response.json();

                if (!data.success) {
                    response = await fetch(`${CF_API_BASE}/nfl`);
                    data = await response.json();
                }

                showResult('NFL API Result', data);
                updateCard('nfl', data);
            } catch (error) {
                showError('NFL API Error', error.message);
            }
        }

        // Test Live Scores
        async function testLiveScores() {
            showLoading('Testing Live Scores API...');
            try {
                let response = await fetch(`${API_BASE}/live-scores/mlb`);
                let data = await response.json();

                if (!data.success) {
                    response = await fetch(`${CF_API_BASE}/live-scores`);
                    data = await response.json();
                }

                showResult('Live Scores Result', data);
                updateCard('scores', data);
            } catch (error) {
                showError('Live Scores Error', error.message);
            }
        }

        // Test Database
        async function testDatabase() {
            showLoading('Testing Database Connection...');
            try {
                const response = await fetch(`${API_BASE}/teams`);
                const data = await response.json();
                showResult('Database Result', data);
                updateCard('database', data);
            } catch (error) {
                showError('Database Error', error.message);
            }
        }

        // Display functions
        function showLoading(message) {
            const results = document.getElementById('apiResults');
            results.innerHTML = `
                <div class="endpoint">
                    <div class="status loading">LOADING</div>
                    ${message}
                </div>
            `;
        }

        function showResult(title, data) {
            const results = document.getElementById('apiResults');
            results.innerHTML = `
                <div class="endpoint">
                    <strong>${title}:</strong>
                    <div class="result">
                        ${JSON.stringify(data, null, 2)}
                    </div>
                    <div class="source">Data Source: ${data.dataSource || 'External API'}</div>
                </div>
            `;
        }

        function showError(title, error) {
            const results = document.getElementById('apiResults');
            results.innerHTML = `
                <div class="endpoint">
                    <strong>${title}:</strong>
                    <div class="result error">
                        Error: ${error}
                    </div>
                </div>
            `;
        }

        // Update dashboard cards with real data
        function updateCard(type, data) {
            let cardHTML = '';

            if (type === 'mlb' && data.team) {
                cardHTML = `
                    <div class="card">
                        <h2>
                            ‚öæ MLB - Cardinals
                            <span class="status">REAL DATA</span>
                        </h2>
                        <div class="data-row">
                            <span class="label">Team:</span>
                            <span class="value">${data.team.name || 'Loading...'}</span>
                        </div>
                        <div class="data-row">
                            <span class="label">Division:</span>
                            <span class="value">${data.team.division?.name || 'Loading...'}</span>
                        </div>
                        ${data.analytics?.pythagorean ? `
                        <div class="data-row">
                            <span class="label">Pythagorean Wins:</span>
                            <span class="value">${data.analytics.pythagorean.expectedWins}</span>
                        </div>
                        <div class="data-row">
                            <span class="label">Win %:</span>
                            <span class="value">${data.analytics.pythagorean.winPercentage}</span>
                        </div>
                        ` : ''}
                        <div class="source">Source: MLB Stats API</div>
                    </div>
                `;
            } else if (type === 'nfl' && data.team) {
                cardHTML = `
                    <div class="card">
                        <h2>
                            üèà NFL - Titans
                            <span class="status">REAL DATA</span>
                        </h2>
                        <div class="data-row">
                            <span class="label">Team:</span>
                            <span class="value">${data.team.displayName || 'Loading...'}</span>
                        </div>
                        <div class="data-row">
                            <span class="label">Record:</span>
                            <span class="value">${data.team.record || 'N/A'}</span>
                        </div>
                        <div class="source">Source: ESPN API</div>
                    </div>
                `;
            } else if (type === 'scores' && data.games) {
                cardHTML = `
                    <div class="card">
                        <h2>
                            üìä Live Scores
                            <span class="status">LIVE</span>
                        </h2>
                        <div style="max-height: 300px; overflow-y: auto;">
                            ${data.games.slice(0, 3).map(game => `
                                <div class="data-row">
                                    <span class="label">${game.away?.team || 'TBD'}</span>
                                    <span class="value">${game.away?.score || '0'} - ${game.home?.score || '0'}</span>
                                </div>
                            `).join('')}
                        </div>
                        <div class="source">Source: ESPN Scoreboard API</div>
                    </div>
                `;
            } else if (type === 'database' && data.teams) {
                cardHTML = `
                    <div class="card">
                        <h2>
                            üóÑÔ∏è Database
                            <span class="status">CONNECTED</span>
                        </h2>
                        <div class="data-row">
                            <span class="label">Teams in DB:</span>
                            <span class="value">${data.count}</span>
                        </div>
                        ${data.teams.slice(0, 3).map(team => `
                            <div class="data-row">
                                <span class="label">${team.sport}:</span>
                                <span class="value">${team.name}</span>
                            </div>
                        `).join('')}
                        <div class="source">Source: PostgreSQL Database</div>
                    </div>
                `;
            }

            // Add or update card in dashboard
            const dashboard = document.getElementById('dashboard');
            const existingCard = document.getElementById(`card-${type}`);

            if (existingCard) {
                existingCard.outerHTML = `<div id="card-${type}">${cardHTML}</div>`;
            } else {
                dashboard.innerHTML += `<div id="card-${type}">${cardHTML}</div>`;
            }
        }

        // Initialize with message
        document.addEventListener('DOMContentLoaded', () => {
            const dashboard = document.getElementById('dashboard');
            dashboard.innerHTML = `
                <div class="card">
                    <h2>üëÜ Click the Test Buttons Above</h2>
                    <p>This page fetches REAL data from:</p>
                    <ul style="list-style: none; padding: 10px 0;">
                        <li>‚úÖ MLB Stats API (no authentication required)</li>
                        <li>‚úÖ ESPN API (public endpoints)</li>
                        <li>‚úÖ PostgreSQL database (if running locally)</li>
                    </ul>
                    <p style="margin-top: 15px;">
                        <strong>NO Math.random() used anywhere!</strong>
                    </p>
                </div>
            `;
        });
    </script>
</body>
</html>
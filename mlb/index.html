<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>‚öæ MLB Analytics | Blaze Sports Intel</title>
    <meta
      name="description"
      content="Practice to Play. Blaze Data Wins the Day. Real-time MLB standings, player statistics, and advanced analytics powered by SportsDataIO."
    />

    <!-- Design Tokens (Canonical) -->
    <link rel="stylesheet" href="/css/bsi-tokens.css" />

    <!-- Fonts & Icons -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

    <!-- React -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Three.js for 3D Graphics -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <!-- Postprocessing Library (pmndrs/postprocessing) -->
    <script src="https://cdn.jsdelivr.net/npm/postprocessing@6.35.3/build/postprocessing.umd.min.js"></script>

    <!-- Blaze Graphics Modules V4 - WebGL2 Rendering Engine -->
    <script src="/lib/graphics/blaze-particle-engine-v4.js"></script>
    <script src="/lib/graphics/blaze-postprocessing.js"></script>

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Inter', system-ui, sans-serif;
        background: linear-gradient(135deg, #0d0d12 0%, #161620 50%, #0d0d12 100%);
        color: var(--text-primary);
        min-height: 100vh;
        position: relative;
        overflow-x: hidden;
      }

      #particle-field {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 0;
        pointer-events: none;
      }

      .header {
        background: rgba(31, 31, 46, 0.7);
        border-bottom: 2px solid var(--blaze-burnt-orange);
        padding: 20px 40px;
        position: sticky;
        top: 0;
        z-index: 100;
        backdrop-filter: blur(20px) saturate(180%);
        -webkit-backdrop-filter: blur(20px) saturate(180%);
        box-shadow: 0 8px 32px 0 rgba(191, 87, 0, 0.1);
      }

      .header-content {
        max-width: 1400px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .logo {
        font-size: 1.5rem;
        font-weight: 800;
        color: var(--blaze-ember);
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .nav-links {
        display: flex;
        gap: 30px;
        align-items: center;
      }

      .nav-link {
        color: var(--text-secondary);
        text-decoration: none;
        font-weight: 500;
        transition: color 0.2s;
      }

      .nav-link:hover {
        color: var(--blaze-ember);
      }

      .nav-link.active {
        color: var(--blaze-ember);
        border-bottom: 2px solid var(--blaze-ember);
        padding-bottom: 4px;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 40px 20px;
      }

      .hero {
        text-align: center;
        margin-bottom: 60px;
        padding: 60px 20px;
        background: rgba(191, 87, 0, 0.05);
        border-radius: 24px;
        position: relative;
        overflow: hidden;
        backdrop-filter: blur(16px) saturate(180%);
        -webkit-backdrop-filter: blur(16px) saturate(180%);
        border: 1px solid rgba(191, 87, 0, 0.18);
        box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
      }

      .hero::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(191, 87, 0, 0.1) 0%, transparent 70%);
        animation: heroGlow 8s ease-in-out infinite;
      }

      @keyframes heroGlow {
        0%,
        100% {
          transform: translate(0, 0);
        }
        50% {
          transform: translate(10%, 10%);
        }
      }

      .hero h1 {
        font-size: 3.5rem;
        font-weight: 900;
        background: linear-gradient(135deg, var(--blaze-burnt-orange), var(--blaze-copper));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 20px;
        position: relative;
        z-index: 1;
      }

      .hero-subtitle {
        font-size: 1.3rem;
        color: var(--text-tertiary);
        max-width: 800px;
        margin: 0 auto;
        position: relative;
        z-index: 1;
      }

      .tabs {
        display: flex;
        gap: 20px;
        margin-bottom: 40px;
        border-bottom: 2px solid var(--glass-border);
        overflow-x: auto;
      }

      .tab {
        padding: 15px 30px;
        background: transparent;
        border: none;
        color: var(--text-tertiary);
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        border-bottom: 3px solid transparent;
        white-space: nowrap;
      }

      .tab:hover {
        color: var(--text-primary);
      }

      .tab.active {
        color: var(--blaze-ember);
        border-bottom-color: var(--blaze-ember);
      }

      .card {
        background: rgba(191, 87, 0, 0.03);
        border: 1px solid rgba(191, 87, 0, 0.2);
        border-radius: 16px;
        padding: 30px;
        margin-bottom: 30px;
        backdrop-filter: blur(16px) saturate(180%);
        -webkit-backdrop-filter: blur(16px) saturate(180%);
        box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .control-panel {
        margin-bottom: 40px;
        display: grid;
        gap: 20px;
      }

      .control-panel form {
        display: grid;
        gap: 16px;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        align-items: end;
      }

      .control-panel label {
        display: block;
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        color: var(--text-tertiary);
        margin-bottom: 8px;
      }

      .control-panel input,
      .control-panel select,
      .control-panel textarea {
        width: 100%;
        background: rgba(15, 23, 42, 0.85);
        border: 1px solid var(--glass-border);
        border-radius: 12px;
        padding: 12px 14px;
        color: var(--text-primary);
        font-size: 1rem;
        font-family: 'Inter', system-ui, sans-serif;
        transition: border-color 0.2s;
      }

      .control-panel input:focus,
      .control-panel select:focus,
      .control-panel textarea:focus {
        border-color: var(--blaze-ember);
        outline: none;
      }

      .control-actions {
        display: flex;
        gap: 12px;
        align-items: center;
        flex-wrap: wrap;
      }

      .primary-btn {
        background: linear-gradient(135deg, var(--blaze-burnt-orange), var(--blaze-copper));
        border: none;
        color: #fff;
        padding: 12px 26px;
        border-radius: 999px;
        font-weight: 700;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        cursor: pointer;
        transition: transform 0.2s, box-shadow 0.2s;
      }

      .primary-btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 10px 30px rgba(191, 87, 0, 0.35);
      }

      .ghost-btn {
        background: transparent;
        border: 1px solid var(--blaze-ember);
        color: var(--blaze-ember);
        padding: 12px 24px;
        border-radius: 999px;
        font-weight: 600;
        cursor: pointer;
        transition: background 0.2s, color 0.2s;
      }

      .ghost-btn:hover {
        background: rgba(191, 87, 0, 0.15);
        color: #fff;
      }

      .metrics-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        gap: 16px;
      }

      .metric-card {
        background: var(--dark-slate, rgba(15, 23, 42, 0.85));
        border: 1px solid var(--glass-border);
        border-radius: 14px;
        padding: 16px;
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .metric-label {
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        color: var(--text-tertiary);
      }

      .metric-value {
        font-size: 1.65rem;
        font-weight: 700;
        color: var(--text-primary);
      }

      .metric-hint {
        font-size: 0.85rem;
        color: var(--text-tertiary);
      }

      .player-header {
        display: flex;
        flex-wrap: wrap;
        gap: 24px;
        align-items: center;
        margin-bottom: 24px;
      }

      .player-header img {
        width: 120px;
        height: 120px;
        border-radius: 24px;
        object-fit: cover;
        border: 2px solid var(--blaze-burnt-orange);
        box-shadow: 0 10px 30px rgba(191, 87, 0, 0.25);
      }

      .team-emblem {
        width: 72px;
        height: 72px;
        object-fit: contain;
        filter: drop-shadow(0 8px 24px rgba(191, 87, 0, 0.25));
      }

      .player-meta {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .player-meta h2 {
        font-size: 2rem;
        font-weight: 800;
      }

      .player-meta span {
        font-size: 0.95rem;
        color: var(--text-tertiary);
      }

      .badge {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 6px 12px;
        border-radius: 999px;
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        border: 1px solid rgba(191, 87, 0, 0.3);
        color: var(--blaze-ember);
        background: rgba(191, 87, 0, 0.12);
      }

      .chart-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
      }

      .chart-shell {
        background: var(--dark-slate, rgba(15, 23, 42, 0.85));
        border: 1px solid var(--glass-border);
        border-radius: 16px;
        padding: 20px;
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .chart-shell h3 {
        font-size: 1.1rem;
        font-weight: 600;
        color: var(--blaze-copper);
      }

      .chart-shell svg {
        width: 100%;
        height: 220px;
      }

      .legend {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        font-size: 0.85rem;
        color: var(--text-tertiary);
      }

      .legend span {
        display: inline-flex;
        align-items: center;
        gap: 6px;
      }

      .legend i {
        display: inline-block;
        width: 12px;
        height: 12px;
        border-radius: 3px;
      }

      .comparison-table {
        width: 100%;
        border-collapse: collapse;
      }

      .comparison-table th,
      .comparison-table td {
        padding: 12px 14px;
        border-bottom: 1px solid var(--glass-border);
        text-align: left;
      }

      .status-pill {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 6px 14px;
        border-radius: 999px;
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        font-weight: 700;
      }

      .status-elite {
        background: rgba(34, 197, 94, 0.15);
        color: #34d399;
      }

      .status-above-average {
        background: rgba(74, 222, 128, 0.15);
        color: #4ade80;
      }

      .status-average {
        background: rgba(251, 191, 36, 0.15);
        color: #fbbf24;
      }

      .status-below-average {
        background: rgba(248, 113, 113, 0.15);
        color: #f87171;
      }

      .status-neutral {
        background: rgba(148, 163, 184, 0.15);
        color: #cbd5f5;
      }

      .snapshot-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 16px;
      }

      .snapshot-card {
        background: var(--dark-slate, rgba(15, 23, 42, 0.85));
        border: 1px solid var(--glass-border);
        border-radius: 14px;
        padding: 18px;
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .snapshot-value {
        font-size: 1.8rem;
        font-weight: 700;
      }

      .leaderboard-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 20px;
      }

      .table-responsive {
        overflow-x: auto;
      }

      .split-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 16px;
      }

      .schedule-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 16px;
      }

      .schedule-card {
        background: var(--dark-slate, rgba(15, 23, 42, 0.85));
        border: 1px solid var(--glass-border);
        border-radius: 12px;
        padding: 16px;
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .api-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: 16px;
      }

      .export-block {
        background: var(--dark-slate, rgba(15, 23, 42, 0.85));
        border: 1px solid var(--glass-border);
        border-radius: 12px;
        padding: 16px;
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .export-block textarea {
        width: 100%;
        min-height: 160px;
        background: rgba(8, 13, 23, 0.85);
        border: 1px solid var(--glass-border);
        border-radius: 8px;
        color: var(--text-primary);
        font-family: 'Source Code Pro', 'Courier New', monospace;
        font-size: 0.85rem;
        padding: 12px;
        resize: vertical;
      }

      .card:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 48px 0 rgba(191, 87, 0, 0.15);
        border-color: rgba(191, 87, 0, 0.4);
      }

      .card-title {
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--blaze-ember);
        margin-bottom: 25px;
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .standings-table {
        width: 100%;
        border-collapse: collapse;
      }

      .standings-table th {
        background: var(--dark-graphite);
        padding: 15px;
        text-align: left;
        font-weight: 600;
        color: var(--blaze-copper);
        border-bottom: 2px solid var(--blaze-burnt-orange);
      }

      .standings-table td {
        padding: 15px;
        border-bottom: 1px solid var(--glass-border);
        color: var(--text-secondary);
      }

      .standings-table tr:hover {
        background: var(--glass-light);
      }

      .team-name {
        font-weight: 600;
        color: var(--text-primary);
      }

      .stat-highlight {
        color: var(--blaze-ember);
        font-weight: 700;
      }

      .loading {
        text-align: center;
        padding: 60px 20px;
        color: var(--text-tertiary);
      }

      .loading i {
        font-size: 3rem;
        color: var(--blaze-burnt-orange);
        animation: spin 2s linear infinite;
      }

      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      .error {
        background: rgba(220, 38, 38, 0.1);
        border: 1px solid rgba(220, 38, 38, 0.3);
        color: #fca5a5;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
      }

      .data-source {
        font-size: 0.9rem;
        color: var(--text-tertiary);
        margin-top: 20px;
        padding-top: 15px;
        border-top: 1px solid var(--glass-border);
      }

      /* Tooltip styles */
      [title] {
        position: relative;
        cursor: help;
      }

      .tooltip {
        position: relative;
        display: inline-block;
      }

      .tooltip:hover::after {
        content: attr(data-tooltip);
        position: absolute;
        bottom: 125%;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.9);
        color: white;
        padding: 8px 12px;
        border-radius: 6px;
        font-size: 0.85rem;
        white-space: nowrap;
        z-index: 1000;
        pointer-events: none;
      }

      .metric-badge {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        padding: 4px 8px;
        background: rgba(191, 87, 0, 0.1);
        border-radius: 4px;
        font-size: 0.85rem;
        font-weight: 600;
      }

      .info-icon {
        opacity: 0.6;
        transition: opacity 0.2s;
      }

      .info-icon:hover {
        opacity: 1;
      }

      @media (max-width: 768px) {
        .hero h1 {
          font-size: 2.5rem;
        }
        .header {
          padding: 15px 20px;
        }
        .nav-links {
          gap: 15px;
        }
        .standings-table {
          font-size: 0.9rem;
        }
        .standings-table th,
        .standings-table td {
          padding: 10px;
        }
        .tabs {
          overflow-x: scroll;
        }
        .tab {
          font-size: 0.95rem;
          padding: 12px 20px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Three.js Particle Background -->
    <canvas id="particle-field"></canvas>

    <header class="header">
      <div class="header-content">
        <a href="/" class="logo">
          <i class="fas fa-fire"></i>
          BLAZE SPORTS INTEL
        </a>
        <nav class="nav-links">
          <a href="/mlb" class="nav-link active">‚öæ MLB</a>
          <a href="/nfl" class="nav-link">üèà NFL</a>
          <a href="/cfb" class="nav-link">üéì CFB</a>
          <a href="/cbb" class="nav-link">üèÄ CBB</a>
          <a href="/analytics.html" class="nav-link">üìä Analytics</a>
        </nav>
      </div>
    </header>

    <div class="container">
      <div class="hero">
        <h1>‚öæ Advanced MLB Intelligence Lab</h1>
        <p
          style="
            font-size: 1.1rem;
            color: var(--blaze-copper);
            font-weight: 600;
            margin-bottom: 0.5rem;
            letter-spacing: 0.5px;
          "
        >
          Practice to Play. Blaze Data Wins the Day.
        </p>
        <p class="hero-subtitle">
          Build professional player dossiers, real-time dashboards, Statcast deep dives, and batch-ready reports for every club in the league.
        </p>
      </div>

      <div id="root"></div>
    </div>

    <script type="text/babel" src="/mlb/advanced-dashboard.jsx"></script>

    <!-- Blaze Advanced Graphics System V4 -->
    <script>
      // Global references for graphics engines
      let blazeParticles = null;
      let blazePostprocessing = null;

      async function initAdvancedGraphics() {
        const canvas = document.getElementById('particle-field');
        if (!canvas || typeof THREE === 'undefined') {
          console.warn('Three.js or canvas not available');
          return;
        }

        try {
          console.log('‚öæ Initializing MLB V4 Graphics System...');

          // Initialize Premium V4 Particle Engine with 120K particles (optimized for MLB page)
          blazeParticles = new BlazeParticleEngineV4('particle-field', {
            particleCount: 120000,
            particleSize: 2.5,
            dataNodeCount: 80,
            connectionCount: 150,
            enableMouseInteraction: true,
            enableParallax: true,
            enableFog: true,
            // MLB-specific: Baseball diamond green accent (#006341)
            accentColor: '#006341',
          });

          await blazeParticles.init();
          console.log(`‚úÖ MLB Particle Engine initialized with ${blazeParticles.useWebGPU ? 'WebGPU' : 'WebGL2'}`);

          // Initialize Postprocessing Effects
          if (typeof blazeParticles.renderer !== 'undefined') {
            try {
              blazePostprocessing = new BlazePostprocessing(
                blazeParticles.scene,
                blazeParticles.camera,
                blazeParticles.renderer
              );

              const postprocessingInitialized = await blazePostprocessing.init();
              if (postprocessingInitialized) {
                console.log('‚úÖ MLB Postprocessing pipeline initialized');

                // Replace render method to use postprocessing
                const originalRender = blazeParticles.render.bind(blazeParticles);
                blazeParticles.render = function (deltaTime) {
                  this.update(deltaTime);
                  if (blazePostprocessing && blazePostprocessing.initialized) {
                    blazePostprocessing.render(deltaTime);
                  } else {
                    originalRender(deltaTime);
                  }
                };
              }
            } catch (postError) {
              console.warn('Postprocessing initialization failed, using basic renderer:', postError);
            }
          }

          // Setup scroll-driven effects
          let lastScrollProgress = 0;
          window.addEventListener('scroll', () => {
            if (blazePostprocessing && blazePostprocessing.initialized) {
              const scrollProgress = Math.min(
                window.scrollY / (document.documentElement.scrollHeight - window.innerHeight),
                1
              );
              if (Math.abs(scrollProgress - lastScrollProgress) > 0.01) {
                blazePostprocessing.updateOnScroll(scrollProgress);
                lastScrollProgress = scrollProgress;
              }
            }
          });

          // Setup hover effects for cards
          document.querySelectorAll('.card, .tab, .standings-table tr').forEach((card) => {
            card.addEventListener('mouseenter', () => {
              if (blazePostprocessing && blazePostprocessing.initialized) {
                blazePostprocessing.onCardHover(true);
              }
            });
            card.addEventListener('mouseleave', () => {
              if (blazePostprocessing && blazePostprocessing.initialized) {
                blazePostprocessing.onCardHover(false);
              }
            });
          });

          console.log('üéâ MLB V4 Graphics System Ready!');
          console.log(`   ‚Ä¢ Particles: 120,000 (baseball diamond green accent)`);
          console.log(`   ‚Ä¢ Data Nodes: 80 (varied geometries with PBR)`);
          console.log(`   ‚Ä¢ Renderer: ${blazeParticles.useWebGPU ? 'WebGPU' : 'WebGL2'} with ACES tone mapping`);
        } catch (error) {
          console.error('‚ùå Error initializing MLB advanced graphics:', error);
        }
      }

      // Initialize on load
      window.addEventListener('load', initAdvancedGraphics);
    </script>

    <!-- Cookie Consent Banner -->
    <script src="/components/CookieConsent.js"></script>

    <!-- Universal Footer -->
    <div id="footer-container"></div>
    <script src="/lib/footer.js"></script>
  </body>
</html>

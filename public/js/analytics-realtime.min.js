var{useState:i,useEffect:N,useRef:z}=React,m=class{constructor(t,a,s){this.url=t,this.onMessage=a,this.onStatusChange=s,this.reconnectAttempts=0,this.maxReconnectAttempts=10,this.reconnectDelay=1e3,this.maxReconnectDelay=3e4,this.reconnectTimeout=null,this.pollInterval=null,this.isManualClose=!1,this.lastPingTime=null,this.pingIntervalMs=3e4,this.pongTimeout=5e3}connect(){this.isManualClose=!1,this.updateStatus("connecting"),this.testConnection().then(()=>{this.reconnectAttempts=0,this.updateStatus("connected"),this.startPolling()}).catch(t=>{console.error("[WebSocketManager] Connection test failed:",t),this.updateStatus("error"),this.scheduleReconnect()})}async testConnection(){let t=await fetch(this.url,{method:"GET",headers:{Accept:"application/json"}});if(!t.ok)throw new Error(`API returned ${t.status}`);let a=await t.json();if(!a.success)throw new Error("API returned unsuccessful response");return a}startPolling(){this.poll(),this.pollInterval=setInterval(()=>{this.poll()},this.pingIntervalMs)}async poll(){if(!this.isManualClose){this.lastPingTime=Date.now();try{let t=Date.now(),a=await fetch(this.url,{method:"GET",headers:{Accept:"application/json"}}),s=Date.now()-t;if(!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}`);let d=await a.json();this.onMessage&&this.onMessage({type:"data",timestamp:new Date().toISOString(),latency:s,data:d.games||[],meta:d.meta||{},cached:d.cached||!1}),s>2e3?this.updateStatus("degraded"):s>1e3?this.updateStatus("slow"):this.updateStatus("connected"),this.reconnectAttempts=0}catch(t){console.error("[WebSocketManager] Poll error:",t),this.onMessage&&this.onMessage({type:"error",timestamp:new Date().toISOString(),error:t.message||"Unknown error",latency:Date.now()-this.lastPingTime}),this.updateStatus("error"),this.scheduleReconnect()}}}scheduleReconnect(){if(this.isManualClose||this.reconnectTimeout)return;if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("[WebSocketManager] Max reconnect attempts reached"),this.updateStatus("failed");return}this.reconnectAttempts++;let t=Math.min(this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1),this.maxReconnectDelay);console.log(`[WebSocketManager] Reconnecting in ${t}ms (attempt ${this.reconnectAttempts}/${this.maxReconnectAttempts})`),this.reconnectTimeout=setTimeout(()=>{this.reconnectTimeout=null,this.connect()},t)}disconnect(){this.isManualClose=!0,this.pollInterval&&(clearInterval(this.pollInterval),this.pollInterval=null),this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.updateStatus("disconnected")}updateStatus(t){this.onStatusChange&&this.onStatusChange({status:t,reconnectAttempts:this.reconnectAttempts,latency:this.lastPingTime?Date.now()-this.lastPingTime:null})}getStatus(){return this.pollInterval?"connected":this.reconnectTimeout?"connecting":"disconnected"}},D=(p,t,a)=>new m(p,t,a),M=()=>{let[p,t]=i([]),[a,s]=i({NFL:[],MLB:[],NBA:[],CFB:[],CBB:[]}),[d,h]=i(!0),[L,b]=i(!0),[n,y]=i(null),[o,v]=i(!0),[S,w]=i(new Date),g=z(null),u=async()=>{try{h(!0);let e=await fetch("/api/live/all/scores");if(!e.ok)throw new Error(`API returned ${e.status}`);let r=await e.json();if(r.success&&Array.isArray(r.games)){let A=r.games.sort((R,B)=>{let x={in_progress:0,scheduled:1,final:2},I=R.status||"scheduled",T=B.status||"scheduled";return(x[I]||1)-(x[T]||1)});t(A.slice(0,6)),w(new Date)}else console.warn("[fetchLiveGames] No games in API response"),t([])}catch(e){console.error("[fetchLiveGames] Error:",e),t([])}finally{h(!1)}},f=async()=>{try{b(!0),s({NFL:[],MLB:[],NBA:[],CFB:[],CBB:[]})}catch(e){console.error("[fetchStandings] Error:",e),s({NFL:[],MLB:[],NBA:[],CFB:[],CBB:[]})}finally{b(!1)}};N(()=>(u(),f(),o&&(g.current=setInterval(()=>{u()},3e4)),()=>{g.current&&clearInterval(g.current)}),[o]);let l=e=>{y(n===e?null:e)},c={transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transformOrigin:"top center"},C=e=>({baseball:"MLB",football:"NFL",basketball:"NBA",mlb:"MLB",nfl:"NFL",nba:"NBA",cfb:"CFB",cbb:"CBB"})[e?.toLowerCase()]||e?.toUpperCase()||"Unknown",k=e=>{if(e.status==="in_progress")return e.quarter||e.inning||"LIVE";if(e.status==="final")return"Final";try{return new Date(e.date).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",timeZone:"America/Chicago"})}catch{return"Scheduled"}};return React.createElement("div",{className:"real-time-dashboard",style:{maxWidth:"1400px",margin:"0 auto",padding:"20px"}},React.createElement("div",{style:{marginBottom:"30px",display:"flex",justifyContent:"space-between",alignItems:"center"}},React.createElement("div",null,React.createElement("h2",{style:{margin:"0 0 10px 0",fontSize:"28px",fontWeight:"700",background:"linear-gradient(135deg, var(--blaze-burnt-orange), var(--blaze-ember))",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}},"\u26A1 Real-Time Intelligence Dashboard"),React.createElement("p",{style:{margin:0,fontSize:"14px",color:"rgba(255, 255, 255, 0.6)"}},"Live scores \u2022 Real SportsDataIO API \u2022 30-second updates \u2022 America/Chicago timezone")),React.createElement("div",{style:{display:"flex",gap:"10px",alignItems:"center"}},React.createElement("button",{onClick:()=>v(!o),style:{padding:"8px 16px",background:o?"rgba(16, 185, 129, 0.2)":"rgba(156, 163, 175, 0.2)",border:`1px solid ${o?"rgba(16, 185, 129, 0.4)":"rgba(156, 163, 175, 0.4)"}`,borderRadius:"6px",color:"rgba(255, 255, 255, 0.9)",cursor:"pointer",fontSize:"14px",transition:"all 0.2s"}},React.createElement("i",{className:`fas fa-${o?"pause":"play"}`})," Auto-Refresh"),React.createElement("button",{onClick:()=>{u(),f()},style:{padding:"8px 16px",background:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.4)",borderRadius:"6px",color:"rgba(255, 255, 255, 0.9)",cursor:"pointer",fontSize:"14px",transition:"all 0.2s"}},React.createElement("i",{className:"fas fa-sync-alt"})," Refresh Now"))),React.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:"20px",marginBottom:"30px"}},React.createElement("div",{className:"card",style:{...c,background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",padding:"20px",cursor:"pointer",transform:n==="live-games"?"scale(1.02)":"scale(1)"},onClick:()=>l("live-games")},React.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"}},React.createElement("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"}},React.createElement("i",{className:"fas fa-play-circle",style:{color:"#ef4444",marginRight:"8px"}}),"Live Games"),React.createElement("span",{style:{fontSize:"12px",padding:"4px 8px",background:"rgba(16, 185, 129, 0.2)",border:"1px solid rgba(16, 185, 129, 0.4)",borderRadius:"4px",color:"#6ee7b7"}},"REAL DATA")),d?React.createElement("div",{style:{textAlign:"center",padding:"20px",color:"rgba(255, 255, 255, 0.5)"}},React.createElement("i",{className:"fas fa-spinner fa-spin"})," Loading from SportsDataIO..."):p.length===0?React.createElement("p",{style:{margin:0,fontSize:"14px",color:"rgba(255, 255, 255, 0.5)"}},"No games scheduled today"):React.createElement("div",{style:{maxHeight:n==="live-games"?"400px":"150px",overflow:"auto",transition:"max-height 0.3s"}},p.map((e,r)=>React.createElement("div",{key:e.id||r,style:{padding:"12px",marginBottom:"8px",background:"rgba(255, 255, 255, 0.03)",borderRadius:"6px",fontSize:"13px",border:e.status==="in_progress"?"1px solid rgba(239, 68, 68, 0.3)":"1px solid rgba(255, 255, 255, 0.05)"}},React.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px"}},React.createElement("span",{style:{fontWeight:"600",color:"#fbbf24"}},C(e.sport)),React.createElement("span",{style:{fontSize:"11px",color:e.status==="in_progress"?"#ef4444":"rgba(255, 255, 255, 0.6)",fontWeight:e.status==="in_progress"?"600":"400"}},k(e))),React.createElement("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.9)",marginBottom:"6px"}},React.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},React.createElement("span",null,e.awayTeam?.name||"Away"),React.createElement("span",{style:{fontWeight:"700",minWidth:"30px",textAlign:"right"}},e.awayTeam?.score||0)),React.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"4px"}},React.createElement("span",null,e.homeTeam?.name||"Home"),React.createElement("span",{style:{fontWeight:"700",minWidth:"30px",textAlign:"right"}},e.homeTeam?.score||0))),e.venue&&React.createElement("div",{style:{fontSize:"11px",color:"rgba(255, 255, 255, 0.5)",marginTop:"4px"}},"\u{1F4CD} ",e.venue))))),React.createElement("div",{className:"card",style:{...c,background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",padding:"20px",opacity:.6,cursor:"pointer",transform:n==="standings"?"scale(1.02)":"scale(1)"},onClick:()=>l("standings")},React.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"}},React.createElement("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"}},React.createElement("i",{className:"fas fa-trophy",style:{color:"#fbbf24",marginRight:"8px"}}),"Top Standings"),React.createElement("span",{style:{fontSize:"11px",padding:"4px 8px",background:"rgba(156, 163, 175, 0.2)",border:"1px solid rgba(156, 163, 175, 0.4)",borderRadius:"4px"}},"Coming Soon")),React.createElement("p",{style:{margin:0,fontSize:"13px",color:"rgba(255, 255, 255, 0.5)"}},"Standings API endpoints are not yet implemented. Will be available in next phase.")),React.createElement("div",{className:"card",style:{...c,background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",padding:"20px",opacity:.6,cursor:"pointer",transform:n==="quick-stats"?"scale(1.02)":"scale(1)"},onClick:()=>l("quick-stats")},React.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"}},React.createElement("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"}},React.createElement("i",{className:"fas fa-chart-line",style:{color:"#3b82f6",marginRight:"8px"}}),"Quick Stats"),React.createElement("span",{style:{fontSize:"11px",padding:"4px 8px",background:"rgba(156, 163, 175, 0.2)",border:"1px solid rgba(156, 163, 175, 0.4)",borderRadius:"4px"}},"Phase 3")),React.createElement("p",{style:{margin:0,fontSize:"13px",color:"rgba(255, 255, 255, 0.5)"}},"Advanced statistics and analytics will appear here when MLB Statcast feature is enabled.")),React.createElement("div",{className:"card",style:{...c,background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",padding:"20px",opacity:.6,cursor:"pointer",transform:n==="ai-predictions"?"scale(1.02)":"scale(1)"},onClick:()=>l("ai-predictions")},React.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"}},React.createElement("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"}},React.createElement("i",{className:"fas fa-brain",style:{color:"#8b5cf6",marginRight:"8px"}}),"AI Predictions"),React.createElement("span",{style:{fontSize:"11px",padding:"4px 8px",background:"rgba(156, 163, 175, 0.2)",border:"1px solid rgba(156, 163, 175, 0.4)",borderRadius:"4px"}},"Phase 5")),React.createElement("p",{style:{margin:0,fontSize:"13px",color:"rgba(255, 255, 255, 0.5)"}},"AI-powered predictions and analytics will appear here in Phase 5.")),React.createElement("div",{className:"card",style:{...c,background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",padding:"20px",opacity:.6,cursor:"pointer",transform:n==="performance"?"scale(1.02)":"scale(1)"},onClick:()=>l("performance")},React.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"}},React.createElement("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"}},React.createElement("i",{className:"fas fa-gauge-high",style:{color:"#10b981",marginRight:"8px"}}),"Performance"),React.createElement("span",{style:{fontSize:"11px",padding:"4px 8px",background:"rgba(156, 163, 175, 0.2)",border:"1px solid rgba(156, 163, 175, 0.4)",borderRadius:"4px"}},"Phase 3-4")),React.createElement("p",{style:{margin:0,fontSize:"13px",color:"rgba(255, 255, 255, 0.5)"}},"Advanced performance metrics will appear here in Phase 3-4.")),React.createElement("div",{className:"card",style:{...c,background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",padding:"20px",cursor:"pointer",transform:n==="system-status"?"scale(1.02)":"scale(1)"},onClick:()=>l("system-status")},React.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"}},React.createElement("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"}},React.createElement("i",{className:"fas fa-server",style:{color:"#06b6d4",marginRight:"8px"}}),"System Status"),React.createElement("span",{style:{fontSize:"12px",padding:"4px 8px",background:"rgba(16, 185, 129, 0.2)",border:"1px solid rgba(16, 185, 129, 0.4)",borderRadius:"4px",color:"#6ee7b7"}},"Operational")),React.createElement("div",{style:{fontSize:"13px"}},React.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid rgba(255, 255, 255, 0.05)"}},React.createElement("span",{style:{color:"rgba(255, 255, 255, 0.6)"}},"API Status"),React.createElement("span",{style:{color:"#10b981"}},React.createElement("i",{className:"fas fa-check-circle"})," Real SportsDataIO")),React.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid rgba(255, 255, 255, 0.05)"}},React.createElement("span",{style:{color:"rgba(255, 255, 255, 0.6)"}},"Data Source"),React.createElement("span",{style:{color:"#10b981"}},React.createElement("i",{className:"fas fa-database"})," Live (30s cache)")),React.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 0"}},React.createElement("span",{style:{color:"rgba(255, 255, 255, 0.6)"}},"Last Updated"),React.createElement("span",{style:{color:"rgba(255, 255, 255, 0.8)"}},S.toLocaleString("en-US",{timeZone:"America/Chicago"})," CDT"))))),React.createElement("div",{style:{textAlign:"center",padding:"15px",fontSize:"12px",color:"rgba(255, 255, 255, 0.4)",borderTop:"1px solid rgba(255, 255, 255, 0.05)"}},React.createElement("i",{className:"fas fa-database"})," Data Source: ",React.createElement("a",{href:"https://sportsdata.io",target:"_blank",rel:"noopener",style:{color:"var(--color-brand-orange, #BF5700)",textDecoration:"none"}},"SportsDataIO API")," \u2022 Real-time updates every 30 seconds \u2022 ",React.createElement("a",{href:"/methodology",style:{color:"rgba(255, 255, 255, 0.6)",textDecoration:"none",borderBottom:"1px dotted rgba(255, 255, 255, 0.3)"}},"View Methodology"),React.createElement("span",{style:{marginLeft:"10px",color:"rgba(16, 185, 129, 0.8)"}},React.createElement("i",{className:"fas fa-shield-alt"})," No mock data - 100% real API")))};export{M as RealTimeDashboard,m as WebSocketManager,D as connectWebSocket};

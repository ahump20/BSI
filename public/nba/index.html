<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NBA Analytics | Blaze Sports Intel</title>
    <meta
      name="description"
      content="Real-time NBA standings, team statistics, and advanced analytics. Eastern and Western Conference coverage with complete box scores and player metrics."
    />

    <!-- Design Tokens (Canonical) -->
    <link rel="stylesheet" href="/css/bsi-tokens.css" />

    <!-- Fonts & Icons -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Bebas+Neue&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

    <!-- AOS Animations -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>

    <!-- React -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Three.js for 3D Graphics -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <!-- Postprocessing Library (pmndrs/postprocessing) with fallback -->
    <script src="https://cdn.jsdelivr.net/npm/postprocessing@6.35.3/build/postprocessing.umd.min.js"></script>
    <script src="/lib/graphics/postprocessing-fallback.js"></script>

    <!-- Blaze Graphics Modules V4 - WebGL2 Rendering Engine -->
    <script src="/lib/graphics/blaze-particle-engine-v4.js"></script>
    <script src="/lib/graphics/blaze-postprocessing.js"></script>

    <style>
      /* Championship Design Tokens - Burnt Orange Palette */
      :root {
        /* Sophisticated Burnt Orange Palette - Psychology Optimized */
        --blaze-burnt-orange: #BF5700;
        --blaze-ember: #CC6600;
        --blaze-copper: #D97B38;
        --blaze-sunset: #E69551;
        --blaze-bronze: #A0522D;
        --blaze-amber: #FFBF00;
        --blaze-rust: #8B4513;
        --blaze-terracotta: #E2725B;

        /* Basketball-specific accent */
        --blaze-basketball: #E25822;
        --blaze-court: #C9762A;

        /* Gradient Definitions */
        --gradient-primary: linear-gradient(135deg, #BF5700 0%, #CC6600 50%, #D97B38 100%);
        --gradient-ember: linear-gradient(135deg, #CC6600 0%, #E69551 100%);
        --gradient-deep: linear-gradient(135deg, #8B4513 0%, #BF5700 50%, #CC6600 100%);
        --gradient-basketball: linear-gradient(135deg, #E25822 0%, #C9762A 100%);

        /* Glass Morphism - Burnt Orange Tinted */
        --glass-light: rgba(191, 87, 0, 0.08);
        --glass-medium: rgba(191, 87, 0, 0.12);
        --glass-heavy: rgba(191, 87, 0, 0.18);
        --glass-border: rgba(191, 87, 0, 0.25);

        /* Shadows with Burnt Orange Glow */
        --shadow-sm: 0 2px 4px rgba(191, 87, 0, 0.1);
        --shadow-md: 0 4px 12px rgba(191, 87, 0, 0.15);
        --shadow-lg: 0 8px 24px rgba(191, 87, 0, 0.2);
        --shadow-xl: 0 16px 48px rgba(191, 87, 0, 0.25);
        --shadow-glow: 0 0 20px rgba(191, 87, 0, 0.3);

        /* Typography */
        --font-display: 'Bebas Neue', 'Impact', sans-serif;
        --font-body: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;

        /* Spacing Scale */
        --space-xs: 0.25rem;
        --space-sm: 0.5rem;
        --space-md: 1rem;
        --space-lg: 1.5rem;
        --space-xl: 2rem;
        --space-2xl: 3rem;
        --space-3xl: 4rem;

        /* Border Radius */
        --radius-sm: 0.375rem;
        --radius-md: 0.5rem;
        --radius-lg: 0.75rem;
        --radius-xl: 1rem;
        --radius-full: 9999px;

        /* Transitions */
        --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
        --transition-base: 250ms cubic-bezier(0.4, 0, 0.2, 1);
        --transition-slow: 350ms cubic-bezier(0.4, 0, 0.2, 1);

        /* Dark Mode Colors */
        --dark-graphite: #1a1a24;
        --dark-slate: #252535;
        --text-primary: #ffffff;
        --text-secondary: rgba(255, 255, 255, 0.85);
        --text-tertiary: rgba(255, 255, 255, 0.6);

        /* Grizzlies Colors */
        --grizzlies-navy: #12173F;
        --grizzlies-blue: #5D76A9;
        --grizzlies-gold: #F5B112;
      }

      /* Modal Overlay */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.85);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        backdrop-filter: blur(10px);
        animation: fadeIn 0.3s ease;
      }

      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }

      .modal-content {
        background: linear-gradient(135deg, #1a1a24 0%, #252535 100%);
        border-radius: var(--radius-xl);
        padding: 30px;
        max-width: 900px;
        width: 95%;
        max-height: 85vh;
        overflow-y: auto;
        border: 1px solid var(--glass-border);
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
        animation: slideUp 0.3s ease;
      }

      @keyframes slideUp {
        from { transform: translateY(20px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
        padding-bottom: 15px;
        border-bottom: 1px solid var(--glass-border);
      }

      .modal-close {
        background: transparent;
        border: none;
        color: var(--text-secondary);
        font-size: 1.5rem;
        cursor: pointer;
        transition: color 0.2s;
      }

      .modal-close:hover {
        color: var(--blaze-basketball);
      }

      .player-card {
        background: var(--dark-slate);
        border-radius: var(--radius-md);
        padding: 15px;
        cursor: pointer;
        transition: all 0.2s;
        border: 1px solid transparent;
      }

      .player-card:hover {
        background: var(--glass-light);
        border-color: var(--blaze-basketball);
        transform: translateY(-2px);
      }

      .stat-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 15px;
      }

      .stat-box {
        background: var(--dark-slate);
        padding: 15px;
        border-radius: var(--radius-md);
        text-align: center;
      }

      .stat-value {
        font-size: 2rem;
        font-weight: 700;
        color: var(--blaze-basketball);
        font-family: var(--font-display);
      }

      .stat-label {
        color: var(--text-tertiary);
        font-size: 0.85rem;
        margin-top: 5px;
      }

      .stat-rank {
        color: var(--blaze-ember);
        font-size: 0.75rem;
        margin-top: 3px;
      }

      .quarter-scores {
        display: flex;
        gap: 10px;
        margin-top: 10px;
      }

      .quarter-box {
        background: var(--dark-slate);
        padding: 8px 12px;
        border-radius: var(--radius-sm);
        text-align: center;
        min-width: 50px;
      }

      .quarter-label {
        font-size: 0.7rem;
        color: var(--text-tertiary);
      }

      .quarter-value {
        font-size: 1.2rem;
        font-weight: 600;
        color: var(--text-primary);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Inter', system-ui, sans-serif;
        background: linear-gradient(135deg, #0d0d12 0%, #161620 50%, #0d0d12 100%);
        color: var(--text-primary);
        min-height: 100vh;
        position: relative;
        overflow-x: hidden;
      }

      #particle-field {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 0;
        pointer-events: none;
      }

      .header {
        background: rgba(31, 31, 46, 0.7);
        border-bottom: 2px solid var(--blaze-burnt-orange);
        padding: 20px 40px;
        position: sticky;
        top: 0;
        z-index: 100;
        backdrop-filter: blur(20px) saturate(180%);
        -webkit-backdrop-filter: blur(20px) saturate(180%);
        box-shadow: 0 8px 32px 0 rgba(191, 87, 0, 0.1);
      }

      .header-content {
        max-width: 1400px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .logo {
        font-size: 1.5rem;
        font-weight: 800;
        color: var(--blaze-ember);
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .nav-links {
        display: flex;
        gap: 30px;
        align-items: center;
      }

      .nav-link {
        color: var(--text-secondary);
        text-decoration: none;
        font-weight: 500;
        transition: color 0.2s;
      }

      .nav-link:hover {
        color: var(--blaze-ember);
      }

      .nav-link.active {
        color: var(--blaze-ember);
        border-bottom: 2px solid var(--blaze-ember);
        padding-bottom: 4px;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 40px 20px;
      }

      /* Championship Hero Section */
      .hero {
        position: relative;
        z-index: 1;
        min-height: 50vh;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: calc(80px + var(--space-3xl)) var(--space-xl) var(--space-3xl);
        background: radial-gradient(ellipse at top, rgba(226, 88, 34, 0.15), transparent 70%);
      }

      .hero-content {
        max-width: 900px;
        margin: 0 auto;
      }

      .hero-badge {
        display: inline-block;
        background: var(--glass-medium);
        backdrop-filter: blur(20px);
        border: 1px solid var(--glass-border);
        padding: var(--space-sm) var(--space-lg);
        border-radius: var(--radius-full);
        font-size: 0.85rem;
        font-weight: 600;
        letter-spacing: 0.1em;
        text-transform: uppercase;
        color: var(--blaze-basketball);
        margin-bottom: var(--space-lg);
        animation: float 3s ease-in-out infinite;
      }

      @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
      }

      .hero-title {
        font-family: var(--font-display);
        font-size: clamp(2.5rem, 8vw, 5rem);
        font-weight: 700;
        line-height: 1.1;
        margin-bottom: var(--space-lg);
        background: var(--gradient-basketball);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-shadow: 0 0 80px rgba(226, 88, 34, 0.5);
        letter-spacing: 0.02em;
      }

      .hero-subtitle {
        font-size: clamp(1rem, 3vw, 1.35rem);
        line-height: 1.7;
        color: rgba(255, 255, 255, 0.85);
        margin-bottom: var(--space-xl);
        font-weight: 400;
      }

      .tabs {
        display: flex;
        gap: 20px;
        margin-bottom: 40px;
        border-bottom: 2px solid var(--glass-border);
        overflow-x: auto;
      }

      .tab {
        padding: 15px 30px;
        background: transparent;
        border: none;
        color: var(--text-tertiary);
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        border-bottom: 3px solid transparent;
        white-space: nowrap;
      }

      .tab:hover {
        color: var(--text-primary);
      }

      .tab.active {
        color: var(--blaze-basketball);
        border-bottom-color: var(--blaze-basketball);
      }

      .card {
        background: var(--glass-light);
        border: 1px solid var(--glass-border);
        border-radius: 12px;
        padding: 30px;
        margin-bottom: 30px;
        backdrop-filter: blur(20px) saturate(180%);
        -webkit-backdrop-filter: blur(20px) saturate(180%);
        box-shadow: 0 8px 32px 0 rgba(191, 87, 0, 0.1);
      }

      .card-title {
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--blaze-basketball);
        margin-bottom: 25px;
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .standings-table {
        width: 100%;
        border-collapse: collapse;
      }

      .standings-table th {
        background: rgba(31, 31, 46, 0.7);
        padding: 15px;
        text-align: left;
        font-weight: 600;
        color: var(--blaze-copper);
        border-bottom: 2px solid var(--blaze-basketball);
      }

      .standings-table td {
        padding: 15px;
        border-bottom: 1px solid var(--glass-border);
        color: var(--text-secondary);
      }

      .standings-table tr:hover {
        background: var(--glass-light);
      }

      .standings-table tr.grizzlies-row {
        background: linear-gradient(90deg, rgba(93, 118, 169, 0.15) 0%, transparent 100%);
        border-left: 3px solid var(--grizzlies-blue);
      }

      .standings-table tr.grizzlies-row:hover {
        background: linear-gradient(90deg, rgba(93, 118, 169, 0.25) 0%, rgba(93, 118, 169, 0.1) 100%);
      }

      .team-name {
        font-weight: 600;
        color: var(--text-primary);
      }

      .team-name.grizzlies {
        color: var(--grizzlies-blue);
      }

      .stat-highlight {
        color: var(--blaze-basketball);
        font-weight: 700;
      }

      .conference-header {
        font-family: var(--font-display);
        font-size: 1.5rem;
        color: var(--blaze-basketball);
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 2px solid var(--glass-border);
        letter-spacing: 0.05em;
      }

      .loading {
        text-align: center;
        padding: 60px 20px;
        color: var(--text-tertiary);
      }

      .loading i {
        font-size: 3rem;
        color: var(--blaze-basketball);
        animation: bounce 1s ease infinite;
      }

      @keyframes bounce {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-20px); }
      }

      @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.3; }
      }

      .error {
        background: rgba(220, 38, 38, 0.1);
        border: 1px solid rgba(220, 38, 38, 0.3);
        color: #fca5a5;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
      }

      .data-source {
        font-size: 0.9rem;
        color: var(--text-tertiary);
        margin-top: 20px;
        padding-top: 15px;
        border-top: 1px solid var(--glass-border);
      }

      .team-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 15px;
      }

      .team-card {
        background: var(--dark-slate);
        padding: 20px;
        border-radius: 8px;
        border: 1px solid var(--glass-border);
        cursor: pointer;
        transition: all 0.2s;
        text-align: center;
      }

      .team-card:hover {
        border-color: var(--blaze-basketball);
        transform: translateY(-2px);
      }

      .team-card.grizzlies {
        background: linear-gradient(135deg, rgba(93, 118, 169, 0.2) 0%, var(--dark-slate) 100%);
        border-color: var(--grizzlies-blue);
      }

      .team-logo {
        width: 80px;
        height: 80px;
        margin: 0 auto 15px;
        object-fit: contain;
      }

      @media (max-width: 768px) {
        .hero h1 {
          font-size: 2.5rem;
        }
        .header {
          padding: 15px 20px;
        }
        .nav-links {
          gap: 15px;
        }
        .standings-table {
          font-size: 0.9rem;
        }
        .standings-table th,
        .standings-table td {
          padding: 10px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Three.js Particle Background -->
    <canvas id="particle-field"></canvas>
    <header class="header">
      <div class="header-content">
        <a href="/" class="logo">
          <i class="fas fa-fire"></i>
          BLAZE SPORTS INTEL
        </a>
        <nav class="nav-links">
          <a href="/mlb" class="nav-link">MLB</a>
          <a href="/nfl" class="nav-link">NFL</a>
          <a href="/nba" class="nav-link active">NBA</a>
          <a href="/college-baseball" class="nav-link">College Baseball</a>
          <a href="/analytics.html" class="nav-link">Analytics</a>
        </nav>
      </div>
    </header>

    <div class="container">
      <section class="hero">
        <div class="hero-content" data-aos="fade-up">
          <div class="hero-badge">
            NBA Intelligence
          </div>
          <h1 class="hero-title">
            Grit. Grind.<br>Championship Intel.
          </h1>
          <p class="hero-subtitle">
            Real-time NBA standings, team analytics, and performance metrics. Eastern and Western Conference coverage with complete box scores. Memphis grit, nationwide reach.
          </p>
        </div>
      </section>

      <div id="root"></div>
    </div>

    <script type="text/babel">
      const { useState, useEffect } = React;

      function NBADashboard() {
        const [activeTab, setActiveTab] = useState('standings');
        const [standings, setStandings] = useState({ eastern: [], western: [] });
        const [teams, setTeams] = useState([]);
        const [scores, setScores] = useState([]);
        const [loading, setLoading] = useState(true);
        const [error, setError] = useState(null);
        const [selectedTeam, setSelectedTeam] = useState(null);
        const [selectedPlayer, setSelectedPlayer] = useState(null);
        const [selectedGame, setSelectedGame] = useState(null);
        const [teamRoster, setTeamRoster] = useState([]);
        const [playerStats, setPlayerStats] = useState(null);
        const [gameDetails, setGameDetails] = useState(null);

        useEffect(() => {
          if (activeTab === 'standings') {
            fetchStandings();
          } else if (activeTab === 'teams') {
            fetchTeams();
          } else if (activeTab === 'scores') {
            fetchScores();
          }
        }, [activeTab]);

        const fetchStandings = async () => {
          setLoading(true);
          setError(null);
          try {
            const response = await fetch('/api/nba/standings');
            if (!response.ok) throw new Error('Failed to fetch standings');
            const data = await response.json();

            // Parse standings by conference - API returns { standings: [{ name, teams }] }
            const eastern = [];
            const western = [];

            // Handle both possible response formats (standings or conferences)
            const conferences = data.standings || data.conferences || [];

            if (Array.isArray(conferences)) {
              conferences.forEach(conf => {
                const confName = conf.name || '';
                const isEast = confName.toLowerCase().includes('east');
                const isWest = confName.toLowerCase().includes('west');

                if (conf.teams && Array.isArray(conf.teams)) {
                  conf.teams.forEach((team, idx) => {
                    // Handle flat team object (new format) or nested format
                    const teamData = team.team || team;
                    const wins = team.wins ?? teamData.wins ?? 0;
                    const losses = team.losses ?? teamData.losses ?? 0;
                    const winPct = wins > 0 ? (wins / (wins + losses)).toFixed(3).replace(/^0/, '') : '.000';

                    const entry = {
                      rank: idx + 1,
                      name: teamData.displayName || teamData.name || 'Unknown',
                      abbreviation: teamData.abbreviation || '',
                      wins: wins,
                      losses: losses,
                      pct: team.record?.winningPercentage || winPct,
                      gb: team.standings?.gamesBack || team.gb || '-',
                      streak: team.standings?.streak || team.streak || '-',
                      logo: teamData.logo || teamData.logos?.[0]?.href || null,
                      isGrizzlies: teamData.abbreviation === 'MEM'
                    };

                    if (isEast) {
                      eastern.push(entry);
                    } else if (isWest) {
                      western.push(entry);
                    }
                  });
                }
              });
            }

            // Sort by wins descending
            eastern.sort((a, b) => b.wins - a.wins);
            western.sort((a, b) => b.wins - a.wins);

            setStandings({ eastern, western });
            setLoading(false);
          } catch (err) {
            console.error('Error fetching standings:', err);
            setError(err.message);
            setLoading(false);
          }
        };

        const fetchTeams = async () => {
          setLoading(true);
          setError(null);
          try {
            const response = await fetch('/api/nba/teams');
            if (!response.ok) throw new Error('Failed to fetch teams');
            const data = await response.json();
            setTeams(data.teams || []);
            setLoading(false);
          } catch (err) {
            console.error('Error fetching teams:', err);
            setError(err.message);
            setLoading(false);
          }
        };

        const fetchScores = async () => {
          setLoading(true);
          setError(null);
          try {
            const response = await fetch('/api/nba/scoreboard');
            if (!response.ok) throw new Error('Failed to fetch scores');
            const data = await response.json();
            setScores(data.games || data.events || []);
            setLoading(false);
          } catch (err) {
            console.error('Error fetching scores:', err);
            setError(err.message);
            setLoading(false);
          }
        };

        const fetchTeamRoster = async (teamId, teamName) => {
          setLoading(true);
          setSelectedTeam({ id: teamId, name: teamName });
          try {
            const response = await fetch(`/api/nba/teams/${teamId}`);
            if (!response.ok) throw new Error('Failed to fetch team');
            const data = await response.json();
            setTeamRoster(data.roster || []);
            setLoading(false);
          } catch (err) {
            console.error('Error fetching team roster:', err);
            setError(err.message);
            setLoading(false);
          }
        };

        const fetchPlayerStats = async (playerId) => {
          setLoading(true);
          setSelectedPlayer(playerId);
          try {
            const response = await fetch(`/api/nba/players/${playerId}`);
            if (!response.ok) throw new Error('Failed to fetch player');
            const data = await response.json();
            setPlayerStats(data);
            setLoading(false);
          } catch (err) {
            console.error('Error fetching player:', err);
            setError(err.message);
            setLoading(false);
          }
        };

        const fetchGameDetails = async (gameId) => {
          setLoading(true);
          setSelectedGame(gameId);
          try {
            const response = await fetch(`/api/nba/games/${gameId}`);
            if (!response.ok) throw new Error('Failed to fetch game');
            const data = await response.json();
            setGameDetails(data);
            setLoading(false);
          } catch (err) {
            console.error('Error fetching game:', err);
            setError(err.message);
            setLoading(false);
          }
        };

        const closeModal = () => {
          setSelectedTeam(null);
          setSelectedPlayer(null);
          setSelectedGame(null);
          setTeamRoster([]);
          setPlayerStats(null);
          setGameDetails(null);
        };

        const renderStandingsTable = (teams, conference) => (
          <div className="card" style={{ marginBottom: '30px' }}>
            <h3 className="conference-header">
              <i className="fas fa-basketball-ball" style={{ marginRight: '10px' }}></i>
              {conference} Conference
            </h3>
            <table className="standings-table">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Team</th>
                  <th>W</th>
                  <th>L</th>
                  <th>PCT</th>
                  <th>GB</th>
                  <th>STRK</th>
                </tr>
              </thead>
              <tbody>
                {teams.map((team, idx) => (
                  <tr
                    key={team.abbreviation || idx}
                    className={team.isGrizzlies ? 'grizzlies-row' : ''}
                  >
                    <td>{team.rank || idx + 1}</td>
                    <td>
                      <span className={`team-name ${team.isGrizzlies ? 'grizzlies' : ''}`}>
                        {team.isGrizzlies && <i className="fas fa-star" style={{ color: '#F5B112', marginRight: '8px', fontSize: '0.8rem' }}></i>}
                        {team.name}
                      </span>
                    </td>
                    <td className="stat-highlight">{team.wins}</td>
                    <td>{team.losses}</td>
                    <td>{typeof team.pct === 'number' ? team.pct.toFixed(3).replace(/^0/, '') : team.pct}</td>
                    <td>{team.gb}</td>
                    <td>{team.streak}</td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        );

        const renderStandings = () => {
          if (loading) {
            return (
              <div className="loading">
                <i className="fas fa-basketball-ball"></i>
                <p style={{ marginTop: '20px' }}>Loading NBA standings...</p>
              </div>
            );
          }

          if (error) {
            return (
              <div className="error">
                <strong>Data Unavailable</strong>
                <p>{error}</p>
              </div>
            );
          }

          if (standings.eastern.length === 0 && standings.western.length === 0) {
            return (
              <div className="card">
                <h2 className="card-title">
                  <i className="fas fa-trophy"></i>
                  NBA Standings
                </h2>
                <div style={{ background: 'var(--dark-slate)', padding: '30px', borderRadius: '8px', textAlign: 'center' }}>
                  <i className="fas fa-basketball-ball" style={{ fontSize: '3rem', color: 'var(--blaze-basketball)', marginBottom: '15px' }}></i>
                  <p style={{ color: 'var(--text-secondary)' }}>Standings data loading...</p>
                </div>
              </div>
            );
          }

          return (
            <div>
              {standings.eastern.length > 0 && renderStandingsTable(standings.eastern, 'Eastern')}
              {standings.western.length > 0 && renderStandingsTable(standings.western, 'Western')}
              <div className="card">
                <div className="data-source">
                  <i className="fas fa-database"></i> Data Source: ESPN NBA API via blazesportsintel.com/api |
                  Last Updated: {new Date().toLocaleString('en-US', { timeZone: 'America/Chicago' })} CDT |
                  <i className="fas fa-star" style={{ color: '#F5B112', margin: '0 5px' }}></i> = Memphis Grizzlies (Favorite Team)
                </div>
              </div>
            </div>
          );
        };

        const renderTeams = () => {
          if (loading) {
            return (
              <div className="loading">
                <i className="fas fa-basketball-ball"></i>
                <p style={{ marginTop: '20px' }}>Loading NBA teams...</p>
              </div>
            );
          }

          if (error) {
            return (
              <div className="error">
                <strong>Data Unavailable</strong>
                <p>{error}</p>
              </div>
            );
          }

          // Group by conference
          const eastern = teams.filter(t => t.conference === 'Eastern' || t.conferenceId === 1);
          const western = teams.filter(t => t.conference === 'Western' || t.conferenceId === 2);

          const renderTeamGrid = (teamList, conference) => (
            <div className="card" style={{ marginBottom: '30px' }}>
              <h3 className="conference-header">
                <i className="fas fa-basketball-ball" style={{ marginRight: '10px' }}></i>
                {conference} Conference
              </h3>
              <div className="team-grid">
                {teamList.map(team => {
                  const isGrizzlies = team.abbreviation === 'MEM';
                  return (
                    <div
                      key={team.id}
                      className={`team-card ${isGrizzlies ? 'grizzlies' : ''}`}
                      onClick={() => fetchTeamRoster(team.id, team.displayName || team.name)}
                      style={{ cursor: 'pointer' }}
                    >
                      {team.logos && team.logos[0] && (
                        <img src={team.logos[0].href} alt={team.name} className="team-logo" />
                      )}
                      <div className="team-name" style={isGrizzlies ? { color: 'var(--grizzlies-blue)' } : {}}>
                        {isGrizzlies && <i className="fas fa-star" style={{ color: '#F5B112', marginRight: '5px', fontSize: '0.8rem' }}></i>}
                        {team.displayName || team.name}
                      </div>
                      <div style={{ color: 'var(--text-tertiary)', fontSize: '0.9rem', marginTop: '5px' }}>
                        {team.abbreviation}
                      </div>
                      <div style={{ color: 'var(--blaze-basketball)', fontSize: '0.8rem', marginTop: '8px' }}>
                        <i className="fas fa-users" style={{ marginRight: '5px' }}></i>
                        View Roster
                      </div>
                    </div>
                  );
                })}
              </div>
            </div>
          );

          return (
            <div>
              {eastern.length > 0 && renderTeamGrid(eastern, 'Eastern')}
              {western.length > 0 && renderTeamGrid(western, 'Western')}
              <div className="card">
                <div className="data-source">
                  <i className="fas fa-database"></i> Data Source: ESPN NBA API via blazesportsintel.com/api |
                  Last Updated: {new Date().toLocaleString('en-US', { timeZone: 'America/Chicago' })} CDT
                </div>
              </div>
            </div>
          );
        };

        const renderScores = () => {
          if (loading) {
            return (
              <div className="loading">
                <i className="fas fa-basketball-ball"></i>
                <p style={{ marginTop: '20px' }}>Loading today's games...</p>
              </div>
            );
          }

          if (error) {
            return (
              <div className="error">
                <strong>Data Unavailable</strong>
                <p>{error}</p>
              </div>
            );
          }

          if (scores.length === 0) {
            return (
              <div className="card">
                <h2 className="card-title">
                  <i className="fas fa-calendar-day"></i>
                  Today's Games
                </h2>
                <div style={{ background: 'var(--dark-slate)', padding: '30px', borderRadius: '8px', textAlign: 'center' }}>
                  <i className="fas fa-basketball-ball" style={{ fontSize: '3rem', color: 'var(--blaze-basketball)', marginBottom: '15px' }}></i>
                  <p style={{ color: 'var(--text-secondary)' }}>No games scheduled for today</p>
                </div>
              </div>
            );
          }

          return (
            <div className="card">
              <h2 className="card-title">
                <i className="fas fa-calendar-day"></i>
                Today's Games
              </h2>
              <div style={{ display: 'grid', gap: '15px' }}>
                {scores.map((game, idx) => {
                  const homeTeam = game.competitions?.[0]?.competitors?.find(c => c.homeAway === 'home') || game.teams?.find(t => t.homeAway === 'home') || game.homeTeam;
                  const awayTeam = game.competitions?.[0]?.competitors?.find(c => c.homeAway === 'away') || game.teams?.find(t => t.homeAway === 'away') || game.awayTeam;
                  const status = game.status?.type?.description || game.status || 'Scheduled';
                  const isLive = status.toLowerCase().includes('progress') || status.toLowerCase().includes('live');
                  const isFinal = status.toLowerCase().includes('final');

                  const homeAbbr = homeTeam?.team?.abbreviation || homeTeam?.abbreviation || '';
                  const awayAbbr = awayTeam?.team?.abbreviation || awayTeam?.abbreviation || '';
                  const isGrizzliesGame = homeAbbr === 'MEM' || awayAbbr === 'MEM';

                  return (
                    <div
                      key={game.id || idx}
                      onClick={() => game.id && fetchGameDetails(game.id)}
                      style={{
                        background: isGrizzliesGame ? 'linear-gradient(90deg, rgba(93, 118, 169, 0.15) 0%, var(--dark-slate) 100%)' : 'var(--dark-slate)',
                        padding: '20px',
                        borderRadius: '8px',
                        border: `1px solid ${isLive ? '#10b981' : isGrizzliesGame ? 'var(--grizzlies-blue)' : 'var(--glass-border)'}`,
                        display: 'flex',
                        justifyContent: 'space-between',
                        alignItems: 'center',
                        cursor: 'pointer',
                        transition: 'all 0.2s'
                      }}
                      onMouseEnter={e => e.currentTarget.style.transform = 'translateY(-2px)'}
                      onMouseLeave={e => e.currentTarget.style.transform = 'translateY(0)'}
                    >
                      <div style={{ flex: 1 }}>
                        <div style={{ display: 'flex', alignItems: 'center', gap: '10px', marginBottom: '10px' }}>
                          <span className="team-name" style={awayAbbr === 'MEM' ? { color: 'var(--grizzlies-blue)' } : {}}>
                            {awayAbbr === 'MEM' && <i className="fas fa-star" style={{ color: '#F5B112', marginRight: '5px', fontSize: '0.7rem' }}></i>}
                            {awayTeam?.team?.displayName || awayTeam?.name || 'TBD'}
                          </span>
                          <span className="stat-highlight" style={{ marginLeft: 'auto' }}>
                            {awayTeam?.score ?? '-'}
                          </span>
                        </div>
                        <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>
                          <span className="team-name" style={homeAbbr === 'MEM' ? { color: 'var(--grizzlies-blue)' } : {}}>
                            {homeAbbr === 'MEM' && <i className="fas fa-star" style={{ color: '#F5B112', marginRight: '5px', fontSize: '0.7rem' }}></i>}
                            {homeTeam?.team?.displayName || homeTeam?.name || 'TBD'}
                          </span>
                          <span className="stat-highlight" style={{ marginLeft: 'auto' }}>
                            {homeTeam?.score ?? '-'}
                          </span>
                        </div>
                      </div>
                      <div style={{ marginLeft: '30px', textAlign: 'right' }}>
                        <div style={{
                          color: isLive ? '#10b981' : isFinal ? 'var(--text-tertiary)' : 'var(--blaze-basketball)',
                          fontWeight: '600',
                          marginBottom: '5px'
                        }}>
                          {isLive && <i className="fas fa-circle" style={{ fontSize: '0.5rem', marginRight: '5px', animation: 'pulse 1.5s infinite' }}></i>}
                          {status}
                        </div>
                        <div style={{ color: 'var(--text-tertiary)', fontSize: '0.9rem' }}>
                          {new Date(game.date).toLocaleDateString('en-US', {
                            month: 'short',
                            day: 'numeric',
                            hour: 'numeric',
                            minute: '2-digit',
                            timeZone: 'America/Chicago'
                          })} CDT
                        </div>
                        {(isLive || isFinal) && (
                          <div style={{ color: 'var(--blaze-basketball)', fontSize: '0.8rem', marginTop: '8px' }}>
                            <i className="fas fa-chart-bar" style={{ marginRight: '5px' }}></i>
                            View Box Score
                          </div>
                        )}
                      </div>
                    </div>
                  );
                })}
              </div>
              <div className="data-source">
                <i className="fas fa-database"></i> Data Source: ESPN NBA API via blazesportsintel.com/api |
                Last Updated: {new Date().toLocaleString('en-US', { timeZone: 'America/Chicago' })} CDT
              </div>
            </div>
          );
        };

        // Team Roster Modal
        const renderTeamRosterModal = () => {
          if (!selectedTeam) return null;

          return (
            <div className="modal-overlay" onClick={closeModal}>
              <div className="modal-content" onClick={e => e.stopPropagation()}>
                <div className="modal-header">
                  <h2 style={{ fontFamily: 'var(--font-display)', fontSize: '1.8rem' }}>
                    <i className="fas fa-users" style={{ color: 'var(--blaze-basketball)', marginRight: '10px' }}></i>
                    {selectedTeam.name} Roster
                  </h2>
                  <button className="modal-close" onClick={closeModal}>
                    <i className="fas fa-times"></i>
                  </button>
                </div>

                {loading ? (
                  <div className="loading">
                    <i className="fas fa-basketball-ball"></i>
                    <p style={{ marginTop: '20px' }}>Loading roster...</p>
                  </div>
                ) : (
                  <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))', gap: '15px' }}>
                    {teamRoster.map(player => (
                      <div
                        key={player.id}
                        className="player-card"
                        onClick={() => fetchPlayerStats(player.id)}
                      >
                        <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>
                          <span style={{
                            background: 'var(--blaze-basketball)',
                            color: 'white',
                            padding: '4px 8px',
                            borderRadius: '4px',
                            fontWeight: '700',
                            fontSize: '0.9rem'
                          }}>
                            #{player.jersey}
                          </span>
                          <div>
                            <div style={{ fontWeight: '600', color: 'var(--text-primary)' }}>{player.name}</div>
                            <div style={{ fontSize: '0.85rem', color: 'var(--text-tertiary)' }}>
                              {player.position} • {player.height}
                            </div>
                          </div>
                        </div>
                      </div>
                    ))}
                  </div>
                )}
              </div>
            </div>
          );
        };

        // Player Stats Modal
        const renderPlayerStatsModal = () => {
          if (!selectedPlayer || !playerStats) return null;

          const player = playerStats.player;
          const stats = playerStats.seasonStats?.stats || [];
          const isGrizzlies = player?.team?.abbreviation === 'MEM';

          return (
            <div className="modal-overlay" onClick={closeModal}>
              <div className="modal-content" onClick={e => e.stopPropagation()}>
                <div className="modal-header">
                  <div style={{ display: 'flex', alignItems: 'center', gap: '20px' }}>
                    {player?.headshot && (
                      <img
                        src={player.headshot}
                        alt={player.name}
                        style={{ width: '80px', height: '80px', borderRadius: '50%', objectFit: 'cover', border: '3px solid var(--blaze-basketball)' }}
                      />
                    )}
                    <div>
                      <h2 style={{ fontFamily: 'var(--font-display)', fontSize: '1.8rem', color: isGrizzlies ? 'var(--grizzlies-blue)' : 'var(--text-primary)' }}>
                        {isGrizzlies && <i className="fas fa-star" style={{ color: '#F5B112', marginRight: '10px' }}></i>}
                        {player?.name}
                      </h2>
                      <div style={{ color: 'var(--text-tertiary)' }}>
                        #{player?.jersey} • {player?.positionFull} • {player?.team?.name}
                      </div>
                    </div>
                  </div>
                  <button className="modal-close" onClick={closeModal}>
                    <i className="fas fa-times"></i>
                  </button>
                </div>

                {/* Player Bio */}
                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))', gap: '15px', marginBottom: '25px' }}>
                  <div className="stat-box">
                    <div style={{ color: 'var(--text-primary)', fontWeight: '600' }}>{player?.height}</div>
                    <div className="stat-label">Height</div>
                  </div>
                  <div className="stat-box">
                    <div style={{ color: 'var(--text-primary)', fontWeight: '600' }}>{player?.weight} lbs</div>
                    <div className="stat-label">Weight</div>
                  </div>
                  <div className="stat-box">
                    <div style={{ color: 'var(--text-primary)', fontWeight: '600' }}>{player?.age} yrs</div>
                    <div className="stat-label">Age</div>
                  </div>
                  <div className="stat-box">
                    <div style={{ color: 'var(--text-primary)', fontWeight: '600' }}>{player?.experience || 'Rookie'}</div>
                    <div className="stat-label">Experience</div>
                  </div>
                  {player?.college && (
                    <div className="stat-box">
                      <div style={{ color: 'var(--text-primary)', fontWeight: '600' }}>{player.college}</div>
                      <div className="stat-label">College</div>
                    </div>
                  )}
                </div>

                {/* Season Stats */}
                <h3 style={{ marginBottom: '15px', color: 'var(--blaze-basketball)', fontFamily: 'var(--font-display)' }}>
                  <i className="fas fa-chart-line" style={{ marginRight: '10px' }}></i>
                  {playerStats.seasonStats?.season || '2024-25 Season Stats'}
                </h3>
                <div className="stat-grid">
                  {stats.map((stat, idx) => (
                    <div key={idx} className="stat-box">
                      <div className="stat-value">{stat.value}</div>
                      <div className="stat-label">{stat.abbreviation}</div>
                      {stat.rankDisplay && (
                        <div className="stat-rank">
                          <i className="fas fa-trophy" style={{ marginRight: '4px' }}></i>
                          {stat.rankDisplay} in NBA
                        </div>
                      )}
                    </div>
                  ))}
                </div>

                <div className="data-source" style={{ marginTop: '25px' }}>
                  <i className="fas fa-database"></i> Data Source: ESPN NBA API via blazesportsintel.com/api |
                  Last Updated: {new Date().toLocaleString('en-US', { timeZone: 'America/Chicago' })} CDT
                </div>
              </div>
            </div>
          );
        };

        // Game Details Modal
        const renderGameDetailsModal = () => {
          if (!selectedGame || !gameDetails) return null;

          const game = gameDetails.game;
          const competitors = gameDetails.competitors || [];
          const leaders = gameDetails.leaders || [];

          return (
            <div className="modal-overlay" onClick={closeModal}>
              <div className="modal-content" onClick={e => e.stopPropagation()}>
                <div className="modal-header">
                  <div>
                    <h2 style={{ fontFamily: 'var(--font-display)', fontSize: '1.5rem' }}>
                      <i className="fas fa-basketball-ball" style={{ color: 'var(--blaze-basketball)', marginRight: '10px' }}></i>
                      Game Details
                    </h2>
                    <div style={{ color: 'var(--text-tertiary)', marginTop: '5px' }}>
                      {game?.status?.description} | {game?.venue?.name}, {game?.venue?.city}
                    </div>
                  </div>
                  <button className="modal-close" onClick={closeModal}>
                    <i className="fas fa-times"></i>
                  </button>
                </div>

                {/* Scoreboard with Quarter-by-Quarter */}
                <div style={{ display: 'grid', gap: '20px', marginBottom: '25px' }}>
                  {competitors.map((team, idx) => {
                    const isGrizzlies = team.team?.abbreviation === 'MEM';
                    return (
                      <div key={idx} style={{
                        background: isGrizzlies ? 'linear-gradient(90deg, rgba(93, 118, 169, 0.15) 0%, var(--dark-slate) 100%)' : 'var(--dark-slate)',
                        padding: '20px',
                        borderRadius: '8px',
                        border: isGrizzlies ? '1px solid var(--grizzlies-blue)' : '1px solid var(--glass-border)'
                      }}>
                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                          <div style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>
                            {team.team?.logo && (
                              <img src={team.team.logo} alt={team.team.name} style={{ width: '50px', height: '50px' }} />
                            )}
                            <div>
                              <div style={{ fontSize: '1.2rem', fontWeight: '600', color: isGrizzlies ? 'var(--grizzlies-blue)' : 'var(--text-primary)' }}>
                                {isGrizzlies && <i className="fas fa-star" style={{ color: '#F5B112', marginRight: '8px' }}></i>}
                                {team.team?.name}
                              </div>
                              <div style={{ color: 'var(--text-tertiary)', fontSize: '0.9rem' }}>
                                {team.homeAway === 'home' ? 'Home' : 'Away'}
                              </div>
                            </div>
                          </div>
                          <div style={{ fontSize: '2.5rem', fontWeight: '700', fontFamily: 'var(--font-display)', color: team.winner ? 'var(--blaze-basketball)' : 'var(--text-primary)' }}>
                            {team.score || '-'}
                          </div>
                        </div>

                        {/* Quarter Scores */}
                        {team.linescores && team.linescores.length > 0 && (
                          <div className="quarter-scores">
                            {team.linescores.map((score, qIdx) => (
                              <div key={qIdx} className="quarter-box">
                                <div className="quarter-label">Q{qIdx + 1}</div>
                                <div className="quarter-value">{score}</div>
                              </div>
                            ))}
                          </div>
                        )}
                      </div>
                    );
                  })}
                </div>

                {/* Game Leaders */}
                {leaders.length > 0 && (
                  <>
                    <h3 style={{ marginBottom: '15px', color: 'var(--blaze-basketball)', fontFamily: 'var(--font-display)' }}>
                      <i className="fas fa-star" style={{ marginRight: '10px' }}></i>
                      Game Leaders
                    </h3>
                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))', gap: '15px' }}>
                      {leaders.map((teamLeaders, idx) => (
                        <div key={idx} className="stat-box" style={{ textAlign: 'left' }}>
                          <div style={{ fontWeight: '600', marginBottom: '10px', color: 'var(--text-primary)' }}>{teamLeaders.team}</div>
                          {teamLeaders.categories?.map((cat, cIdx) => (
                            <div key={cIdx} style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '5px' }}>
                              <span style={{ color: 'var(--text-tertiary)' }}>{cat.category}</span>
                              <span style={{ color: 'var(--blaze-basketball)', fontWeight: '600' }}>
                                {cat.leader?.name}: {cat.leader?.value}
                              </span>
                            </div>
                          ))}
                        </div>
                      ))}
                    </div>
                  </>
                )}

                <div className="data-source" style={{ marginTop: '25px' }}>
                  <i className="fas fa-database"></i> Data Source: ESPN NBA API via blazesportsintel.com/api
                </div>
              </div>
            </div>
          );
        };

        return (
          <div>
            <div className="tabs">
              <button
                className={`tab ${activeTab === 'standings' ? 'active' : ''}`}
                onClick={() => setActiveTab('standings')}
              >
                <i className="fas fa-list-ol"></i> Standings
              </button>
              <button
                className={`tab ${activeTab === 'scores' ? 'active' : ''}`}
                onClick={() => setActiveTab('scores')}
              >
                <i className="fas fa-basketball-ball"></i> Scores
              </button>
              <button
                className={`tab ${activeTab === 'teams' ? 'active' : ''}`}
                onClick={() => setActiveTab('teams')}
              >
                <i className="fas fa-users"></i> Teams
              </button>
            </div>

            {activeTab === 'standings' && renderStandings()}
            {activeTab === 'scores' && renderScores()}
            {activeTab === 'teams' && renderTeams()}

            {/* Modals */}
            {selectedTeam && renderTeamRosterModal()}
            {selectedPlayer && playerStats && renderPlayerStatsModal()}
            {selectedGame && gameDetails && renderGameDetailsModal()}
          </div>
        );
      }

      ReactDOM.render(<NBADashboard />, document.getElementById('root'));
    </script>

    <!-- Blaze Advanced Graphics System V4 -->
    <script>
      let blazeParticles = null;
      let blazePostprocessing = null;

      async function initAdvancedGraphics() {
        const canvas = document.getElementById('particle-field');
        if (!canvas || typeof THREE === 'undefined') {
          console.warn('Three.js or canvas not available');
          return;
        }

        try {
          console.log('Initializing NBA V4 Graphics System...');

          // Initialize Premium V4 Particle Engine with basketball orange accent
          blazeParticles = new BlazeParticleEngineV4('particle-field', {
            particleCount: 100000,
            particleSize: 2.5,
            dataNodeCount: 70,
            connectionCount: 120,
            enableMouseInteraction: true,
            enableParallax: true,
            enableFog: true,
            // Basketball court orange accent
            accentColor: '#E25822',
          });

          await blazeParticles.init();
          console.log(`NBA Particle Engine initialized with ${blazeParticles.useWebGPU ? 'WebGPU' : 'WebGL2'}`);

          // Initialize Postprocessing Effects
          if (typeof blazeParticles.renderer !== 'undefined') {
            try {
              blazePostprocessing = new BlazePostprocessing(
                blazeParticles.scene,
                blazeParticles.camera,
                blazeParticles.renderer
              );

              const postprocessingInitialized = await blazePostprocessing.init();
              if (postprocessingInitialized) {
                console.log('NBA Postprocessing pipeline initialized');

                const originalRender = blazeParticles.render.bind(blazeParticles);
                blazeParticles.render = function (deltaTime) {
                  this.update(deltaTime);
                  if (blazePostprocessing && blazePostprocessing.initialized) {
                    blazePostprocessing.render(deltaTime);
                  } else {
                    originalRender(deltaTime);
                  }
                };
              }
            } catch (postError) {
              console.warn('Postprocessing initialization failed, using basic renderer:', postError);
            }
          }

          // Setup scroll-driven effects
          let lastScrollProgress = 0;
          window.addEventListener('scroll', () => {
            if (blazePostprocessing && blazePostprocessing.initialized) {
              const scrollProgress = Math.min(
                window.scrollY / (document.documentElement.scrollHeight - window.innerHeight),
                1
              );
              if (Math.abs(scrollProgress - lastScrollProgress) > 0.01) {
                blazePostprocessing.updateOnScroll(scrollProgress);
                lastScrollProgress = scrollProgress;
              }
            }
          });

          // Setup hover effects
          document.querySelectorAll('.card, .tab, .team-card, .standings-table tr').forEach((card) => {
            card.addEventListener('mouseenter', () => {
              if (blazePostprocessing && blazePostprocessing.initialized) {
                blazePostprocessing.onCardHover(true);
              }
            });
            card.addEventListener('mouseleave', () => {
              if (blazePostprocessing && blazePostprocessing.initialized) {
                blazePostprocessing.onCardHover(false);
              }
            });
          });

          console.log('NBA V4 Graphics System Ready!');
        } catch (error) {
          console.error('Error initializing NBA advanced graphics:', error);
        }
      }

      window.addEventListener('load', initAdvancedGraphics);
    </script>

    <!-- Cookie Consent Banner -->
    <script src="/components/CookieConsent.js"></script>

    <!-- Universal Footer -->
    <div id="footer-container"></div>
    <script src="/lib/footer.js"></script>

    <!-- Initialize AOS Animations -->
    <script>
      if (typeof AOS !== 'undefined') {
        AOS.init({
          duration: 800,
          easing: 'ease-in-out',
          once: true,
          offset: 100,
          delay: 100
        });
      }
    </script>
  </body>
</html>

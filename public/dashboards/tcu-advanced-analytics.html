<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TCU Horned Frogs Advanced Analytics | Blaze Sports Intel</title>
      <link rel="stylesheet" href="/css/bsi-tokens.css">
  <style>
        :root { --team-primary: #4D1979; --team-secondary: #FFFFFF; --bg-dark: #0d0d0d; --bg-card: #1a1a1a; --text-primary: #ffffff; --text-secondary: #a0a0a0; --success: #22c55e; --danger: #ef4444; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: var(--bg-dark); color: var(--text-primary); line-height: 1.6; }
        .header { background: linear-gradient(135deg, var(--team-primary) 0%, #35105a 100%); padding: 2rem; text-align: center; }
        .header h1 { font-size: 2.5rem; margin-bottom: 0.5rem; }
        .header p { opacity: 0.9; }
        .container { max-width: 1400px; margin: 0 auto; padding: 2rem; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-bottom: 2rem; }
        .card { background: var(--bg-card); border-radius: 12px; padding: 1.5rem; border: 1px solid #333; }
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 2px solid var(--team-primary); }
        .card-title { font-size: 1.1rem; font-weight: 600; }
        .stat-value { font-size: 2rem; font-weight: 700; color: var(--team-primary); }
        .stat-label { font-size: 0.85rem; color: var(--text-secondary); }
        .stat-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; }
        .stat-item { text-align: center; padding: 1rem; background: rgba(77,25,121,0.15); border-radius: 8px; }
        .standings-table { width: 100%; border-collapse: collapse; font-size: 0.9rem; }
        .standings-table th, .standings-table td { padding: 0.75rem; text-align: left; border-bottom: 1px solid #333; }
        .standings-table th { color: var(--team-primary); font-weight: 600; }
        .standings-table tr:hover { background: rgba(77,25,121,0.1); }
        .highlight-row { background: rgba(77,25,121,0.25) !important; }
        .schedule-item { display: flex; justify-content: space-between; align-items: center; padding: 0.75rem; border-bottom: 1px solid #333; }
        .schedule-item:last-child { border-bottom: none; }
        .game-result { padding: 0.25rem 0.75rem; border-radius: 4px; font-weight: 600; font-size: 0.85rem; }
        .win { background: var(--success); color: white; }
        .loss { background: var(--danger); color: white; }
        .upcoming { background: #333; color: var(--text-secondary); }
        .pythagorean-display { text-align: center; padding: 2rem; }
        .pyth-value { font-size: 3rem; font-weight: 700; color: var(--team-primary); }
        .pyth-record { font-size: 1.5rem; color: var(--text-secondary); margin-top: 0.5rem; }
        .progress-bar { height: 8px; background: #333; border-radius: 4px; overflow: hidden; margin-top: 0.5rem; }
        .progress-fill { height: 100%; background: var(--team-primary); }
        .metric-row { display: flex; justify-content: space-between; align-items: center; padding: 0.5rem 0; }
        .metric-label { color: var(--text-secondary); }
        .metric-value { font-weight: 600; color: var(--team-primary); }
        .refresh-time { text-align: center; color: var(--text-secondary); font-size: 0.85rem; margin-top: 1rem; }
        .loading { text-align: center; padding: 2rem; color: var(--text-secondary); }
        @media (max-width: 768px) { .header h1 { font-size: 1.75rem; } .container { padding: 1rem; } .stat-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="header"><h1>üê∏ TCU Horned Frogs</h1><p>Advanced Analytics Dashboard | Big 12 Conference</p></div>
    <div class="container">
        <div class="grid" id="header-stats"></div>
        <div class="grid">
            <div class="card"><div class="card-header"><span class="card-title">Big 12 Standings</span></div><div id="standings-content"><div class="loading">Loading standings...</div></div></div>
            <div class="card"><div class="card-header"><span class="card-title">Pythagorean Win Expectancy</span></div><div id="pythagorean-content"><div class="loading">Calculating...</div></div></div>
        </div>
        <div class="grid">
            <div class="card"><div class="card-header"><span class="card-title">Offensive Performance</span></div><div id="offense-content"><div class="loading">Loading...</div></div></div>
            <div class="card"><div class="card-header"><span class="card-title">Defensive Performance</span></div><div id="defense-content"><div class="loading">Loading...</div></div></div>
        </div>
        <div class="card" style="margin-bottom: 1.5rem;"><div class="card-header"><span class="card-title">2025-26 Schedule & Results</span></div><div id="schedule-content"><div class="loading">Loading schedule...</div></div></div>
        <div class="grid">
            <div class="card"><div class="card-header"><span class="card-title">Scoring Analysis</span></div><div id="scoring-content"><div class="loading">Loading...</div></div></div>
            <div class="card"><div class="card-header"><span class="card-title">Efficiency Metrics</span></div><div id="efficiency-content"><div class="loading">Loading...</div></div></div>
        </div>
        <div class="refresh-time" id="refresh-time"></div>
    </div>
    <script>
        const ESPN_BASE='https://site.api.espn.com/apis/site/v2/sports/football/college-football';const ESPN_V2='https://site.api.espn.com/apis/v2/sports/football/college-football';const TEAM_ID='2628';const CONF_GROUP='4';const CFB_PYTHAGOREAN_EXP=2.37;let teamStats={pointsFor:0,pointsAgainst:0,wins:0,losses:0,gamesPlayed:0};
        async function fetchTeamData(){try{const res=await fetch(`${ESPN_BASE}/teams/${TEAM_ID}`);const data=await res.json();return data.team;}catch(e){return null;}}
        async function fetchSchedule(){try{const res=await fetch(`${ESPN_BASE}/teams/${TEAM_ID}/schedule`);const data=await res.json();return data.events||[];}catch(e){return[];}}
        async function fetchStandings(){try{const res=await fetch(`${ESPN_V2}/standings?group=${CONF_GROUP}`);const data=await res.json();return data.standings||[];}catch(e){return[];}}
        async function fetchStats(){try{const res=await fetch(`${ESPN_BASE}/teams/${TEAM_ID}/statistics`);const data=await res.json();return data.statistics||[];}catch(e){return[];}}
        function calculatePythagorean(pf,pa){if(pa===0)return pf>0?1:0.5;return Math.pow(pf,CFB_PYTHAGOREAN_EXP)/(Math.pow(pf,CFB_PYTHAGOREAN_EXP)+Math.pow(pa,CFB_PYTHAGOREAN_EXP));}
        function renderHeaderStats(team){const record=team.record?.items?.[0];const stats=record?.stats||[];const wins=stats.find(s=>s.name==='wins')?.value||0;const losses=stats.find(s=>s.name==='losses')?.value||0;const pf=stats.find(s=>s.name==='pointsFor')?.value||0;const pa=stats.find(s=>s.name==='pointsAgainst')?.value||0;teamStats={pointsFor:pf,pointsAgainst:pa,wins,losses,gamesPlayed:wins+losses};document.getElementById('header-stats').innerHTML=`<div class="card"><div class="stat-item"><div class="stat-value">${wins}-${losses}</div><div class="stat-label">Record</div></div></div><div class="card"><div class="stat-item"><div class="stat-value">${pf}</div><div class="stat-label">Points For</div></div></div><div class="card"><div class="stat-item"><div class="stat-value">${pa}</div><div class="stat-label">Points Against</div></div></div><div class="card"><div class="stat-item"><div class="stat-value">${(pf-pa)>0?'+':''}${pf-pa}</div><div class="stat-label">Point Differential</div></div></div>`;}
        function renderStandings(standings){if(!standings.length){document.getElementById('standings-content').innerHTML='<p>No standings data</p>';return;}let teams=[];standings.forEach(conf=>{if(conf.entries)teams=teams.concat(conf.entries);});teams.sort((a,b)=>(b.stats?.find(s=>s.name==='wins')?.value||0)-(a.stats?.find(s=>s.name==='wins')?.value||0));let html='<table class="standings-table"><thead><tr><th>Team</th><th>W</th><th>L</th><th>PF</th><th>PA</th></tr></thead><tbody>';teams.slice(0,16).forEach(entry=>{const s=entry.stats||[];const w=s.find(x=>x.name==='wins')?.value||0;const l=s.find(x=>x.name==='losses')?.value||0;const pf=s.find(x=>x.name==='pointsFor')?.value||0;const pa=s.find(x=>x.name==='pointsAgainst')?.value||0;html+=`<tr class="${entry.team?.id==TEAM_ID?'highlight-row':''}"><td>${entry.team?.displayName||'Unknown'}</td><td>${w}</td><td>${l}</td><td>${pf}</td><td>${pa}</td></tr>`;});html+='</tbody></table>';document.getElementById('standings-content').innerHTML=html;}
        function renderPythagorean(){const{pointsFor,pointsAgainst,wins,gamesPlayed}=teamStats;if(gamesPlayed===0){document.getElementById('pythagorean-content').innerHTML='<p>No games played yet</p>';return;}const pyth=calculatePythagorean(pointsFor,pointsAgainst);const expectedWins=Math.round(pyth*gamesPlayed*10)/10;const diff=expectedWins-wins;document.getElementById('pythagorean-content').innerHTML=`<div class="pythagorean-display"><div class="pyth-value">${(pyth*100).toFixed(1)}%</div><div class="pyth-record">Expected: ${expectedWins.toFixed(1)} wins</div><div class="pyth-record">Actual: ${wins} wins (${diff>0?'+':''}${diff.toFixed(1)})</div><div class="progress-bar"><div class="progress-fill" style="width:${pyth*100}%"></div></div></div>`;}
        function renderSchedule(events){if(!events.length){document.getElementById('schedule-content').innerHTML='<p>No schedule data</p>';return;}let html='';events.forEach(evt=>{const comp=evt.competitions?.[0];const homeTeam=comp?.competitors?.find(c=>c.homeAway==='home');const awayTeam=comp?.competitors?.find(c=>c.homeAway==='away');const isHome=homeTeam?.team?.id==TEAM_ID;const opponent=isHome?awayTeam:homeTeam;const teamScore=isHome?homeTeam?.score:awayTeam?.score;const oppScore=isHome?awayTeam?.score:homeTeam?.score;const status=evt.status?.type?.name;let resultClass='upcoming';let resultText='Upcoming';if(status==='STATUS_FINAL'){resultClass=parseInt(teamScore)>parseInt(oppScore)?'win':'loss';resultText=resultClass==='win'?`W ${teamScore}-${oppScore}`:`L ${teamScore}-${oppScore}`;}else if(status==='STATUS_IN_PROGRESS'){resultText='LIVE';}html+=`<div class="schedule-item"><div><strong>${isHome?'vs':'@'} ${opponent?.team?.displayName||'TBD'}</strong><br><span style="color:var(--text-secondary);font-size:0.85rem">${new Date(evt.date).toLocaleDateString('en-US',{month:'short',day:'numeric'})}</span></div><span class="game-result ${resultClass}">${resultText}</span></div>`;});document.getElementById('schedule-content').innerHTML=html;}
        function renderOffense(stats){const offense=stats.find(s=>s.type==='offense')?.stats||[];document.getElementById('offense-content').innerHTML=`<div class="stat-grid"><div class="stat-item"><div class="stat-value">${offense.find(s=>s.name==='totalPointsPerGame')?.value||'N/A'}</div><div class="stat-label">Points/Game</div></div><div class="stat-item"><div class="stat-value">${offense.find(s=>s.name==='totalYards')?.value||'N/A'}</div><div class="stat-label">Total Yards</div></div><div class="stat-item"><div class="stat-value">${offense.find(s=>s.name==='netPassingYards')?.value||'N/A'}</div><div class="stat-label">Pass Yards</div></div><div class="stat-item"><div class="stat-value">${offense.find(s=>s.name==='rushingYards')?.value||'N/A'}</div><div class="stat-label">Rush Yards</div></div></div>`;}
        function renderDefense(stats){const defense=stats.find(s=>s.type==='defense')?.stats||[];document.getElementById('defense-content').innerHTML=`<div class="stat-grid"><div class="stat-item"><div class="stat-value">${defense.find(s=>s.name==='totalPointsPerGame')?.value||'N/A'}</div><div class="stat-label">Pts Allowed/Game</div></div><div class="stat-item"><div class="stat-value">${defense.find(s=>s.name==='totalYards')?.value||'N/A'}</div><div class="stat-label">Yds Allowed</div></div><div class="stat-item"><div class="stat-value">${defense.find(s=>s.name==='sacks')?.value||'N/A'}</div><div class="stat-label">Sacks</div></div><div class="stat-item"><div class="stat-value">${defense.find(s=>s.name==='interceptions')?.value||'N/A'}</div><div class="stat-label">Interceptions</div></div></div>`;}
        function renderScoring(){const{pointsFor,pointsAgainst,gamesPlayed}=teamStats;if(gamesPlayed===0){document.getElementById('scoring-content').innerHTML='<p>No data</p>';return;}document.getElementById('scoring-content').innerHTML=`<div class="metric-row"><span class="metric-label">Points Per Game</span><span class="metric-value">${(pointsFor/gamesPlayed).toFixed(1)}</span></div><div class="metric-row"><span class="metric-label">Points Allowed/Game</span><span class="metric-value">${(pointsAgainst/gamesPlayed).toFixed(1)}</span></div><div class="metric-row"><span class="metric-label">Avg Margin</span><span class="metric-value">${((pointsFor-pointsAgainst)/gamesPlayed).toFixed(1)}</span></div><div class="metric-row"><span class="metric-label">Total Points</span><span class="metric-value">${pointsFor}</span></div>`;}
        function renderEfficiency(stats){const offense=stats.find(s=>s.type==='offense')?.stats||[];document.getElementById('efficiency-content').innerHTML=`<div class="metric-row"><span class="metric-label">3rd Down %</span><span class="metric-value">${offense.find(s=>s.name==='thirdDownConvPct')?.value||'N/A'}%</span></div><div class="metric-row"><span class="metric-label">4th Down %</span><span class="metric-value">${offense.find(s=>s.name==='fourthDownConvPct')?.value||'N/A'}%</span></div><div class="metric-row"><span class="metric-label">Red Zone %</span><span class="metric-value">${offense.find(s=>s.name==='redZonePct')?.value||'N/A'}%</span></div><div class="metric-row"><span class="metric-label">Avg TOP</span><span class="metric-value">${offense.find(s=>s.name==='avgTimeOfPossession')?.value||'N/A'}</span></div>`;}
        async function init(){const[team,schedule,standings,stats]=await Promise.all([fetchTeamData(),fetchSchedule(),fetchStandings(),fetchStats()]);if(team)renderHeaderStats(team);renderStandings(standings);renderPythagorean();renderSchedule(schedule);renderOffense(stats);renderDefense(stats);renderScoring();renderEfficiency(stats);document.getElementById('refresh-time').textContent=`Last updated: ${new Date().toLocaleString('en-US',{timeZone:'America/Chicago'})} CT`;}
        init();setInterval(init,300000);
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Florida Gators Advanced Analytics | Blaze Sports Intel</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --team-primary: #0021A5; --team-secondary: #FA4616; --bg-dark: #0D0D0D; --bg-card: #1A1A1A; --bg-card-hover: #242424; --text-primary: #FFFFFF; --text-secondary: #A0A0A0; --text-muted: #666666; --border-color: #333333; --success: #22C55E; --danger: #EF4444; --warning: #F59E0B; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; background: var(--bg-dark); color: var(--text-primary); min-height: 100vh; line-height: 1.5; }
        .dashboard-container { max-width: 1400px; margin: 0 auto; padding: 24px; }
        .team-header { background: linear-gradient(135deg, var(--team-primary) 0%, #001570 100%); border-radius: 16px; padding: 32px; margin-bottom: 24px; position: relative; overflow: hidden; }
        .team-header::before { content: ''; position: absolute; top: 0; right: 0; width: 300px; height: 100%; background: linear-gradient(90deg, transparent, rgba(250,70,22,0.2)); pointer-events: none; }
        .team-title { display: flex; align-items: center; gap: 16px; margin-bottom: 24px; }
        .team-logo { width: 72px; height: 72px; background: var(--team-secondary); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: 700; color: white; }
        .team-name h1 { font-size: 28px; font-weight: 700; margin-bottom: 4px; }
        .team-name p { color: rgba(255,255,255,0.7); font-size: 14px; }
        .header-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 16px; }
        .header-stat { background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); border-radius: 12px; padding: 16px; text-align: center; }
        .header-stat-value { font-size: 24px; font-weight: 700; margin-bottom: 4px; }
        .header-stat-label { font-size: 11px; color: rgba(255,255,255,0.7); text-transform: uppercase; letter-spacing: 0.5px; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 20px; margin-bottom: 24px; }
        .stat-card { background: var(--bg-card); border-radius: 16px; padding: 20px; border: 1px solid var(--border-color); transition: all 0.2s ease; }
        .stat-card:hover { background: var(--bg-card-hover); border-color: var(--team-secondary); }
        .stat-card.full-width { grid-column: 1 / -1; }
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
        .card-title { font-size: 15px; font-weight: 600; }
        .card-badge { background: var(--team-primary); color: white; padding: 4px 10px; border-radius: 20px; font-size: 10px; font-weight: 600; text-transform: uppercase; }
        .standings-table { width: 100%; border-collapse: collapse; }
        .standings-table th { text-align: left; padding: 10px 8px; font-size: 10px; font-weight: 600; color: var(--text-secondary); text-transform: uppercase; border-bottom: 1px solid var(--border-color); }
        .standings-table td { padding: 10px 8px; font-size: 13px; border-bottom: 1px solid var(--border-color); }
        .standings-table tr:last-child td { border-bottom: none; }
        .standings-table tr.highlight { background: rgba(0,33,165,0.2); }
        .standings-table tr.highlight td:first-child { border-left: 3px solid var(--team-secondary); padding-left: 12px; }
        .team-cell { display: flex; align-items: center; gap: 8px; }
        .team-abbr { width: 26px; height: 26px; background: var(--bg-card-hover); border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 9px; font-weight: 600; color: var(--text-secondary); }
        .pythagorean-display { text-align: center; padding: 16px; }
        .pyth-value { font-size: 42px; font-weight: 700; color: var(--team-secondary); margin-bottom: 8px; }
        .pyth-label { font-size: 13px; color: var(--text-secondary); margin-bottom: 16px; }
        .pyth-comparison { display: flex; justify-content: center; gap: 24px; padding-top: 16px; border-top: 1px solid var(--border-color); }
        .pyth-stat { text-align: center; }
        .pyth-stat-value { font-size: 20px; font-weight: 600; }
        .pyth-stat-label { font-size: 11px; color: var(--text-secondary); }
        .positive { color: var(--success); }
        .negative { color: var(--danger); }
        .neutral { color: var(--warning); }
        .schedule-list { display: flex; flex-direction: column; gap: 8px; max-height: 400px; overflow-y: auto; }
        .game-item { display: flex; align-items: center; justify-content: space-between; padding: 10px 12px; background: var(--bg-dark); border-radius: 8px; }
        .game-item:hover { background: var(--bg-card-hover); }
        .game-item.upcoming { border-left: 3px solid var(--warning); }
        .game-info { display: flex; align-items: center; gap: 10px; }
        .game-date { font-size: 11px; color: var(--text-secondary); min-width: 70px; }
        .game-opponent { font-weight: 500; font-size: 13px; }
        .game-result { display: flex; align-items: center; gap: 8px; }
        .result-badge { padding: 3px 8px; border-radius: 4px; font-size: 11px; font-weight: 600; }
        .result-badge.win { background: rgba(34,197,94,0.2); color: var(--success); }
        .result-badge.loss { background: rgba(239,68,68,0.2); color: var(--danger); }
        .result-badge.scheduled { background: rgba(245,158,11,0.2); color: var(--warning); }
        .game-score { font-weight: 600; min-width: 50px; text-align: right; font-size: 13px; }
        .stats-row { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; }
        .stat-item { background: var(--bg-dark); border-radius: 8px; padding: 14px; text-align: center; }
        .stat-value { font-size: 24px; font-weight: 700; margin-bottom: 4px; }
        .stat-label { font-size: 11px; color: var(--text-secondary); }
        .efficiency-bars { display: flex; flex-direction: column; gap: 12px; }
        .efficiency-item { display: flex; flex-direction: column; gap: 6px; }
        .efficiency-label { display: flex; justify-content: space-between; font-size: 12px; }
        .efficiency-label span:first-child { color: var(--text-secondary); }
        .efficiency-label span:last-child { font-weight: 600; }
        .efficiency-bar { height: 8px; background: var(--bg-dark); border-radius: 4px; overflow: hidden; }
        .efficiency-fill { height: 100%; border-radius: 4px; transition: width 0.5s ease; }
        .fill-offense { background: linear-gradient(90deg, var(--team-secondary), #FF6B3D); }
        .fill-defense { background: linear-gradient(90deg, var(--team-primary), #0033CC); }
        .fill-special { background: linear-gradient(90deg, var(--warning), #FBBF24); }
        .loading-spinner { display: flex; justify-content: center; align-items: center; padding: 40px; }
        .spinner { width: 36px; height: 36px; border: 3px solid var(--border-color); border-top-color: var(--team-secondary); border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .error-message { text-align: center; padding: 30px; color: var(--danger); font-size: 14px; }
        .last-updated { text-align: center; padding: 16px; color: var(--text-muted); font-size: 11px; }
        .back-link { display: inline-flex; align-items: center; gap: 8px; color: var(--text-secondary); text-decoration: none; font-size: 13px; margin-bottom: 16px; }
        .back-link:hover { color: var(--team-secondary); }
        @media (max-width: 768px) { .dashboard-container { padding: 16px; } .team-header { padding: 20px; } .team-name h1 { font-size: 22px; } .header-stats { grid-template-columns: repeat(2, 1fr); } .stats-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <a href="/dashboards" class="back-link">← Back to Dashboards</a>
        <header class="team-header">
            <div class="team-title">
                <div class="team-logo">UF</div>
                <div class="team-name">
                    <h1>Florida Gators</h1>
                    <p>SEC • 2025 Season</p>
                </div>
            </div>
            <div class="header-stats" id="headerStats"><div class="loading-spinner"><div class="spinner"></div></div></div>
        </header>
        <div class="stats-grid">
            <div class="stat-card"><div class="card-header"><span class="card-title">SEC Standings</span><span class="card-badge">Conference</span></div><div id="standingsContent"><div class="loading-spinner"><div class="spinner"></div></div></div></div>
            <div class="stat-card"><div class="card-header"><span class="card-title">Pythagorean Expectancy</span><span class="card-badge">Analytics</span></div><div id="pythagoreanContent"><div class="loading-spinner"><div class="spinner"></div></div></div></div>
            <div class="stat-card"><div class="card-header"><span class="card-title">Offensive Performance</span><span class="card-badge">Offense</span></div><div id="offenseContent"><div class="loading-spinner"><div class="spinner"></div></div></div></div>
            <div class="stat-card"><div class="card-header"><span class="card-title">Defensive Performance</span><span class="card-badge">Defense</span></div><div id="defenseContent"><div class="loading-spinner"><div class="spinner"></div></div></div></div>
            <div class="stat-card full-width"><div class="card-header"><span class="card-title">2025 Schedule & Results</span><span class="card-badge">Schedule</span></div><div id="scheduleContent"><div class="loading-spinner"><div class="spinner"></div></div></div></div>
            <div class="stat-card"><div class="card-header"><span class="card-title">Scoring Analysis</span><span class="card-badge">Points</span></div><div id="scoringContent"><div class="loading-spinner"><div class="spinner"></div></div></div></div>
            <div class="stat-card"><div class="card-header"><span class="card-title">Efficiency Metrics</span><span class="card-badge">Advanced</span></div><div id="efficiencyContent"><div class="loading-spinner"><div class="spinner"></div></div></div></div>
        </div>
        <div class="last-updated" id="lastUpdated">Loading data...</div>
    </div>
    <script>
        const ESPN_BASE = 'https://site.api.espn.com/apis/site/v2/sports/football/college-football';
        const ESPN_V2 = 'https://site.api.espn.com/apis/v2/sports/football/college-football';
        const TEAM_ID = '57';
        const CONF_GROUP = '8';
        const CFB_PYTHAGOREAN_EXP = 2.37;
        let teamData = null, standingsData = null, scheduleData = null;

        async function fetchTeamData() { try { const r = await fetch(`${ESPN_BASE}/teams/${TEAM_ID}`); const d = await r.json(); teamData = d.team; return teamData; } catch(e) { return null; } }
        async function fetchStandings() { try { const r = await fetch(`${ESPN_V2}/standings?group=${CONF_GROUP}`); const d = await r.json(); standingsData = d; return d; } catch(e) { return null; } }
        async function fetchSchedule() { try { const r = await fetch(`${ESPN_BASE}/teams/${TEAM_ID}/schedule`); const d = await r.json(); scheduleData = d; return d; } catch(e) { return null; } }

        function getTeamRecord(team) { if(team?.record?.items) { const o = team.record.items.find(r=>r.type==='total')||team.record.items[0]; if(o?.stats) { return { wins: o.stats.find(s=>s.name==='wins')?.value||0, losses: o.stats.find(s=>s.name==='losses')?.value||0 }; } if(o?.summary) { const p=o.summary.split('-'); return { wins:parseInt(p[0])||0, losses:parseInt(p[1])||0 }; } } return { wins:0, losses:0 }; }

        function renderHeaderStats() { const c=document.getElementById('headerStats'); if(!teamData){c.innerHTML='<div class="error-message">Unable to load</div>';return;} const r=getTeamRecord(teamData); const wp=r.wins+r.losses>0?((r.wins/(r.wins+r.losses))*100).toFixed(1)+'%':'0.0%'; let cr='-'; if(teamData.record?.items){const ci=teamData.record.items.find(r=>r.type==='vsconf');if(ci?.summary)cr=ci.summary;} let rk='-';if(teamData.rank)rk=`#${teamData.rank}`; let hr='-',ar='-'; if(teamData.record?.items){const h=teamData.record.items.find(r=>r.type==='home');const a=teamData.record.items.find(r=>r.type==='road');if(h?.summary)hr=h.summary;if(a?.summary)ar=a.summary;} c.innerHTML=`<div class="header-stat"><div class="header-stat-value">${r.wins}-${r.losses}</div><div class="header-stat-label">Overall</div></div><div class="header-stat"><div class="header-stat-value">${cr}</div><div class="header-stat-label">SEC</div></div><div class="header-stat"><div class="header-stat-value">${hr}</div><div class="header-stat-label">Home</div></div><div class="header-stat"><div class="header-stat-value">${ar}</div><div class="header-stat-label">Away</div></div><div class="header-stat"><div class="header-stat-value">${wp}</div><div class="header-stat-label">Win %</div></div><div class="header-stat"><div class="header-stat-value">${rk}</div><div class="header-stat-label">AP Rank</div></div>`; }

        function renderStandings() { const c=document.getElementById('standingsContent'); if(!standingsData?.standings){c.innerHTML='<div class="error-message">Unable to load</div>';return;} let ct=[]; standingsData.standings.forEach(g=>{if(g.entries){g.entries.forEach(e=>{if(e.team){const s={};e.stats?.forEach(st=>{s[st.name]=st.displayValue||st.value;});ct.push({id:e.team.id,name:e.team.displayName||e.team.name,abbr:e.team.abbreviation,confWins:parseInt(s.conferenceWins)||parseInt(s.wins)||0,confLosses:parseInt(s.conferenceLosses)||parseInt(s.losses)||0,overallWins:parseInt(s.wins)||0,overallLosses:parseInt(s.losses)||0,pct:s.winPercent||'.000'});}});}}); ct.sort((a,b)=>{if(b.confWins!==a.confWins)return b.confWins-a.confWins;return a.confLosses-b.confLosses;}); const dt=ct.slice(0,12); if(dt.length===0){c.innerHTML='<div class="error-message">No data</div>';return;} let h=`<table class="standings-table"><thead><tr><th>Team</th><th>Conf</th><th>Overall</th><th>PCT</th></tr></thead><tbody>`; dt.forEach(t=>{const it=t.id===TEAM_ID;h+=`<tr class="${it?'highlight':''}"><td><div class="team-cell"><span class="team-abbr">${t.abbr}</span><span>${t.name}</span></div></td><td>${t.confWins}-${t.confLosses}</td><td>${t.overallWins}-${t.overallLosses}</td><td>${t.pct}</td></tr>`;}); h+='</tbody></table>';c.innerHTML=h; }

        function calculatePythagorean() { const c=document.getElementById('pythagoreanContent'); if(!scheduleData?.events){c.innerHTML='<div class="error-message">Unable to calculate</div>';return;} let ps=0,pa=0,gp=0; scheduleData.events.forEach(e=>{const cp=e.competitions?.[0];if(cp?.status?.type?.completed){let ts=0,os=0;cp.competitors?.forEach(cm=>{if(cm.team?.id===TEAM_ID)ts=parseInt(cm.score)||0;else os=parseInt(cm.score)||0;});if(ts>0||os>0){ps+=ts;pa+=os;gp++;}}}); if(gp===0){c.innerHTML='<div class="error-message">No games</div>';return;} const pse=Math.pow(ps,CFB_PYTHAGOREAN_EXP),pae=Math.pow(pa,CFB_PYTHAGOREAN_EXP);const pwp=pse/(pse+pae);const ew=Math.round(pwp*gp);const rec=getTeamRecord(teamData);const aw=rec.wins;const wd=aw-ew;const dc=wd>0?'positive':wd<0?'negative':'neutral';const ds=wd>0?'+':''; c.innerHTML=`<div class="pythagorean-display"><div class="pyth-value">${(pwp*100).toFixed(1)}%</div><div class="pyth-label">Expected Win %</div><div class="pyth-comparison"><div class="pyth-stat"><div class="pyth-stat-value">${ew}</div><div class="pyth-stat-label">Expected W</div></div><div class="pyth-stat"><div class="pyth-stat-value">${aw}</div><div class="pyth-stat-label">Actual W</div></div><div class="pyth-stat"><div class="pyth-stat-value ${dc}">${ds}${wd}</div><div class="pyth-stat-label">Luck</div></div></div></div>`; }

        function renderSchedule() { const c=document.getElementById('scheduleContent'); if(!scheduleData?.events){c.innerHTML='<div class="error-message">Unable to load</div>';return;} const games=scheduleData.events.sort((a,b)=>new Date(a.date)-new Date(b.date)); if(games.length===0){c.innerHTML='<div class="error-message">No games</div>';return;} let h='<div class="schedule-list">'; games.forEach(ev=>{const cp=ev.competitions?.[0];if(!cp)return;const ic=cp.status?.type?.completed;const cms=cp.competitors||[];let ih=false,on='',or='',ts=0,os=0;cms.forEach(cm=>{if(cm.team?.id===TEAM_ID){ih=cm.homeAway==='home';ts=parseInt(cm.score)||0;}else{on=cm.team?.abbreviation||'TBD';if(cm.curatedRank?.current&&cm.curatedRank.current<=25)or=`#${cm.curatedRank.current} `;os=parseInt(cm.score)||0;}});const gd=new Date(ev.date);const ds=gd.toLocaleDateString('en-US',{month:'short',day:'numeric'});const pf=ih?'vs':'@';const iw=ts>os;if(ic){h+=`<div class="game-item"><div class="game-info"><span class="game-date">${ds}</span><span class="game-opponent">${pf} ${or}${on}</span></div><div class="game-result"><span class="result-badge ${iw?'win':'loss'}">${iw?'W':'L'}</span><span class="game-score">${ts}-${os}</span></div></div>`;}else{const tm=gd.toLocaleTimeString('en-US',{hour:'numeric',minute:'2-digit'});h+=`<div class="game-item upcoming"><div class="game-info"><span class="game-date">${ds}</span><span class="game-opponent">${pf} ${or}${on}</span></div><div class="game-result"><span class="result-badge scheduled">${tm}</span></div></div>`;}}); h+='</div>';c.innerHTML=h; }

        function renderOffense() { const c=document.getElementById('offenseContent'); if(!scheduleData?.events){c.innerHTML='<div class="error-message">Unable to load</div>';return;} let tp=0,gp=0,mx=0; scheduleData.events.forEach(e=>{const cp=e.competitions?.[0];if(cp?.status?.type?.completed){cp.competitors?.forEach(cm=>{if(cm.team?.id===TEAM_ID){const p=parseInt(cm.score)||0;tp+=p;if(p>mx)mx=p;gp++;}});}}); const ppg=gp>0?(tp/gp).toFixed(1):'0.0'; c.innerHTML=`<div class="stats-row"><div class="stat-item"><div class="stat-value">${ppg}</div><div class="stat-label">Points/Game</div></div><div class="stat-item"><div class="stat-value">${tp}</div><div class="stat-label">Total Points</div></div><div class="stat-item"><div class="stat-value">${mx}</div><div class="stat-label">Season High</div></div><div class="stat-item"><div class="stat-value">${gp}</div><div class="stat-label">Games</div></div></div>`; }

        function renderDefense() { const c=document.getElementById('defenseContent'); if(!scheduleData?.events){c.innerHTML='<div class="error-message">Unable to load</div>';return;} let ta=0,gp=0,so=0,mn=999; scheduleData.events.forEach(e=>{const cp=e.competitions?.[0];if(cp?.status?.type?.completed){cp.competitors?.forEach(cm=>{if(cm.team?.id!==TEAM_ID){const p=parseInt(cm.score)||0;ta+=p;if(p===0)so++;if(p<mn)mn=p;}else gp++;});}}); const papg=gp>0?(ta/gp).toFixed(1):'0.0';if(mn===999)mn=0; c.innerHTML=`<div class="stats-row"><div class="stat-item"><div class="stat-value">${papg}</div><div class="stat-label">Points Allowed/G</div></div><div class="stat-item"><div class="stat-value">${ta}</div><div class="stat-label">Total Allowed</div></div><div class="stat-item"><div class="stat-value">${so}</div><div class="stat-label">Shutouts</div></div><div class="stat-item"><div class="stat-value">${mn}</div><div class="stat-label">Fewest Allowed</div></div></div>`; }

        function renderScoring() { const c=document.getElementById('scoringContent'); if(!scheduleData?.events){c.innerHTML='<div class="error-message">Unable to load</div>';return;} let ps=0,pa=0,gp=0,bo=0,cg=0; scheduleData.events.forEach(e=>{const cp=e.competitions?.[0];if(cp?.status?.type?.completed){let ts=0,os=0;cp.competitors?.forEach(cm=>{if(cm.team?.id===TEAM_ID)ts=parseInt(cm.score)||0;else os=parseInt(cm.score)||0;});ps+=ts;pa+=os;gp++;const mg=Math.abs(ts-os);if(mg>=21)bo++;if(mg<=7)cg++;}}); const df=ps-pa;const dc=df>0?'positive':df<0?'negative':'neutral';const ds=df>0?'+':'';const am=gp>0?(df/gp).toFixed(1):'0.0';const ms=parseFloat(am)>0?'+':''; c.innerHTML=`<div class="stats-row"><div class="stat-item"><div class="stat-value ${dc}">${ds}${df}</div><div class="stat-label">Point Diff</div></div><div class="stat-item"><div class="stat-value">${ms}${am}</div><div class="stat-label">Avg Margin</div></div><div class="stat-item"><div class="stat-value">${bo}</div><div class="stat-label">Blowouts (21+)</div></div><div class="stat-item"><div class="stat-value">${cg}</div><div class="stat-label">Close Games</div></div></div>`; }

        function renderEfficiency() { const c=document.getElementById('efficiencyContent'); if(!scheduleData?.events){c.innerHTML='<div class="error-message">Unable to load</div>';return;} let ps=0,pa=0,gp=0; scheduleData.events.forEach(e=>{const cp=e.competitions?.[0];if(cp?.status?.type?.completed){cp.competitors?.forEach(cm=>{if(cm.team?.id===TEAM_ID){ps+=parseInt(cm.score)||0;gp++;}else pa+=parseInt(cm.score)||0;});}}); const ppg=gp>0?ps/gp:0,papg=gp>0?pa/gp:0;const op=Math.min((ppg/50)*100,100),dp=Math.max(100-(papg/50)*100,0),ov=(op+dp)/2; c.innerHTML=`<div class="efficiency-bars"><div class="efficiency-item"><div class="efficiency-label"><span>Offensive Rating</span><span>${ppg.toFixed(1)} PPG</span></div><div class="efficiency-bar"><div class="efficiency-fill fill-offense" style="width:${op}%"></div></div></div><div class="efficiency-item"><div class="efficiency-label"><span>Defensive Rating</span><span>${papg.toFixed(1)} PA/G</span></div><div class="efficiency-bar"><div class="efficiency-fill fill-defense" style="width:${dp}%"></div></div></div><div class="efficiency-item"><div class="efficiency-label"><span>Overall Efficiency</span><span>${ov.toFixed(0)}%</span></div><div class="efficiency-bar"><div class="efficiency-fill fill-special" style="width:${ov}%"></div></div></div></div>`; }

        function updateLastUpdated() { const n=new Date();const o={timeZone:'America/Chicago',month:'short',day:'numeric',year:'numeric',hour:'numeric',minute:'2-digit',hour12:true};document.getElementById('lastUpdated').textContent=`Last updated: ${n.toLocaleString('en-US',o)} CT • Data from ESPN`; }

        async function initDashboard() { await Promise.all([fetchTeamData(),fetchStandings(),fetchSchedule()]); renderHeaderStats();renderStandings();calculatePythagorean();renderSchedule();renderOffense();renderDefense();renderScoring();renderEfficiency();updateLastUpdated(); }
        document.addEventListener('DOMContentLoaded',initDashboard);
        setInterval(initDashboard,300000);
    </script>
</body>
</html>

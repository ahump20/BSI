openapi: 3.1.0
info:
  title: Blaze Sports Intel API
  description: |
    Real-time sports data and analytics for MLB, NFL, NBA, College Football,
    College Baseball, NIL valuations, and Transfer Portal updates.

    All data is cached for 30 seconds for optimal performance.
    Timezone: America/Chicago (Central Time).
  version: 1.0.0
  contact:
    name: Austin Humphrey
    email: Austin@blazesportsintel.com
    url: https://blazesportsintel.com
  license:
    name: Proprietary
    url: https://blazesportsintel.com/terms

servers:
  - url: https://bsi-chatgpt-app.blazesportsintel.workers.dev
    description: Production server

paths:
  /mlb/live:
    get:
      operationId: getMLBLiveScores
      summary: Get live MLB scores
      description: |
        Returns all current MLB games with live scores, innings, counts,
        runners on base, and current pitcher/batter matchups.
        Data refreshes every 30 seconds during games.
      responses:
        '200':
          description: Live MLB game data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MLBLiveResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /nfl/live:
    get:
      operationId: getNFLLiveScores
      summary: Get live NFL scores
      description: |
        Returns all current NFL games with live scores, quarter, time remaining,
        possession, and red zone status. Data refreshes every 30 seconds during games.
      responses:
        '200':
          description: Live NFL game data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NFLLiveResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /nba/standings:
    get:
      operationId: getNBAStandings
      summary: Get NBA standings
      description: |
        Returns current NBA standings for both Eastern and Western conferences,
        including wins, losses, win percentage, games behind, and streak.
      responses:
        '200':
          description: NBA standings data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NBAStandingsResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /cfb/analytics:
    get:
      operationId: getCFBAnalytics
      summary: Get college football analytics
      description: |
        Returns college football analytics including rankings, strength of schedule,
        SP+ ratings, and playoff projections. Updated weekly during season.
      responses:
        '200':
          description: CFB analytics data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CFBAnalyticsResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /collegebaseball/boxscore/{teamId}:
    get:
      operationId: getCollegeBaseballBoxScore
      summary: Get college baseball box score for a team
      description: |
        Returns the most recent or current box score for the specified college
        baseball team. Includes batting lines, pitching stats, and play-by-play.
      parameters:
        - name: teamId
          in: path
          required: true
          description: |
            Team identifier. Use lowercase school name (e.g., 'texas', 'lsu',
            'florida', 'vanderbilt', 'arkansas', 'ole-miss', 'texas-am').
          schema:
            type: string
            example: texas
      responses:
        '200':
          description: College baseball box score
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CollegeBaseballBoxScoreResponse'
        '404':
          description: Team not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /nil/valuation/{athleteId}:
    get:
      operationId: getNILValuation
      summary: Get NIL valuation for an athlete
      description: |
        Returns Name, Image, and Likeness (NIL) valuation data for a specific
        college athlete, including estimated value, social media metrics,
        endorsement deals, and comparable athletes.
      parameters:
        - name: athleteId
          in: path
          required: true
          description: |
            Athlete identifier. Use lowercase hyphenated name
            (e.g., 'travis-hunter', 'arch-manning', 'jalen-milroe').
          schema:
            type: string
            example: travis-hunter
      responses:
        '200':
          description: NIL valuation data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NILValuationResponse'
        '404':
          description: Athlete not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /transfer-portal/latest:
    get:
      operationId: getTransferPortalLatest
      summary: Get latest transfer portal entries
      description: |
        Returns the most recent college athlete transfer portal entries and
        commitments across all sports, with a focus on football and basketball.
        Includes player info, previous school, and destination if committed.
      responses:
        '200':
          description: Transfer portal data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransferPortalResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

components:
  schemas:
    MLBLiveResponse:
      type: object
      required:
        - games
        - timestamp
        - source
      properties:
        games:
          type: array
          items:
            $ref: '#/components/schemas/MLBGame'
        timestamp:
          type: string
          format: date-time
          description: Data timestamp in America/Chicago timezone
        source:
          type: string
          example: MLB Stats API via Blaze Sports Intel
        cached:
          type: boolean
          description: Whether this response was served from cache

    MLBGame:
      type: object
      properties:
        gameId:
          type: string
        status:
          type: string
          enum: [pregame, live, final, postponed, suspended]
        inning:
          type: integer
        inningHalf:
          type: string
          enum: [top, bottom]
        awayTeam:
          type: string
        homeTeam:
          type: string
        awayScore:
          type: integer
        homeScore:
          type: integer
        balls:
          type: integer
        strikes:
          type: integer
        outs:
          type: integer
        runnersOnBase:
          type: array
          items:
            type: string
            enum: [first, second, third]
        currentPitcher:
          type: string
        currentBatter:
          type: string
        startTime:
          type: string
          format: date-time

    NFLLiveResponse:
      type: object
      required:
        - games
        - timestamp
        - source
      properties:
        games:
          type: array
          items:
            $ref: '#/components/schemas/NFLGame'
        timestamp:
          type: string
          format: date-time
        source:
          type: string
          example: ESPN via Blaze Sports Intel
        cached:
          type: boolean

    NFLGame:
      type: object
      properties:
        gameId:
          type: string
        status:
          type: string
          enum: [pregame, live, halftime, final]
        quarter:
          type: integer
        timeRemaining:
          type: string
        awayTeam:
          type: string
        homeTeam:
          type: string
        awayScore:
          type: integer
        homeScore:
          type: integer
        possession:
          type: string
        redZone:
          type: boolean
        lastPlay:
          type: string
        startTime:
          type: string
          format: date-time

    NBAStandingsResponse:
      type: object
      required:
        - eastern
        - western
        - timestamp
        - source
      properties:
        eastern:
          type: array
          items:
            $ref: '#/components/schemas/NBATeamStanding'
        western:
          type: array
          items:
            $ref: '#/components/schemas/NBATeamStanding'
        timestamp:
          type: string
          format: date-time
        source:
          type: string
          example: NBA.com via Blaze Sports Intel
        cached:
          type: boolean

    NBATeamStanding:
      type: object
      properties:
        rank:
          type: integer
        team:
          type: string
        wins:
          type: integer
        losses:
          type: integer
        winPct:
          type: number
          format: float
        gamesBehind:
          type: number
        streak:
          type: string
        last10:
          type: string

    CFBAnalyticsResponse:
      type: object
      required:
        - rankings
        - timestamp
        - source
      properties:
        rankings:
          type: array
          items:
            $ref: '#/components/schemas/CFBTeamAnalytics'
        playoffProjection:
          type: array
          items:
            type: string
          description: Projected 12-team playoff field
        timestamp:
          type: string
          format: date-time
        source:
          type: string
          example: ESPN/SP+ via Blaze Sports Intel
        cached:
          type: boolean

    CFBTeamAnalytics:
      type: object
      properties:
        rank:
          type: integer
        team:
          type: string
        conference:
          type: string
        record:
          type: string
        spPlusRating:
          type: number
          format: float
        strengthOfSchedule:
          type: number
          format: float
        playoffOdds:
          type: number
          format: float
          description: Percentage chance of making playoff

    CollegeBaseballBoxScoreResponse:
      type: object
      required:
        - game
        - timestamp
        - source
      properties:
        game:
          $ref: '#/components/schemas/CollegeBaseballGame'
        timestamp:
          type: string
          format: date-time
        source:
          type: string
          example: D1Baseball/NCAA via Blaze Sports Intel
        cached:
          type: boolean

    CollegeBaseballGame:
      type: object
      properties:
        gameId:
          type: string
        status:
          type: string
          enum: [pregame, live, final, postponed]
        inning:
          type: integer
        awayTeam:
          type: string
        homeTeam:
          type: string
        awayScore:
          type: integer
        homeScore:
          type: integer
        venue:
          type: string
        attendance:
          type: integer
        awayBatting:
          type: array
          items:
            $ref: '#/components/schemas/BattingLine'
        homeBatting:
          type: array
          items:
            $ref: '#/components/schemas/BattingLine'
        awayPitching:
          type: array
          items:
            $ref: '#/components/schemas/PitchingLine'
        homePitching:
          type: array
          items:
            $ref: '#/components/schemas/PitchingLine'

    BattingLine:
      type: object
      properties:
        name:
          type: string
        position:
          type: string
        ab:
          type: integer
          description: At bats
        r:
          type: integer
          description: Runs
        h:
          type: integer
          description: Hits
        rbi:
          type: integer
          description: Runs batted in
        bb:
          type: integer
          description: Walks
        so:
          type: integer
          description: Strikeouts
        avg:
          type: string
          description: Batting average

    PitchingLine:
      type: object
      properties:
        name:
          type: string
        ip:
          type: string
          description: Innings pitched
        h:
          type: integer
          description: Hits allowed
        r:
          type: integer
          description: Runs allowed
        er:
          type: integer
          description: Earned runs
        bb:
          type: integer
          description: Walks
        so:
          type: integer
          description: Strikeouts
        pitches:
          type: integer
        decision:
          type: string
          enum: [W, L, S, H, '']

    NILValuationResponse:
      type: object
      required:
        - athlete
        - timestamp
        - source
      properties:
        athlete:
          $ref: '#/components/schemas/NILAthlete'
        timestamp:
          type: string
          format: date-time
        source:
          type: string
          example: On3 NIL Database via Blaze Sports Intel
        cached:
          type: boolean

    NILAthlete:
      type: object
      properties:
        athleteId:
          type: string
        name:
          type: string
        school:
          type: string
        sport:
          type: string
        position:
          type: string
        class:
          type: string
          enum: [Freshman, Sophomore, Junior, Senior]
        estimatedValue:
          type: integer
          description: Estimated NIL value in USD
        socialFollowers:
          type: object
          properties:
            instagram:
              type: integer
            twitter:
              type: integer
            tiktok:
              type: integer
        endorsements:
          type: array
          items:
            type: string
        comparableAthletes:
          type: array
          items:
            type: string

    TransferPortalResponse:
      type: object
      required:
        - success
        - timestamp
        - timezone
        - entries
      properties:
        success:
          type: boolean
        entries:
          type: array
          items:
            $ref: '#/components/schemas/TransferPortalEntry'
        timestamp:
          type: string
          format: date-time
        timezone:
          type: string
          example: America/Chicago
        sport:
          type: string
          nullable: true
        totalAvailable:
          type: integer
        totalCommitted:
          type: integer
        recentCommitments:
          type: integer
        cached:
          type: boolean
          description: Whether this response was served from cache

    TransferPortalEntry:
      type: object
      properties:
        entryId:
          type: string
        athleteName:
          type: string
        sport:
          type: string
          enum: [football, baseball]
        position:
          type: string
        formerSchool:
          type: string
        formerConference:
          type: string
        class:
          type: string
        rating:
          type: number
          nullable: true
        entryDate:
          type: string
        status:
          type: string
          enum: [available, committed, withdrawn]
        newSchool:
          type: string
          nullable: true
        commitDate:
          type: string
          nullable: true
        stats:
          type: object
          additionalProperties:
            type: number
        source:
          type: string
        sourceConfidence:
          type: number
          description: Confidence score 0-1
        sourceUrl:
          type: string
          nullable: true

    ErrorResponse:
      type: object
      required:
        - error
        - timestamp
      properties:
        error:
          type: string
        timestamp:
          type: string
          format: date-time

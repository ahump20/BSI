# BSI Portal Sync — Cron Worker
# Fetches college baseball transfer portal data and writes to KV.
# The main worker reads from the same KV key to serve portal pages.
#
# Deploy: wrangler deploy --config workers/bsi-portal-sync/wrangler.toml

name = "bsi-portal-sync"
main = "index.ts"
compatibility_date = "2025-12-01"

# Run every 30 minutes — portal data doesn't change by the second
[triggers]
crons = ["*/30 * * * *"]

[[kv_namespaces]]
binding = "KV"
id = "e6cb68e815cd45babeee0e10460dbfee"
preview_id = "e6cb68e815cd45babeee0e10460dbfee"

[vars]
# RAPIDAPI_KEY is set as a secret via: wrangler secret put RAPIDAPI_KEY --config workers/bsi-portal-sync/wrangler.toml

[dev]
port = 8790
